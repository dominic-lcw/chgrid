var gu=Object.defineProperty,yu=Object.getOwnPropertyDescriptor,h=(e,t,i,o)=>{for(var s=o>1?void 0:o?yu(t,i):t,a=e.length-1,n;a>=0;a--)(n=e[a])&&(s=(o?n(t,i,s):n(s))||s);return o&&s&&gu(t,i,s),s};import{_ModuleSupport as mu}from"ag-charts-community";import{_ModuleSupport as fu}from"ag-charts-community";import{_ModuleSupport as Su}from"ag-charts-community";import{isNumberEqual as Ir}from"ag-charts-core";function va(e,t,i){const o=(a,n,r,l)=>{let c=e[0];for(let p=a;r>0?p<=n:p>n;p+=r){const d=e[p];if(l(c,d))return!0;c=d}return!1},s=Math.floor(e.length/2);return o(t,s,t,i)?!0:o(e.length-t,s,-t,i)}import{_ModuleSupport as xu}from"ag-charts-community";var{AxisInterval:bu,Property:vu}=xu,Da=class extends bu{};h([vu],Da.prototype,"minSpacing",2);import{_ModuleSupport as Ko}from"ag-charts-community";import{countFractionDigits as Du,isArray as ku,isNumberEqual as Pi,wrapText as Au,wrapTextSegments as Mu}from"ag-charts-core";import{_ModuleSupport as Lr}from"ag-charts-community";import{isNumberEqual as Nr}from"ag-charts-core";import{_ModuleSupport as Iu}from"ag-charts-community";import{createId as Lu}from"ag-charts-core";var{BaseProperties:Tr,ChartAxisDirection:Nu,Property:ve,Group:ka,FONT_SIZE:Tu}=Iu,St=class extends Tr{constructor(){super(...arguments),this.fontSize=Tu.LARGE,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};h([ve],St.prototype,"enabled",2),h([ve],St.prototype,"text",2),h([ve],St.prototype,"fontStyle",2),h([ve],St.prototype,"fontWeight",2),h([ve],St.prototype,"fontSize",2),h([ve],St.prototype,"fontFamily",2),h([ve],St.prototype,"padding",2),h([ve],St.prototype,"color",2),h([ve],St.prototype,"parallel",2);var Je=class extends Tr{constructor(){super(...arguments),this.id=Lu(this),this.defaultColorRange=[],this.shape="polygon",this.label=new St,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Nu.Angle,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new ka({name:this.id}),this.rangeGroup=new ka({name:this.id}),this.labelGroup=new ka({name:this.id}),this._isRange=void 0}assignCrossLineGroup(e,t){e!==this._isRange&&(e?this.rangeGroup.appendChild(t):this.lineGroup.appendChild(t)),this._isRange=e}setSectorNodeProps(e){e.fill=this.fill,e.fillOpacity=this.fillOpacity??1,e.stroke=this.stroke,e.strokeOpacity=this.strokeOpacity??1,e.strokeWidth=this.strokeWidth??1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,o,s){const{label:a}=this;e.x=t,e.y=i,e.text=a.text,e.textAlign="center",e.textBaseline=o,e.rotation=s,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=a.color,e.fontFamily=a.fontFamily,e.fontSize=a.fontSize,e.fontStyle=a.fontStyle,e.visible=!0}};h([ve],Je.prototype,"enabled",2),h([ve],Je.prototype,"type",2),h([ve],Je.prototype,"range",2),h([ve],Je.prototype,"value",2),h([ve],Je.prototype,"defaultColorRange",2),h([ve],Je.prototype,"fill",2),h([ve],Je.prototype,"fillOpacity",2),h([ve],Je.prototype,"stroke",2),h([ve],Je.prototype,"strokeWidth",2),h([ve],Je.prototype,"strokeOpacity",2),h([ve],Je.prototype,"lineDash",2),h([ve],Je.prototype,"shape",2),h([ve],Je.prototype,"label",2);var{ChartAxisDirection:Ru,getCrossLineValue:Cu,validateCrossLineValue:Pu,normalizeAngle360:Aa,Group:_u,Path:Rr,Sector:Eu,RotatableText:wu,ContinuousScale:Ou}=Lr,Ma=class extends Je{constructor(){super(),this.direction=Ru.Angle,this.polygonNode=new Rr,this.sectorNode=new Eu,this.lineNode=new Rr,this.crossLineRange=new _u,this.labelNode=new wu,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!Ou.is(this.scale))return!0;const[e,t]=this.scale.domain,i=Cu(this);if(this.type==="range"){const[o,s]=i;return o>=e&&o<=t&&s>=o&&s<=t}else return i>=e&&i<=t}update(e){const{scale:t}=this;if(!t||!Pu(this,t)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){const{scale:t,type:i,value:o,lineNode:s}=this;if(!e||i!=="line"||!t){s.visible=!1;return}const a=t.convert(o);if(isNaN(a)){s.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:r}=this;s.visible=!0,s.stroke=this.stroke,s.strokeOpacity=this.strokeOpacity??1,s.strokeWidth=this.strokeWidth??1,s.fill=void 0,s.lineDash=this.lineDash;const l=r*Math.cos(a),c=r*Math.sin(a),p=n*Math.cos(a),d=n*Math.sin(a);s.path.clear(!0),s.path.moveTo(p,d),s.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(e){const{polygonNode:t,range:i,scale:o,shape:s,type:a,ticks:n}=this;if(!e||a!=="range"||s!=="polygon"||!o||!i){t.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:l}=this,c=n.indexOf(i[0]),p=n.indexOf(i[1]),u=(c<=p?n.slice(c,p+1):n.slice(c).concat(n.slice(0,p+1))).map(y=>o.convert(y));t.visible=!0,this.setSectorNodeProps(t);const{path:g}=t;g.clear(!0),u.forEach((y,m)=>{const f=l*Math.cos(y),S=l*Math.sin(y);m===0?g.moveTo(f,S):g.lineTo(f,S)}),r===0?g.lineTo(0,0):u.slice().reverse().forEach(y=>{const m=r*Math.cos(y),f=r*Math.sin(y);g.lineTo(m,f)}),t.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(e){const{sectorNode:t,range:i,scale:o,shape:s,type:a}=this;if(!e||a!=="range"||s!=="circle"||!o||!i){t.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:r}=this,l=i.map(d=>o.convert(d)),c=o.step??0,p=o instanceof Lr.BandScale?c/2:0;t.visible=!0,this.setSectorNodeProps(t),t.centerX=0,t.centerY=0,t.innerRadius=n,t.outerRadius=r,t.startAngle=l[0]-p,t.endAngle=l[1]+p,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(e){const{label:t,labelNode:i,range:o,scale:s,type:a,ticks:n}=this;if(!e||t.enabled===!1||!t.text||!s||a==="range"&&!o){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:r,axisOuterRadius:l}=this;let c,p,d,u;if(a==="line"){const g=Aa(s.convert(this.value)),y=1.5*Math.PI,m=Nr(g,y)||g>y||g<Math.PI/2,f=(r+l)/2*Math.cos(g),S=(r+l)/2*Math.sin(g);c=f+t.padding*Math.cos(g+Math.PI/2),p=S+t.padding*Math.sin(g+Math.PI/2),u=m?"top":"bottom",d=m?g:g-Math.PI}else{const[g,y]=o.map(D=>Aa(s.convert(D)));let m=(g+y)/2;g>y&&(m-=Math.PI),m=Aa(m);const f=(Nr(m,0)||m>0)&&m<Math.PI;let S;this.shape==="circle"||n.length<3?S=l-t.padding:S=l*Math.cos(Math.PI/n.length)-t.padding,c=S*Math.cos(m),p=S*Math.sin(m),u=f?"bottom":"top",d=f?m-Math.PI/2:m+Math.PI/2}this.setLabelNodeProps(i,c,p,u,d)}};Ma.className="AngleCrossLine";var{ChartAxisDirection:Fu,Property:Ia,toRadians:co,normalizeAngle360:Yt,normalizeAngle360Inclusive:Bu,Path:Gu,RotatableText:Vu,Transformable:Ku,BBox:zu,Selection:Cr,Line:Pr}=Ko,La=class extends Ko.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};h([Ia],La.prototype,"orientation",2);var ho=class extends Ko.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.tickLineGroupSelection=Cr.select(this.tickLineGroup,Pr,!1),this.gridLineGroupSelection=Cr.select(this.gridLineGroup,Pr,!1),this.labelData=[],this.tickData=[],this.radiusLineGroup=this.axisGroup.appendChild(new Ko.TransformableGroup),this.radiusLine=this.radiusLineGroup.appendChild(new Gu),this.includeInvisibleDomains=!0}get direction(){return Fu.Angle}createLabel(){return new La}calculateRotations(){const e=co(this.startAngle),t=Yt(e),i=Yt(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}calculateTickLayout(e){const{nice:t,scale:i}=this,o={nice:t,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},s=t?i.niceDomain(o,e):e,a=this.generateAngleTicks(s);this.tickData=a;const n=a.map(l=>l.value),r=n.reduce((l,c)=>Math.max(typeof c=="number"?Du(c):0,l),0);return{niceDomain:s,tickDomain:s,ticks:n,rawTickCount:void 0,fractionDigits:r,timeInterval:void 0,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine(),this.updateGridLines(),this.updateTickLines()}normalizedAngles(){const e=Yt(-Math.PI/2+co(this.startAngle)),t=this.endAngle!=null?Bu(co(this.endAngle)-co(this.startAngle)):2*Math.PI,i=e+t;return[e,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const e=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?e:[]),this.tickLineGroupSelection.update(this.tick.enabled?e:[]),this.tickLabelGroupSelection.update(this.label.enabled?e:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){super.updatePosition();const{translation:e,radiusLineGroup:t}=this,i=Math.floor(e.x),o=Math.floor(e.y);t.translationX=i,t.translationY=o}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:o}=this.getAxisLinePoints();i.forEach(({x:s,y:a,moveTo:n,arc:r,radius:l=0,startAngle:c=0,endAngle:p=0})=>{r?t.arc(s,a,l,c,p):n?t.moveTo(s,a):t.lineTo(s,a)}),o&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.stroke,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){const{scale:e,shape:t,gridLength:i}=this,[o,s]=this.range,a=Pi(s-o,2*Math.PI),n=[];if(t==="circle")a?n.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):n.push({x:i*Math.cos(o),y:i*Math.sin(o),moveTo:!0},{x:0,y:0,radius:i,startAngle:Yt(o),endAngle:Yt(s),arc:!0,moveTo:!1});else if(t==="polygon"){const r=e.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>e.convert(l));r&&r.length>2&&r.forEach((l,c)=>{const p=i*Math.cos(l),d=i*Math.sin(l),u=c===0;n.push({x:p,y:d,moveTo:u})})}return{points:n,closePath:a}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{style:i,width:o},innerRadiusRatio:s}=this;if(!(i&&t>0))return;const a=t*s,n=i.length;this.gridLineGroupSelection.each((r,l,c)=>{const{value:p}=l,{stroke:d,lineDash:u}=i[c%n],g=e.convert(p);r.x1=a*Math.cos(g),r.y1=a*Math.sin(g),r.x2=t*Math.cos(g),r.y2=t*Math.sin(g),r.stroke=d,r.strokeWidth=o,r.lineDash=u,r.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this;t.each((i,o,s)=>{const a=this.labelData[s];if(!a||a.hidden){i.visible=!1;return}i.text=a.text,i.setFont(e),i.fill=e.color,i.x=a.x,i.y=a.y,i.setAlign(a),i.setBoxing(e),i.visible=!0,a.rotation?(i.rotation=a.rotation,i.rotationCenterX=a.x,i.rotationCenterY=a.y):i.rotation=0})}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:o}=this;o.each((s,a)=>{const{value:n}=a,r=e.convert(n),l=Math.cos(r),c=Math.sin(r);s.x1=t*l,s.y1=t*c,s.x2=(t+i.size)*l,s.y2=(t+i.size)*c,s.stroke=i.stroke,s.strokeWidth=i.width})}createLabelNodeData(e,t,i){const{label:o,gridLength:s,scale:a,tick:n}=this;if(!o.enabled)return[];const r=new Vu,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,{fractionDigits:p}=this.layout.label,d=this.tickFormatter(this.scale.domain,this.tickData,!1,p),u=e.map((g,y)=>{const{value:m}=g,f=s+o.spacing+n.size,S=a.convert(m),D=Math.cos(S),v=Math.sin(S),x=f*D,k=f*v,{textAlign:A,textBaseline:M}=this.getLabelAlign(S),b=y===e.length-1&&m!==e[0]&&Pi(Yt(S),Yt(a.convert(e[0]))),L=this.getLabelRotation(S);let I=d(m,y);r.text=I,r.x=x,r.y=k,r.setFont(o),r.textAlign=A,r.textBaseline=M,r.rotation=L,L&&(r.rotationCenterX=x,r.rotationCenterY=k);let N=L?Ku.toCanvas(r):r.getBBox();if(N&&t.hideWhenNecessary&&!L){const R=l-N.x,P=N.x+N.width-c,_=1;if(R>_||P>_){const O={maxWidth:N.width-Math.max(R,P),font:o,textWrap:"never"};I=ku(I)?Mu(I,O):Au(I,O),r.text=I,N=r.getBBox()}}return{text:I,x,y:k,textAlign:A,textBaseline:M,hidden:I===""||g.hidden||b,rotation:L,box:N}});return o.avoidCollisions&&this.avoidLabelCollisions(u),u}computeLabelsBBox(e,t){this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map(({box:o})=>o).filter(o=>o!=null);return!this.label.enabled||i.length===0?null:zu.merge(i)}getLabelOrientation(){const{label:e}=this;return e instanceof La?e.orientation:"fixed"}getLabelRotation(e){let t=co(this.label.rotation??0);e=Yt(e);const i=this.getLabelOrientation();return i==="parallel"?(t+=e,e>=0&&e<Math.PI?t-=Math.PI/2:t+=Math.PI/2):i==="perpendicular"&&(t+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(t+=Math.PI)),t}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let o,s;const a=this.getLabelOrientation(),n=Pi(t,0),r=Pi(i,0),l=Pi(t,1),c=Pi(i,-1),p=t>0&&!n,d=i>0&&!r;return a==="parallel"?(o="center",s=l&&r||d?"top":"bottom"):a==="perpendicular"?(o=c||p?"left":"right",s="middle"):(o="right",n?o="center":p&&(o="left"),s="bottom",r?s="middle":d&&(s="top")),{textAlign:o,textBaseline:s}}updateCrossLines(){const{shape:e,gridLength:t,innerRadiusRatio:i}=this;this.crossLines.forEach(o=>{o instanceof Ma&&(o.ticks=this.tickData.map(s=>s.value),o.shape=e,o.axisOuterRadius=t,o.axisInnerRadius=t*i)}),super.updateCrossLines()}};ho.CrossLineConstructor=Ma,h([Ia],ho.prototype,"startAngle",2),h([Ia],ho.prototype,"endAngle",2);var{Property:Na,CategoryScale:Wu}=Su,ni=class extends ho{constructor(e){super(e,new Wu),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new Da}hasDefinedDomain(){return!1}generateAngleTicks(e){const{scale:t,gridLength:i}=this,{values:o,minSpacing:s}=this.interval,a={nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},n=o??t.ticks(a,e)?.ticks??[];if(n.length<2||s==null)return n.map(d=>({value:d,visible:!0}));const r=n[0],l=t.convert(r),c=i*Math.cos(l),p=i*Math.sin(l);for(let d=1;d<n.length-1;d++){const u=n[d],g=t.convert(u);if(g-l>Math.PI)break;const y=i*Math.cos(g),m=i*Math.sin(g);if(Math.sqrt((y-c)**2+(m-p)**2)>s){const S=new Set([r]);return va(n,d,(D,v)=>{S.add(v)}),n.map(D=>{const v=S.has(D);return{value:D,visible:v}})}}return[{value:r,visible:!0}]}avoidLabelCollisions(e){const{minSpacing:t}=this.label;if(e.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(t==null)return l.box.collidesBBox(c.box);const p=l.box.clone().grow(t/2),d=c.box.clone().grow(t/2);return p.collidesBBox(d)},o=e[0],s=e.at(-1),a=new Set([o]),n=Ir(o.x,s.x)&&Ir(o.y,s.y),r=Math.floor(e.length/2);for(let l=1;l<=r;l++){const c=n?e.slice(0,-1):e;if(!va(c,l,i)){va(c,l,(d,u)=>{a.add(u)});break}}e.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:o,legendItemName:s,key:a,source:n,property:r,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:o,legendItemName:s,key:a,source:n,property:r,domain:l,boundSeries:c}}};ni.className="AngleCategoryAxis",ni.type="angle-category",h([Na],ni.prototype,"groupPaddingInner",2),h([Na],ni.prototype,"paddingInner",2),h([Na],ni.prototype,"interval",2);import{_ModuleSupport as $u}from"ag-charts-community";import{isNumberEqual as _r}from"ag-charts-core";import{_ModuleSupport as Hu}from"ag-charts-community";import{isNumberEqual as Xu}from"ag-charts-core";var{range:Er,isDenseInterval:Yu,LinearScale:Ta}=Hu,wr=class Mr extends Ta{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(t,i){const[o,s]=i;let a=Ta.getTickStep(o,s,t);const n=isNaN(t.maxTickCount)?1/0:t.maxTickCount,r=Math.abs(s-o)/a;let l=Math.pow(2,Math.ceil(Math.log(r)/Math.log(2)));return l>n&&(l/=2,a*=2),{count:l,step:a}}ticks(t,i=this.domain){const{arcLength:o}=this;if(!i||i.length<2||i.some(c=>!isFinite(c))||o<=0)return{ticks:[],count:0};const{nice:s,interval:a}=t,[n,r]=i;if(a){const c=Math.abs(a),p=this.getPixelRange();if(!Yu((r-n)/c,p))return Er(n,r,c)}let l;if(s&&this.hasNiceRange()){const c=super.niceDomain(t,i);l=Mr.getNiceStepAndTickCount(t,c).step}else l=Ta.getTickStep(n,r,t);return Er(n,r,l)}hasNiceRange(){const t=this.range.slice().sort((o,s)=>o-s);return[Math.PI,2*Math.PI].some(o=>Xu(o,t[1]-t[0]))}niceDomain(t,i=this.domain){const o=super.niceDomain(t,i);if(!this.hasNiceRange())return o;const s=o[0]>o[1],a=s?o[1]:o[0],{step:n,count:r}=Mr.getNiceStepAndTickCount(t,o),l=1/n,c=n>=1?Math.ceil(a/n+r)*n:Math.ceil((a+r*n)*l)/l;return s?[c,a]:[a,c]}getPixelRange(){return this.arcLength}},{Property:Ra,angleBetween:Uu,normalisedExtentWithMetadata:qu,findMinMax:ju}=$u,_i=class extends ho{constructor(e){super(e,new wr),this.shape="circle",this.interval=new Da}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:o,clipped:s}=qu(e,t,i);return{domain:o,clipped:s}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e),o=Uu(t,i)||2*Math.PI,s=this.gridLength;return o*s}generateAngleTicks(e){const{scale:t,range:i,nice:o}=this,{values:s,step:a,minSpacing:n,maxSpacing:r}=this.interval;let l;if(s==null){const{arcLength:c}=t,p=r?Math.floor(c/r):1,d=n?Math.floor(c/n):1/0,u=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),g=Math.max(p,Math.min(d,u)),y={nice:o,interval:a,tickCount:g,minTickCount:p,maxTickCount:d};l=t.ticks(y,e)?.ticks??[]}else{const[c,p]=ju(e.map(Number));l=s.filter(d=>d>=c&&d<=p).sort((d,u)=>d-u)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(e){const{minSpacing:t}=this.label,i=(a,n)=>{if(a.hidden||n.hidden)return!1;if(t==null)return a.box.collidesBBox(n.box);const r=a.box.clone().grow(t/2),l=n.box.clone().grow(t/2);return r.collidesBBox(l)},o=e[0],s=e.at(-1);o!==s&&_r(o.x,s.x)&&_r(o.y,s.y)&&(s.hidden=!0);for(let a=1;a<e.length;a*=2){let n=!1;for(let r=a;r<e.length;r+=a){const l=e[r],c=e[r-a];if(i(c,l)){n=!0;break}}if(!n){e.forEach((r,l)=>{l%a>0&&(r.hidden=!0,r.box=void 0)});return}}e.forEach((a,n)=>{n>0&&(a.hidden=!0,a.box=void 0)})}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:o,seriesId:s,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:p}=t;return{type:"number",value:e,datum:o,seriesId:s,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:p,fractionDigits:i}}};_i.className="AngleNumberAxis",_i.type="angle-number",h([Ra],_i.prototype,"min",2),h([Ra],_i.prototype,"max",2),h([Ra],_i.prototype,"interval",2);import{_ModuleSupport as Or}from"ag-charts-community";var{OrdinalTimeScale:Ju,Property:Zu,TimeAxisParentLevel:Qu,lowestGranularityUnitForTicks:eg,lowestGranularityUnitForValue:tg,minimumTimeAxisDatumGranularity:ig,dateTruncationForDomain:og,intervalUnit:Fr,intervalStep:Br,intervalEpoch:Gr,intervalMilliseconds:Vr}=Or,zo=class extends Or.DiscreteTimeAxis{constructor(e){super(e,new Ju),this.parentLevel=new Qu}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}processData(){super.processData();const{boundSeries:e,direction:t}=this;this.minimumTimeGranularity=ig(e,t,void 0,void 0)}tickFormatParams(e,t,i,o){o??(o=eg(t));const s=og(e),a=Fr(o),n=Br(o),r=Gr(o);return{type:"date",unit:a,step:n,epoch:r,truncateDate:s}}datumFormatParams(e,t,i,o,s){if(typeof e=="number"&&(e=new Date(e)),o==null){const{minimumTimeGranularity:f}=this,S=tg(e);f!=null&&Vr(f)<Vr(S)?o=f:o=S}const{datum:a,seriesId:n,legendItemName:r,key:l,source:c,property:p,domain:d,boundSeries:u}=t,g=Fr(o),y=Br(o),m=Gr(o);return{type:"date",value:e,datum:a,seriesId:n,legendItemName:r,key:l,source:c,property:p,domain:d,boundSeries:u,unit:g,step:y,epoch:m,style:s}}};zo.className="OrdinalTimeAxis",zo.type="ordinal-time",h([Zu],zo.prototype,"parentLevel",2);import{_ModuleSupport as sg}from"ag-charts-community";import{_ModuleSupport as Wo}from"ag-charts-community";import{isNumberEqual as ag}from"ag-charts-core";import{_ModuleSupport as Kr}from"ag-charts-community";import{clamp as zr,isNumberEqual as ng}from"ag-charts-core";var{ChartAxisDirection:rg,Property:lg,validateCrossLineValue:cg,normalizeAngle360FromDegrees:hg,Group:pg,Path:dg,Sector:ug,RotatableText:gg}=Kr,Wr=class extends St{constructor(){super(...arguments),this.positionAngle=void 0}};h([lg],Wr.prototype,"positionAngle",2);var Ca=class extends Je{constructor(){super(),this.direction=rg.Radius,this.label=new Wr,this.polygonNode=new dg,this.sectorNode=new ug,this.crossLineRange=new pg,this.labelNode=new gg,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t}=this;if(!t||!cg(this,t)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:o}=this;e&&(e=i>=this.axisInnerRadius&&o<=this.axisOuterRadius),this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:e,scale:t,type:i,axisInnerRadius:o,axisOuterRadius:s}=this;if(!t)return{innerRadius:0,outerRadius:0};const a=l=>s+o-l;let n,r;if(i==="line")n=a(t.convert(this.value)),r=n;else{const l=Math.abs(t?.bandwidth??0),c=e.map(p=>t.convert(p));n=a(Math.max(...c)),r=a(Math.min(...c))+l}this.outerRadius=n,this.innerRadius=r}drawPolygon(e,t,i){t.forEach((o,s)=>{const a=e*Math.cos(o),n=e*Math.sin(o);s===0?i.path.moveTo(a,n):i.path.lineTo(a,n)}),i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:o,shape:s,type:a,innerRadius:n,outerRadius:r}=this;if(!e||s!=="polygon"||!o||!t){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(r-l,t,i);const c=t.slice().reverse(),p=a==="line"?r-l:n+l;this.drawPolygon(p,c,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:o,sectorNode:s,shape:a,innerRadius:n,outerRadius:r}=this;if(!e||a!=="circle"||!o){s.visible=!1;return}s.visible=!0,s.startAngle=0,s.endAngle=2*Math.PI;const l=this.getPadding(),c=zr(t,n+l,i),p=zr(t,r-l,i);s.innerRadius=Math.min(c,p),s.outerRadius=Math.max(c,p),this.setSectorNodeProps(s)}updateLabelNode(e){const{innerRadius:t,label:i,labelNode:o,scale:s,shape:a,type:n}=this;if(!e||i.enabled===!1||!i.text||!s){o.visible=!1;return}const r=hg((i.positionAngle??0)-90),l=(ng(r,0)||r>0)&&r<Math.PI,c=l?r-Math.PI/2:r+Math.PI/2;let p;const d=this.gridAngles??[];n==="line"?p=t+i.padding:a==="circle"||d.length<3?p=t-i.padding:p=t*Math.cos(Math.PI/d.length)-i.padding;const u=p*Math.cos(r),g=p*Math.sin(r);let y;n==="line"?y=l?"top":"bottom":y=l?"bottom":"top",this.setLabelNodeProps(o,u,g,y,c)}getPadding(){const{scale:e}=this;if(!e)return 0;const t=Math.abs(e.bandwidth??0),i=Math.abs(e.step??0);return e instanceof Kr.BandScale?(i-t)/2:0}};Ca.className="RadiusCrossLine";var{ChartAxisDirection:yg,ZIndexMap:mg,Property:Pa,normalizeAngle360:$r,toRadians:fg,Caption:Sg,Group:xg,TransformableGroup:Hr,Path:bg,Line:Xr,Selection:Yr,generateTicks:vg,AxisGroupZIndexMap:Dg}=Wo,_a=class extends Wo.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};h([Pa],_a.prototype,"autoRotate",2),h([Pa],_a.prototype,"autoRotateAngle",2);var $o=class extends Wo.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridLineGroupSelection=Yr.select(this.gridLineGroup,Xr,!1),this.generatedTicks=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new Hr({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new Hr({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new Xr({name:`${this.id}-Axis-line`,zIndex:Dg.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new xg({name:`${this.id}-gridPaths`,zIndex:mg.AXIS_GRID})),this.gridPathSelection=Yr.select(this.gridPathGroup,bg),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return yg.Radius}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:o}=this,s=e*o,a=fg(i);return{translationX:t.x,translationY:t.y-e-s,rotation:a,rotationCenterX:0,rotationCenterY:e+s}}update(){super.update(),this.updateTitle(),this.updateGridLines();const{enabled:e,stroke:t,width:i}=this.line;this.lineNode.setProperties({stroke:t,strokeWidth:e?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.setProperties(e),this.tickLabelGroup.setProperties(e),this.lineNodeGroup.setProperties(e),this.headingLabelGroup.setProperties(e)}calculateRotations(){return{rotation:0,parallelFlipRotation:0,regularFlipRotation:-Math.PI/2}}calculateTickLayout(e,t,i){const o=[0,1],s=this.label.getSideFlag(),a=s*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),{range:n,reverse:r,defaultTickMinSpacing:l}=this,c=vg({scale:this.scale,label:this.label,interval:this.interval,tickFormatter:(...D)=>this.tickFormatter(...D),domain:e,range:n,reverse:r,niceMode:t,visibleRange:o,defaultTickMinSpacing:l,labelOffset:a,sideFlag:s,axisRotation:0,sizeLimit:void 0,primaryTickCount:void 0}),{tickData:p}=c,{ticks:d,rawTicks:u,rawTickCount:g,tickDomain:y,fractionDigits:m,niceDomain:f=e}=p,S=d.map(D=>this.getTickLabelProps(D,c));return this.generatedTicks={ticks:d,labels:S},{ticks:u,tickDomain:y,niceDomain:f,rawTickCount:g,fractionDigits:m,timeInterval:void 0}}updateSelections(){const{generatedTicks:e}=this;if(!e)return;const{ticks:t,labels:i}=e;this.gridLineGroupSelection.update(this.gridLength?t:[]),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(t):[]),this.gridLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const e=Wo.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.color,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center",t.setFont(i),t.setBoxing(i),t.setProperties(e(t,i))})}updateGridLines(){const{gridLine:{style:e,width:t},shape:i,generatedTicks:o}=this;if(!e||!o)return;const s=e.length,a=(u,g)=>{const{stroke:y,lineDash:m}=e[g%s];u.stroke=y,u.strokeWidth=t,u.lineDash=m,u.fill=void 0},[n,r]=this.gridRange??[0,2*Math.PI],l=ag(r-n,2*Math.PI),d=i==="circle"?(u,g)=>{const{path:y}=u;y.clear(!0);const m=this.getTickRadius(g);l?(y.moveTo(m,0),y.arc(0,0,m,0,2*Math.PI)):(y.moveTo(m*Math.cos(n),m*Math.sin(n)),y.arc(0,0,m,$r(n),$r(r))),l&&y.closePath()}:(u,g)=>{const{path:y}=u,m=this.gridAngles;if(y.clear(!0),!m||m.length<3)return;const f=this.getTickRadius(g);m.forEach((S,D)=>{const v=f*Math.cos(S),x=f*Math.sin(S);D===0?y.moveTo(v,x):y.lineTo(v,x),m.forEach((k,A)=>{const M=f*Math.cos(k),b=f*Math.sin(k);A===0?y.moveTo(M,b):y.lineTo(M,b)}),y.closePath()}),y.closePath()};this.gridPathSelection.each((u,g,y)=>{a(u,y),d(u,g)})}updateTitle(){const e=n=>n.defaultValue,{title:t,range:i}=this,{formatter:o=e}=this.title;t.caption.enabled=t.enabled,t.caption.fontFamily=t.fontFamily,t.caption.fontSize=t.fontSize,t.caption.fontStyle=t.fontStyle,t.caption.fontWeight=t.fontWeight,t.caption.color=t.color,t.caption.wrapping=t.wrapping;let s=!1;const a=t.caption.node;t.enabled&&(s=!0,a.rotation=Math.PI/2,a.x=Math.floor((i[0]+i[1])/2),a.y=-Sg.SMALL_PADDING,a.textAlign="center",a.textBaseline="bottom",a.text=this.cachedCallWithContext(o,this.getTitleFormatterParams(this.scale.domain))),a.visible=s}updateCrossLines(){this.crossLines.forEach(e=>{if(e instanceof Ca){const{shape:t,gridAngles:i,range:o,innerRadiusRatio:s}=this,a=o[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=a,e.axisInnerRadius=a*s}}),super.updateCrossLines()}createLabel(){return new _a}getTickLabelProps(e,t){const{label:i}=this,{rotation:o,textBaseline:s,textAlign:a}=t,n=this.scale.range,r=e.tickLabel??"",c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),p=r!==""&&r!=null,d=o;return{...this.getLabelStyles({value:e.tick,formattedValue:e.tickLabel}),tickId:e.tickId,rotation:d,text:r,textAlign:a,textBaseline:s,visible:p,x:c,y:e.translation,rotationCenterX:c,rotationCenterY:e.translation,range:n}}};$o.CrossLineConstructor=Ca,h([Pa],$o.prototype,"positionAngle",2);var{ProxyPropertyOnWrite:Ur,Property:Ea,CategoryScale:qr}=sg,ri=class extends $o{constructor(e){super(e,new qr),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}hasDefinedDomain(){return!1}normaliseDataDomain(e){return{domain:e,clipped:!1}}prepareGridPathTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t,innerRadiusRatio:i}=this,o=t.range[0],s=o*i;if(qr.is(t)){const a=t.domain,n=a.length-1-a.indexOf(e.tick);return n===0?s:t.inset+t.step*(n-.5)+t.bandwidth/2}else{const a=(o-s)/t.domain.length;return o-e.translation+s-a/2}}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:o,legendItemName:s,key:a,source:n,property:r,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:o,legendItemName:s,key:a,source:n,property:r,domain:l,boundSeries:c}}};ri.className="RadiusCategoryAxis",ri.type="radius-category",h([Ea],ri.prototype,"groupPaddingInner",2),h([Ur("scale","paddingInner"),Ea],ri.prototype,"paddingInner",2),h([Ur("scale","paddingOuter"),Ea],ri.prototype,"paddingOuter",2);import{_ModuleSupport as kg}from"ag-charts-community";var{Property:jr,normalisedExtentWithMetadata:Ag,LinearScale:Mg}=kg,po=class extends $o{constructor(e){super(e,new Mg),this.shape="polygon"}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}prepareGridPathTickData(e){const{scale:t}=this,i=t.domain[1];return e.filter(({tick:o})=>o!==i).sort((o,s)=>s.tick-o.tick)}getTickRadius(e){const{scale:t}=this,i=t.range[0],o=i*this.innerRadiusRatio;return i-e.translation+o}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:o,clipped:s}=Ag(e,t,i);return{domain:o,clipped:s}}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:o,seriesId:s,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:p}=t;return{type:"number",value:e,datum:o,seriesId:s,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:p,fractionDigits:i}}};po.className="RadiusNumberAxis",po.type="radius-number",h([jr],po.prototype,"min",2),h([jr],po.prototype,"max",2);var{ordinalTimeAxisOptionsDefs:Ig,angleNumberAxisOptionsDefs:Lg,angleCategoryAxisOptionsDefs:Ng,radiusNumberAxisOptionsDefs:Tg,radiusCategoryAxisOptionsDefs:Rg}=fu,Jr={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:Ig,create:e=>new zo(e)},Zr={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:Lg,create:e=>new _i(e)},Qr={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:Ng,create:e=>new ni(e)},el={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:Tg,create:e=>new po(e)},tl={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:Rg,create:e=>new ri(e)};import{_ModuleSupport as Cg}from"ag-charts-community";import{_ModuleSupport as Pg}from"ag-charts-community";var{Chart:_g}=Pg,wa=class extends _g{getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:o}=e,s=o.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=s,this.animationRect=s;for(const a of[t,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:s,paddedRect:o}})}getAriaLabel(){const e=this.series[0]?.type;if(e==null)return"";const t=this.getCaptionText();switch(e){case"radial-gauge":case"linear-gauge":{const i=[];t.length!==0&&i.push(t);for(const o of this.series)i.push(o.getCaptionText());return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i.join(". ")})}case"treemap":case"sunburst":return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t});default:return this.ctx.localeManager.t("ariaAnnounceStandaloneChart",{caption:t})}}};wa.className="StandaloneChart",wa.type="standalone";var{isAgStandaloneChartOptions:Eg,standaloneChartOptionsDefs:wg}=Cg,il={type:"chart",name:"standalone",enterprise:!0,options:wg,detect:Eg,create(e,t){return new wa(e,t)}};import{_ModuleSupport as Og}from"ag-charts-community";import{_ModuleSupport as Fg}from"ag-charts-community";var{Chart:Bg,MercatorScale:ol,ChartAxisDirection:Ho,Property:Gg}=Fg;function sl(e){return e.type==="map-shape"||e.type==="map-line"||e.type==="map-marker"||e.type==="map-shape-background"||e.type==="map-line-background"}var Xo=class extends Bg{constructor(e,t){super(e,t),this.ctx.zoomManager.updateAxes([Ho.X,Ho.Y])}getChartType(){return"topology"}async updateData(){await super.updateData();const e=this.getOptions();this.topology!==e.topology&&(this.topology=e.topology);const{topology:t}=this;this.series.forEach(i=>{sl(i)&&i.setChartTopology(t)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:o}=e,s=o.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=s,this.animationRect=s;const a=this.series.filter(sl),n=a.reduce((c,p)=>{if(!p.visible)return c;const d=p.topologyBounds;return d==null?c:c==null?d:c.merge(d)},void 0);let r;if(n!=null){const{lon0:c,lat0:p,lon1:d,lat1:u}=n,g=[[c,p],[d,u]],y=ol.bounds(g),{width:m,height:f}=s,S=Math.min(m/y.width,f/y.height),D=y.width*S,v=y.height*S,x=(m-D)/2,k=(f-v)/2,A=x,M=k,b=x+D,L=k+v,I=this.ctx.zoomManager.getAxisZoom(Ho.X),N=this.ctx.zoomManager.getAxisZoom(Ho.Y),R=(b-A)/(I.max-I.min),P=A-R*I.min,_=(L-M)/(1-N.min-(1-N.max)),T=M-_*(1-N.max);r=new ol(g,[[P,T],[P+R,T+_]])}a.forEach(c=>{c.scale=r});const l=this.series.some(c=>c.visible);t.visible=l;for(const c of[t,i])c.translationX=Math.floor(s.x),c.translationY=Math.floor(s.y),c.setClipRect(s.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:l,rect:s,paddedRect:o}})}};Xo.className="TopologyChart",Xo.type="topology",h([Gg],Xo.prototype,"topology",2);var{isAgTopologyChartOptions:Vg,topologyChartOptionsDefs:Kg}=Og,al={type:"chart",name:"topology",enterprise:!0,options:Kg,detect:Vg,create(e,t){return new Xo(e,t)}};import{_ModuleSupport as zg}from"ag-charts-community";import{_ModuleSupport as Wg}from"ag-charts-community";import{and as Yo,arrayOf as $g,arrayOfDefs as nl,boolean as li,constant as rl,greaterThan as ll,lessThan as cl,number as Tt,numberRange as Hg,optionsDefs as hl,or as ci,ratio as Uo,required as Xg,string as xt,typeUnion as Yg,union as Ug}from"ag-charts-core";var{annotationCalloutStylesDefs:qg,annotationNoteStylesDefs:jg,annotationTextStylesDef:Jg,annotationCommentStylesDefs:Zg,annotationMeasurerStylesDefs:Oa,annotationShapeStylesDefs:pl,annotationChannelTextDefs:Qg,annotationCrossLineStyleDefs:dl,annotationFibonacciStylesDefs:ul,annotationLineStyleDefs:gl,annotationLineTextDefs:ey,annotationDisjointChannelStyleDefs:ty,annotationParallelChannelStyleDefs:iy}=Wg,uo=hl({__type:Xg(rl("date")),value:ci(xt,Tt)},"a serializable date object"),yl=ci(xt,Tt,uo),Fa=ci(yl,hl({value:yl,groupPercentage:Hg(-1,2)})),ml={...Qg,label:xt},Bt={...ey,label:xt},ge={x:Fa,y:Tt},oy=Yg({line:{...gl,start:ge,end:ge,text:Bt},"horizontal-line":{...dl,value:Fa,text:Bt},"vertical-line":{...dl,value:Fa,text:Bt},"disjoint-channel":{...ty,startHeight:Tt,endHeight:Tt,start:ge,end:ge,text:ml},"parallel-channel":{...iy,height:Tt,start:ge,end:ge,text:ml},"fibonacci-retracement":{...ul,start:ge,end:ge,text:Bt,reverse:li},"fibonacci-retracement-trend-based":{...ul,start:ge,end:ge,endRetracement:ge,text:Bt,reverse:li},callout:{...qg,start:ge,end:ge,text:xt},comment:{...Zg,...ge,text:xt},note:{...jg,...ge,text:xt},text:{...Jg,...ge,text:xt},arrow:{...gl,text:Bt,start:ge,end:ge},"arrow-up":{...pl,...ge},"arrow-down":{...pl,...ge},"date-range":{...Oa,extendAbove:li,extendBelow:li,text:Bt,start:ge,end:ge},"price-range":{...Oa,extendLeft:li,extendRight:li,text:Bt,start:ge,end:ge},"date-price-range":{...Oa,text:Bt,start:ge,end:ge}},"an annotation initial state object"),sy={chartType:Ug("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:nl(oy),legend:nl({visible:li,seriesId:xt,itemId:xt,legendItemName:xt},"legend state array"),zoom:{rangeX:{start:ci(Tt,uo),end:ci(Tt,uo)},rangeY:{start:ci(Tt,uo),end:ci(Tt,uo)},ratioX:{start:Yo(Uo,cl("end")),end:Yo(Uo,ll("start"))},ratioY:{start:Yo(Uo,cl("end")),end:Yo(Uo,ll("start"))},autoScaledAxes:$g(rl("y"))}};import{_ModuleSupport as ay}from"ag-charts-community";import{array as ny,arrayOfDefs as ry,boolean as go,callback as ly,color as qo,fontOptionsDef as cy,number as fl,positiveNumber as pt,ratio as hy,typeUnion as py}from"ag-charts-core";import{_ModuleSupport as Sl}from"ag-charts-community";import{_ModuleSupport as jo}from"ag-charts-community";function dy(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function uy(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}import{_ModuleSupport as gy}from"ag-charts-community";var{Path:yy,Scalable:my,ExtendedPath2D:fy,SceneChangeDetection:Ye,SceneArrayChangeDetection:Sy,BBox:hi,clippedRoundRect:xl}=gy,Fe=class extends my(yy){constructor(){super(...arguments),this.wickPath=new fy,this.horizontal=!1,this.center=0,this.thickness=0,this.min=0,this.q1=0,this.median=0,this.q3=0,this.max=0,this.cornerRadius=0,this.crisp=!1,this.strokeAlignment=0,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0,this.capLengthRatio=1}computeBBox(){const{horizontal:e,center:t,thickness:i,min:o,max:s}=this;return e?new hi(Math.min(o,s),t-i/2,Math.abs(s-o),i):new hi(t-i/2,Math.min(o,s),i,Math.abs(s-o))}computeDefaultGradientFillBBox(){const{horizontal:e,center:t,thickness:i,q1:o,q3:s}=this;return e?new hi(Math.min(o,s),t-i/2,Math.abs(s-o),i):new hi(t-i/2,Math.min(o,s),i,Math.abs(s-o))}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return this.horizontal?{x:(this.min+this.max)/2,y:this.center}:{x:this.center,y:(this.min+this.max)/2}}alignedCoordinates(){const{thickness:e,crisp:t,strokeAlignment:i}=this;let{center:o,min:s,q1:a,median:n,q3:r,max:l}=this,c=o-e/2,p=o+e/2;if(t&&e>1){s=this.align(s),a=this.align(a),n=this.align(n),r=this.align(r),l=s+this.align(s,l-s);const u=this.align(e/2);o=this.align(o),c=o-u,p=o+u}const d=(s+l)/2;return c+=i,p+=i,s+=s<d?i:-i,l+=l<d?i:-i,a+=a<d?-i:i,n+=n<d?-i:i,r+=r<d?-i:i,{center:o,x0:c,x1:p,min:s,max:l,q1:a,median:n,q3:r}}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,wickStroke:n,wickStrokeWidth:r,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:p,strokeAlignment:d,cornerRadius:u,capLengthRatio:g,horizontal:y}=this,{center:m,x0:f,x1:S,min:D,max:v,q1:x,median:k,q3:A}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const b=n!=null&&n!==t||r!=null&&r!==i||l!=null&&l!==o||c!=null&&c!==s||p!=null&&p!==a?this.wickPath:e;if(Math.abs(S-f)<=3){Ei(b,y,m,D),wi(b,y,m,v);return}const L=Math.min(D,v),I=Math.max(D,v),N=Math.min(x,A),R=Math.max(x,A),P=m-Math.abs((S-f)*g)/2,_=m+Math.abs((S-f)*g)/2;Ei(b,y,P,L),wi(b,y,_,L),Ei(b,y,m,L),wi(b,y,m,N+i/2),Ei(b,y,m,I),wi(b,y,m,R-i/2),Ei(b,y,P,I),wi(b,y,_,I);const T=i/2+d,O=i/2-d,E=R-N-2*O;if(E>0){const C=f+T,w=N+O,F=S-f-2*T,B={topLeft:u,topRight:u,bottomRight:u,bottomLeft:u};bl(e,y,C,w,F,E,B,new hi(C,w,F,k-w)),bl(e,y,C,w,F,E,B,new hi(C,k,F,w+E-k))}else{const C=(N+R)/2;Ei(e,y,f,C),wi(e,y,S,C)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,wickStroke:r=i,wickStrokeWidth:l=o,wickStrokeOpacity:c=s,wickLineDash:p=a,wickLineDashOffset:d=n}=this;l!==0&&(e.globalAlpha*=c,typeof r=="string"&&(e.strokeStyle=r),e.lineWidth=l,p!=null&&e.setLineDash([...p]),e.lineDashOffset=d,e.stroke(t.getPath2D()))}};h([Ye()],Fe.prototype,"horizontal",2),h([Ye()],Fe.prototype,"center",2),h([Ye()],Fe.prototype,"thickness",2),h([Ye()],Fe.prototype,"min",2),h([Ye()],Fe.prototype,"q1",2),h([Ye()],Fe.prototype,"median",2),h([Ye()],Fe.prototype,"q3",2),h([Ye()],Fe.prototype,"max",2),h([Ye()],Fe.prototype,"cornerRadius",2),h([Ye()],Fe.prototype,"crisp",2),h([Ye()],Fe.prototype,"strokeAlignment",2),h([Ye()],Fe.prototype,"wickStroke",2),h([Ye()],Fe.prototype,"wickStrokeWidth",2),h([Ye()],Fe.prototype,"wickStrokeOpacity",2),h([Sy()],Fe.prototype,"wickLineDash",2),h([Ye()],Fe.prototype,"wickLineDashOffset",2),h([Ye()],Fe.prototype,"capLengthRatio",2);function Ei(e,t,i,o){t?e.moveTo(o,i):e.moveTo(i,o)}function wi(e,t,i,o){t?e.lineTo(o,i):e.lineTo(i,o)}function bl(e,t,i,o,s,a,n,r){t?xl(e,o,i,a,s,n,r!=null?new hi(r.y,r.x,r.height,r.width):void 0):xl(e,i,o,s,a,n,r)}import{_ModuleSupport as xy}from"ag-charts-community";var{BaseProperties:vl,AbstractBarSeriesProperties:by,makeSeriesTooltip:vy,Property:ce,mergeDefaults:Dy}=xy,Dl=class extends vl{constructor(){super(...arguments),this.lengthRatio=.5}};h([ce],Dl.prototype,"lengthRatio",2);var Oi=class extends vl{};h([ce],Oi.prototype,"stroke",2),h([ce],Oi.prototype,"strokeWidth",2),h([ce],Oi.prototype,"strokeOpacity",2),h([ce],Oi.prototype,"lineDash",2),h([ce],Oi.prototype,"lineDashOffset",2);var ye=class extends by{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new Dl,this.whisker=new Oi,this.tooltip=vy()}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:s}=this,a=super.toJson();return a.whisker=Dy(a.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:s}),a}getStyle(){const{fill:e,fillOpacity:t,strokeWidth:i,strokeOpacity:o,stroke:s,lineDash:a,lineDashOffset:n,cornerRadius:r,cap:l,whisker:c}=this;return{fill:e,fillOpacity:t,strokeWidth:i,strokeOpacity:o,stroke:s,lineDash:a,lineDashOffset:n,cornerRadius:r,cap:l,whisker:c,opacity:1}}};h([ce],ye.prototype,"xKey",2),h([ce],ye.prototype,"minKey",2),h([ce],ye.prototype,"q1Key",2),h([ce],ye.prototype,"medianKey",2),h([ce],ye.prototype,"q3Key",2),h([ce],ye.prototype,"maxKey",2),h([ce],ye.prototype,"xName",2),h([ce],ye.prototype,"yName",2),h([ce],ye.prototype,"minName",2),h([ce],ye.prototype,"q1Name",2),h([ce],ye.prototype,"medianName",2),h([ce],ye.prototype,"q3Name",2),h([ce],ye.prototype,"maxName",2),h([ce],ye.prototype,"fill",2),h([ce],ye.prototype,"fillOpacity",2),h([ce],ye.prototype,"stroke",2),h([ce],ye.prototype,"strokeWidth",2),h([ce],ye.prototype,"strokeOpacity",2),h([ce],ye.prototype,"lineDash",2),h([ce],ye.prototype,"lineDashOffset",2),h([ce],ye.prototype,"cornerRadius",2),h([ce],ye.prototype,"itemStyler",2),h([ce],ye.prototype,"cap",2),h([ce],ye.prototype,"whisker",2),h([ce],ye.prototype,"tooltip",2);var{fixNumericExtent:ky,keyProperty:Ay,mergeDefaults:Ba,SeriesNodePickMode:kl,SMALLEST_KEY_INTERVAL:My,valueProperty:yo,diff:Iy,animationValidation:Ly,computeBarFocusBounds:Ny,createDatumId:Ty,HighlightState:Ry,ContinuousScale:Cy,ChartAxisDirection:Py,motion:Al,getItemStyles:_y,applyShapeFillBBox:Ey,calculateSegments:wy}=jo,Oy=class extends jo.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.minKey=o.properties.minKey,this.q1Key=o.properties.q1Key,this.medianKey=o.properties.medianKey,this.q3Key=o.properties.q3Key,this.maxKey=o.properties.maxKey}},Jo=class extends jo.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[kl.NEAREST_NODE,kl.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},propertyNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.properties=new ye,this.NodeEvent=Oy}async processData(e){if(!this.visible)return;const{xKey:t,minKey:i,q1Key:o,medianKey:s,q3Key:a,maxKey:n}=this.properties,r=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:p,xScaleType:d,yScaleType:u}=this.getScaleInformation({xScale:l,yScale:c}),g=[];r&&this.processedData&&g.push(Iy(this.id,this.processedData)),r&&g.push(Ly());const{processedData:y}=await this.requestDataModel(e,this.data,{props:[Ay(t,d,{id:"xValue"}),yo(i,u,{id:"minValue"}),yo(o,u,{id:"q1Value"}),yo(s,u,{id:"medianValue"}),yo(a,u,{id:"q3Value"}),yo(n,u,{id:"maxValue"}),...p?[My]:[],...g]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[s];return a.type==="key"&&a.valueType==="category"?n:this.padBandExtent(n)}const o=this.domainForClippedRange(e,["minValue","maxValue"],"xValue");return ky(o)}getSeriesRange(e,t){return this.domainForVisibleRange(Py.Y,["maxValue","minValue"],"xValue",t)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&i&&o&&s))return;const{xKey:a}=this.properties,n=[],r=t.resolveKeysById(this,"xValue",i),l=t.resolveColumnById(this,"minValue",i),c=t.resolveColumnById(this,"q1Value",i),p=t.resolveColumnById(this,"medianValue",i),d=t.resolveColumnById(this,"q3Value",i),u=t.resolveColumnById(this,"maxValue",i),{barWidth:g,groupIndex:y}=this.updateGroupScale(o),m=Cy.is(o.scale)?g*-.5:0,{groupScale:f}=this,S=this.isVertical(),D=wy(this.properties.segmentation,o,s,this.chart.seriesRect,this.ctx.scene),v={itemId:a,nodeData:n,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:_y(this.getItemStyle.bind(this)),segments:D};return e&&(i.dataSources.get(this.id)??[]).forEach((k,A)=>{const M=r[A];if(M==null)return;const b=l[A],L=c[A],I=p[A],N=d[A],R=u[A];if([b,L,I,N,R].some(F=>typeof F!="number")||b>L||L>I||I>N||N>R)return;const P={xValue:o.scale.convert(M),minValue:s.scale.convert(b),q1Value:s.scale.convert(L),medianValue:s.scale.convert(I),q3Value:s.scale.convert(N),maxValue:s.scale.convert(R)},_=g;P.xValue+=f.convert(String(y))+m+_/2;const T=Math.abs(P.q3Value-P.q1Value),O=P.xValue,E=Math.min(P.q3Value,P.q1Value)+T/2,C={x:S?O:E,y:S?E:O};let w;S?w={x:C.x-_/2,y:P.minValue,width:_,height:P.maxValue-P.minValue}:w={x:P.minValue,y:C.y-_/2,width:P.maxValue-P.minValue,height:_},n.push({series:this,itemId:M,datum:k,datumIndex:A,xKey:a,bandwidth:_,scaledValues:P,midPoint:C,focusRect:w})}),v}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=this.properties;return{marker:{fill:jo.deepClone(e),fillOpacity:t,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n}}}getLegendData(e){const{id:t,ctx:{legendManager:i},visible:o}=this,{xKey:s,yName:a,showInLegend:n,legendItemName:r}=this.properties;return!s||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:o&&i.getItemEnabled({seriesId:t,itemId:t}),label:{text:r??a??t},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!n}]}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yName:r,medianKey:l,medianName:c,q1Key:p,q1Name:d,q3Key:u,q3Name:g,minKey:y,minName:m,maxKey:f,maxName:S,legendItemName:D,tooltip:v}=s,x=this.getCategoryAxis(),k=this.getValueAxis();if(!i||!o||!x||!k)return;const A=o.dataSources.get(this.id)?.[e],M=i.resolveKeysById(this,"xValue",o)[e],b=i.resolveColumnById(this,"minValue",o)[e],L=i.resolveColumnById(this,"q1Value",o)[e],I=i.resolveColumnById(this,"medianValue",o)[e],N=i.resolveColumnById(this,"q3Value",o)[e],R=i.resolveColumnById(this,"maxValue",o)[e];if(M==null)return;const P=this.getItemStyle(e,!1),_=[{label:m,fallbackLabel:y,value:this.getAxisValueText(k,"tooltip",b,A,y,D)},{label:d,fallbackLabel:p,value:this.getAxisValueText(k,"tooltip",L,A,p,D)},{label:c,fallbackLabel:l,value:this.getAxisValueText(k,"tooltip",I,A,l,D)},{label:g,fallbackLabel:u,value:this.getAxisValueText(k,"tooltip",N,A,u,D)},{label:S,fallbackLabel:f,value:this.getAxisValueText(k,"tooltip",R,A,f,D)}];return this.formatTooltipWithContext(v,{heading:this.getAxisValueText(x,"tooltip",M,A,a,D),title:D??r,symbol:this.legendItemSymbol(),data:_},{seriesId:t,datum:A,title:r,xKey:a,xName:n,yName:r,medianKey:l,medianName:c,q1Key:p,q1Name:d,q3Key:u,q3Name:g,minKey:y,minName:m,maxKey:f,maxName:S,...P})}animateEmptyUpdateReady({datumSelection:e}){const t=this.isVertical(),{from:i,to:o}=dy(t);Al.resetMotion([e],uy(t)),Al.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[e],i,o,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}getItemStyle(e,t,i){const{id:o,properties:s}=this,{xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:p,itemStyler:d}=s,u=this.getHighlightStyle(t,e,i);let g=Ba(u,s.getStyle());if(d!=null&&e!=null){const v=this.cachedDatumCallback(Ty(e,t?"highlight":"node"),()=>{const x=this.processedData?.dataSources.get(o)?.[e],k=this.ctx.highlightManager?.getActiveHighlight(),A=this.getHighlightStateString(k,t,e);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(d,{seriesId:o,datum:x,xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:p,highlighted:t,highlightState:A,...g}))});v&&(g=Ba(v,g))}const{stroke:y,strokeWidth:m,strokeOpacity:f,lineDash:S,lineDashOffset:D}=g;return g.whisker=Ba(g.whisker,{stroke:y,strokeWidth:m,strokeOpacity:f,lineDash:S,lineDashOffset:D}),g}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o.datumIndex,t)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const o=this.isVertical(),s=this.ctx.highlightManager.getActiveHighlight(),a=this.getShapeFillBBox();e.each((n,r)=>{const l=r.style??i.styles[this.getHighlightState(s,t,r.datumIndex)];Ey(n,l.fill,a),n.fill=l.fill,n.fillOpacity=l.fillOpacity,n.stroke=l.stroke,n.strokeWidth=l.strokeWidth,n.strokeOpacity=l.strokeOpacity,n.lineDash=l.lineDash,n.lineDashOffset=l.lineDashOffset,n.wickStroke=l.whisker.stroke,n.wickStrokeWidth=l.whisker.strokeWidth,n.wickStrokeOpacity=l.whisker.strokeOpacity,n.wickLineDash=l.whisker.lineDash,n.wickLineDashOffset=l.whisker.lineDashOffset,n.cornerRadius=l.cornerRadius,n.crisp=!0,n.horizontal=!o,n.center=r.scaledValues.xValue,n.thickness=r.bandwidth,n.min=r.scaledValues.minValue,n.q1=r.scaledValues.q1Value,n.median=r.scaledValues.medianValue,n.q3=r.scaledValues.q3Value,n.max=r.scaledValues.maxValue,n.capLengthRatio=l.cap.lengthRatio,n.strokeAlignment=(i.styles[Ry.None].strokeWidth??0)/2})}updateLabelNodes(){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}nodeFactory(){return new Fe}computeFocusBounds({datumIndex:e}){return Ny(this,this.contextNodeData?.nodeData[e].focusRect)}hasItemStylers(){return this.properties.itemStyler!=null}};Jo.className="BoxPlotSeries",Jo.type="box-plot";import{_ModuleSupport as Fy}from"ag-charts-community";import{boolean as By,constant as Gy,required as pi,shapeSegmentation as Vy,string as ot}from"ag-charts-core";var{boxPlotSeriesThemeableOptionsDef:Ky,commonSeriesOptionsDefs:zy}=Fy,Wy={...zy,...Ky,type:pi(Gy("box-plot")),xKey:pi(ot),minKey:pi(ot),q1Key:pi(ot),medianKey:pi(ot),q3Key:pi(ot),maxKey:pi(ot),xName:ot,yName:ot,minName:ot,q1Name:ot,medianName:ot,q3Name:ot,maxName:ot,grouped:By,legendItemName:ot,segmentation:Vy};import{_ModuleSupport as $y}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Ml},multiSeriesHighlightStyle:Hy,FILL_GRADIENT_LINEAR_DEFAULTS:Xy,FILL_IMAGE_DEFAULTS:Yy,FILL_PATTERN_DEFAULTS:Uy,SAFE_FILL_OPERATION:qy,SEGMENTATION_DEFAULTS:jy}=$y,Jy={series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fill"},{$mix:[qy,{$ref:"chartBackgroundColor"},.7]}]},["gradient",Xy],["image",Yy],["pattern",Uy]]},stroke:{$palette:"stroke"},strokeWidth:2,fillOpacity:1,strokeOpacity:1,lineDash:void 0,lineDashOffset:0,highlight:Hy(),segmentation:jy},axes:{[Ml.NUMBER]:{crosshair:{snap:!1}},[Ml.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},rT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:e=>new Jo(e),predictAxis:Sl.predictCartesianTimeAxis,defaultAxes:Sl.DIRECTION_SWAP_AXES,themeTemplate:Jy,groupable:!0},Ga={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:Wy,create:e=>new Jo(e)};import{_ModuleSupport as Zy}from"ag-charts-community";import{_ModuleSupport as Qy}from"ag-charts-community";import{_ModuleSupport as Va}from"ag-charts-community";import{Logger as Il}from"ag-charts-core";import{_ModuleSupport as em}from"ag-charts-community";var{AGGREGATION_SPAN:Ll,AGGREGATION_INDEX_X_MAX:tm,AGGREGATION_INDEX_X_MIN:im,AGGREGATION_INDEX_Y_MAX:om,AGGREGATION_INDEX_Y_MIN:sm,aggregationDomain:am,aggregationRangeFittingPoints:nm,compactAggregationIndices:rm,createAggregationIndices:lm}=em,cm=1e3,Nl=im,hm=om,pm=sm,Tl=tm;function dm(e,t,i,o,s,a){if(t.length<cm)return;const[n,r]=am(e,s);let l=nm(t,n,r,{smallestKeyInterval:a}),{indexData:c,valueData:p}=lm(t,i,o,n,r,l);const d=[{maxRange:l,indexData:c}];for(;l>64;)({indexData:c,valueData:p,maxRange:l}=rm(c,p,l)),d.push({maxRange:l,indexData:c});return d.reverse(),d}var{fixNumericExtent:um,keyProperty:gm,createDatumId:Rl,SeriesNodePickMode:Cl,ChartAxisDirection:Pl,SMALLEST_KEY_INTERVAL:ym,valueProperty:Zo,diff:mm,animationValidation:fm,computeBarFocusBounds:Sm,visibleRangeIndices:_l,BandScale:xm,processedDataIsAnimatable:bm,mergeDefaults:El,simpleMemorize2:vm,getItemStylesPerItemId:Dm}=Va,km=vm(dm),Am=class extends Va.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.openKey=o.properties.openKey,this.closeKey=o.properties.closeKey,this.highKey=o.properties.highKey,this.lowKey=o.properties.lowKey}},wl=class extends Va.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Cl.AXIS_ALIGNED,Cl.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},propertyNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=Am,this.dataAggregationFilters=void 0}async processData(e){if(!this.visible)return;const{xKey:t,openKey:i,closeKey:o,highKey:s,lowKey:a}=this.properties,n=!this.ctx.animationManager.isSkipped(),r=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:p,yScaleType:d}=this.getScaleInformation({xScale:r,yScale:l}),u=[];n&&(this.processedData&&u.push(mm(this.id,this.processedData)),u.push(fm())),i&&u.push(Zo(i,d,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:g,processedData:y}=await this.requestDataModel(e,this.data,{props:[gm(t,p,{id:"xValue"}),Zo(o,d,{id:"closeValue"}),Zo(s,d,{id:"highValue"}),Zo(a,d,{id:"lowValue"}),...c?[ym]:[],...u]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(g,y),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||bm(t))return;const i=this.axes[Pl.X];if(i==null)return;const o=e.resolveKeysById(this,"xValue",t),s=e.resolveColumnById(this,"highValue",t),a=e.resolveColumnById(this,"lowValue",t),{index:n}=e.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[n];return km(i.scale.type,o,s,a,r,t.reduced?.smallestKeyInterval)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[s];return a.type==="key"&&a.valueType==="category"?n:this.padBandExtent(n)}const o=this.domainForClippedRange(e,["highValue","lowValue"],"xValue");return um(o)}getSeriesRange(e,t){return this.domainForVisibleRange(Pl.Y,["highValue","lowValue"],"xValue",t)}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",["highValue","lowValue"],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["highValue","lowValue"],e,t,i)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&i&&o&&s))return;const a=[],{xKey:n,highKey:r,lowKey:l}=this.properties,c=i.dataSources.get(this.id)??[],p=t.resolveKeysById(this,"xValue",i),d=t.resolveColumnById(this,"openValue",i),u=t.resolveColumnById(this,"closeValue",i),g=t.resolveColumnById(this,"highValue",i),y=t.resolveColumnById(this,"lowValue",i),{groupScale:m}=this,{barWidth:f,groupIndex:S}=this.updateGroupScale(o),D=m.convert(String(S)),v=f>=1?f:m.rawBandwidth,x=xm.is(o.scale),k={itemId:n,nodeData:a,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:Dm(this.getItemStyle.bind(this),"up","down")};if(!e)return k;const A=(_,T,O,E,C,w,F,B)=>{const V=c[_],G=x?F/2:0,K=o.scale.convert(T)+D+G,W=s.scale.convert(O),z=s.scale.convert(E),$=s.scale.convert(C),Y=s.scale.convert(w),oe=E>O,ae=oe?"up":"down",q=Math.min($,Y),j=Math.max($,Y)-q,Z={x:K,y:q+j/2};a.push({series:this,itemId:ae,datum:V,datumIndex:_,xKey:n,xValue:T,openValue:O,closeValue:E,highValue:C,lowValue:w,midPoint:Z,aggregatedValue:E,isRising:oe,centerX:K,width:F,y:q,height:j,yOpen:W,yClose:z,crisp:B})},{dataAggregationFilters:M}=this,b=o.scale,[L,I]=b.range,N=Math.abs(I-L),R=_=>b.convert(p[_])+D,P=M?.find(_=>_.maxRange>N);if(P==null){const _=i.invalidData?.get(this.id);let[T,O]=_l(1,c.length,o.range,E=>{const C=x?0:-v/2,w=R(E)+C;return[w,w+v]});i.input.count<1e3&&(T=0,O=i.input.count);for(let E=T;E<O;E+=1){if(_?.[E]===!0)continue;const C=p[E];if(C==null)continue;const w=d[E],F=u[E],B=g[E],V=y[E],G=V!=null&&V<=w&&V<=F,K=B!=null&&B>=w&&B>=F;if(!G){Il.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!K){Il.warnOnce(`invalid high value for key [${r}] in data element, high value cannot be lower than datum open or close values.`);continue}A(E,C,w,F,B,V,v,!0)}}else{const{maxRange:_,indexData:T}=P,[O,E]=_l(1,_,o.range,C=>{const w=C*Ll,F=T[w+Nl],B=T[w+Tl];if(F===-1)return;const V=x?0:-v/2;return[R(F)+V,R(B)+V+v]});for(let C=O;C<E;C+=1){const w=C*Ll,F=T[w+Nl],B=T[w+Tl],V=T[w+hm],G=T[w+pm];if(F===-1)continue;const K=(F+B)/2|0,W=p[K];if(W==null)continue;const z=d[F],$=u[B],Y=g[V],oe=y[G],ae=Math.abs(R(B)-R(F))+v;A(K,W,z,$,Y,oe,ae,!1)}}return k}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}updateLabelNodes(e){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}getItemStyle(e,t,i,o="up"){const{id:s,properties:a,dataModel:n,processedData:r}=this,{itemStyler:l}=a,c=this.getHighlightStyle(t,e,i);let d=El(c,a.getStyle(o));if(l&&n!=null&&r!=null&&e!=null){const u=r.dataSources.get(s)?.[e],g=n.resolveKeysById(this,"xValue",r)[e],{xKey:y,openKey:m,closeKey:f,highKey:S,lowKey:D}=a,v=this.ctx.highlightManager?.getActiveHighlight(),x=this.cachedDatumCallback(Rl(Rl(g),t?"highlight":"node"),()=>{const k=this.getHighlightStateString(v,t,e);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`,"item",o],this.callWithContext(l,{seriesId:s,datum:u,itemId:o,xKey:y,openKey:m,closeKey:f,highKey:S,lowKey:D,highlighted:t,highlightState:k,...d}))});x&&(d=El(x,d))}return d}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yName:r,openKey:l,openName:c,highKey:p,highName:d,lowKey:u,lowName:g,closeKey:y,closeName:m,legendItemName:f,tooltip:S}=s,D=this.getCategoryAxis(),v=this.getValueAxis();if(!i||!o||!D||!v)return;const x=o.dataSources.get(this.id)?.[e],k=i.resolveKeysById(this,"xValue",o)[e],A=i.resolveColumnById(this,"openValue",o)[e],M=i.resolveColumnById(this,"highValue",o)[e],b=i.resolveColumnById(this,"lowValue",o)[e],L=i.resolveColumnById(this,"closeValue",o)[e];if(k==null)return;const I=L>=A?"up":"down",N=this.properties.item[I],R=this.getItemStyle(e,!1),P={fill:N.fill??N.stroke,fillOpacity:N.fillOpacity??N.strokeOpacity??1,stroke:N.stroke,strokeWidth:N.strokeWidth??1,strokeOpacity:N.strokeOpacity??1,lineDash:N.lineDash??[0],lineDashOffset:N.lineDashOffset??0};return this.formatTooltipWithContext(S,{heading:this.getAxisValueText(D,"tooltip",k,x,a,f),title:f,symbol:{marker:P},data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(v,"tooltip",A,x,l,f)},{label:d,fallbackLabel:p,value:this.getAxisValueText(v,"tooltip",M,x,p,f)},{label:g,fallbackLabel:u,value:this.getAxisValueText(v,"tooltip",b,x,u,f)},{label:m,fallbackLabel:y,value:this.getAxisValueText(v,"tooltip",L,x,y,f)}]},{seriesId:t,datum:x,title:r,itemId:I,xKey:a,xName:n,yName:r,openKey:l,openName:c,highKey:p,highName:d,lowKey:u,lowName:g,closeKey:y,closeName:m,...R})}computeFocusBounds(e){const t=this.getNodeData()?.at(e.datumIndex);if(t==null)return;const{centerX:i,y:o,width:s,height:a}=t,n={x:i-s/2,y:o,width:s,height:a};return Sm(this,n)}};import{_ModuleSupport as Mm}from"ag-charts-community";import{_ModuleSupport as Im}from"ag-charts-community";var{Path:Lm,SceneChangeDetection:di,BBox:Nm}=Im,Gt=class extends Lm{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1}computeBBox(){const{centerX:e,y:t,width:i,height:o}=this;return new Nm(e-i/2,t,i,o)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:e,width:t,height:i,crisp:o}=this;let{centerX:s,yOpen:a,yClose:n}=this,r=s-t/2,l=s+t/2,c=e,p=e+i;if(o&&t>1){s=this.align(s),a<=n?(a=this.align(a),n=a+this.align(a,n-a)):(a=n+this.align(n,a-n),n=this.align(n));const d=this.align(t/2);r=s-d,l=s+d,c=this.align(e),p=c+this.align(c,i)}return{centerX:s,x0:r,x1:l,y0:c,y1:p,yOpen:a,yClose:n}}executeStroke(e,t){const{width:i,strokeWidth:o}=this;i<o&&(e.lineWidth=i),super.executeStroke(e,t)}};h([di()],Gt.prototype,"centerX",2),h([di()],Gt.prototype,"y",2),h([di()],Gt.prototype,"width",2),h([di()],Gt.prototype,"height",2),h([di()],Gt.prototype,"yOpen",2),h([di()],Gt.prototype,"yClose",2),h([di()],Gt.prototype,"crisp",2);var Tm=class extends Gt{updatePath(){const{path:e}=this,{centerX:t,x0:i,x1:o,y0:s,y1:a,yOpen:n,yClose:r}=this.alignedCoordinates();e.clear(),e.moveTo(t,s),e.lineTo(t,a),Math.abs(o-i)>1&&(e.moveTo(i,n),e.lineTo(t,n),e.moveTo(t,r),e.lineTo(o,r))}},{SceneArrayChangeDetection:Rm,SceneChangeDetection:Qo,ExtendedPath2D:Cm,BBox:Pm}=Mm,Fi=class extends Gt{constructor(){super(...arguments),this.wickPath=new Cm,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}computeDefaultGradientFillBBox(){const{width:e,centerX:t,yOpen:i,yClose:o}=this,s=Math.min(i,o),n=Math.max(i,o)-s,r=t-e/2,l=t+e/2;return new Pm(r,s,l-r,n)}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,wickStroke:n,wickStrokeWidth:r,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:p}=this,{centerX:d,x0:u,x1:g,y0:y,y1:m,yOpen:f,yClose:S}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const v=n!=null&&n!==t||r!=null&&r!==i||l!=null&&l!==o||c!=null&&c!==s||p!=null&&p!==a?this.wickPath:e;if(Math.abs(g-u)<=3){v.moveTo(d,y),v.lineTo(d,m);return}const x=Math.min(f,S),k=Math.max(f,S),A=i/2;v.moveTo(d,y),v.lineTo(d,x+A),v.moveTo(d,m),v.lineTo(d,k-A);const M=k-x-2*A;if(M>0)e.rect(u+A,x+A,g-u-2*A,M);else{const b=(x+k)/2;e.moveTo(u,b),e.lineTo(g,b)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,wickStroke:r=i,wickStrokeWidth:l=o,wickStrokeOpacity:c=s,wickLineDash:p=a,wickLineDashOffset:d=n}=this;l!==0&&(e.globalAlpha*=c,typeof r=="string"&&(e.strokeStyle=r),e.lineWidth=l,p!=null&&e.setLineDash([...p]),e.lineDashOffset=d,e.stroke(t.getPath2D()))}};h([Qo()],Fi.prototype,"wickStroke",2),h([Qo()],Fi.prototype,"wickStrokeWidth",2),h([Qo()],Fi.prototype,"wickStrokeOpacity",2),h([Rm()],Fi.prototype,"wickLineDash",2),h([Qo()],Fi.prototype,"wickLineDashOffset",2);import{_ModuleSupport as _m}from"ag-charts-community";import{_ModuleSupport as Em}from"ag-charts-community";var{BaseProperties:Ol,Property:Me,AbstractBarSeriesProperties:wm,makeSeriesTooltip:Om}=Em,ui=class extends Ol{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([Me],ui.prototype,"stroke",2),h([Me],ui.prototype,"strokeWidth",2),h([Me],ui.prototype,"strokeOpacity",2),h([Me],ui.prototype,"lineDash",2),h([Me],ui.prototype,"lineDashOffset",2);var Ka=class extends Ol{constructor(){super(...arguments),this.up=new ui,this.down=new ui}};h([Me],Ka.prototype,"up",2),h([Me],Ka.prototype,"down",2);var at=class extends wm{};h([Me],at.prototype,"xKey",2),h([Me],at.prototype,"openKey",2),h([Me],at.prototype,"closeKey",2),h([Me],at.prototype,"highKey",2),h([Me],at.prototype,"lowKey",2),h([Me],at.prototype,"xName",2),h([Me],at.prototype,"yName",2),h([Me],at.prototype,"openName",2),h([Me],at.prototype,"closeName",2),h([Me],at.prototype,"highName",2),h([Me],at.prototype,"lowName",2);var es=class extends at{constructor(){super(...arguments),this.tooltip=Om(),this.item=new Ka}getStyle(e){const{strokeWidth:t,strokeOpacity:i,stroke:o,lineDash:s,lineDashOffset:a}=this.item[e];return{stroke:o,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:a,opacity:1}}};h([Me],es.prototype,"tooltip",2),h([Me],es.prototype,"item",2),h([Me],es.prototype,"itemStyler",2);var{BaseProperties:za,makeSeriesTooltip:Fm,Property:_e}=_m,Bi=class extends za{};h([_e],Bi.prototype,"stroke",2),h([_e],Bi.prototype,"strokeWidth",2),h([_e],Bi.prototype,"strokeOpacity",2),h([_e],Bi.prototype,"lineDash",2),h([_e],Bi.prototype,"lineDashOffset",2);var bt=class extends za{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Bi}};h([_e],bt.prototype,"fill",2),h([_e],bt.prototype,"fillOpacity",2),h([_e],bt.prototype,"stroke",2),h([_e],bt.prototype,"strokeWidth",2),h([_e],bt.prototype,"strokeOpacity",2),h([_e],bt.prototype,"lineDash",2),h([_e],bt.prototype,"lineDashOffset",2),h([_e],bt.prototype,"cornerRadius",2),h([_e],bt.prototype,"wick",2);var Wa=class extends za{constructor(){super(...arguments),this.up=new bt,this.down=new bt}};h([_e],Wa.prototype,"up",2),h([_e],Wa.prototype,"down",2);var ts=class extends at{constructor(){super(),this.item=new Wa,this.tooltip=Fm(),this.highlightStyle.deprecated=!1}getStyle(e){const{fill:t,fillOpacity:i,strokeWidth:o,strokeOpacity:s,stroke:a,lineDash:n,lineDashOffset:r,cornerRadius:l,wick:c}=this.item[e];return{fill:t,fillOpacity:i,stroke:a,strokeWidth:o,strokeOpacity:s,lineDash:n,lineDashOffset:r,cornerRadius:l,opacity:1,wick:c}}};h([_e],ts.prototype,"item",2),h([_e],ts.prototype,"tooltip",2),h([_e],ts.prototype,"itemStyler",2);var{isGradientFill:Fl,isPatternFill:$a,isImageFill:Ha,applyShapeStyle:Bm}=Qy,is=class extends wl{constructor(){super(...arguments),this.properties=new ts}nodeFactory(){const e=new Fi;return e.lineCap="butt",e}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o.datumIndex,t,void 0,o.itemId)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const o=this.ctx.highlightManager.getActiveHighlight();e.each((s,a)=>{const{centerX:n,width:r,y:l,height:c,yOpen:p,yClose:d,crisp:u}=a,g=a.style??i.styles[a.itemId][this.getHighlightState(o,t,a.datumIndex)];s.centerX=n,s.width=r,s.y=l,s.height=c,s.yOpen=p,s.yClose=d,s.crisp=u,Bm(s,g,this.getShapeFillBBox());const y=g?.wick;s.wickStroke=y?.stroke,s.wickStrokeWidth=y?.strokeWidth,s.wickStrokeOpacity=y?.strokeOpacity,s.wickLineDash=y?.lineDash,s.wickLineDashOffset=y?.lineDashOffset})}legendItemSymbol(){const{up:e,down:t}=this.properties.item,i=Fl(e.fill)?e.fill.colorStops.map(n=>typeof n=="string"?n:{color:n.color,stop:n.stop!=null?n.stop*.5:void 0}):[{color:$a(e.fill)||Ha(e.fill)?e.stroke:e.fill,stop:0},{color:$a(e.fill)||Ha(e.fill)?e.stroke:e.fill,stop:.5}],o=Fl(t.fill)?t.fill.colorStops.map(n=>typeof n=="string"?n:{color:n.color,stop:n.stop!=null?n.stop*.5:void 0}):[{color:$a(t.fill)||Ha(t.fill)?t.stroke:t.fill,stop:.5}],s={type:"gradient",gradient:"linear",rotation:90,colorStops:[...i,...o],reverse:!1},a={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:e.stroke,stop:0},{color:e.stroke,stop:.5},{color:t.stroke,stop:.5}],reverse:!1};return{marker:{fill:s,fillOpacity:e.fillOpacity,stroke:a,strokeWidth:e.strokeWidth??1,strokeOpacity:e.strokeOpacity??1,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset}}}getLegendData(e){const{id:t,data:i,visible:o,ctx:{legendManager:s}}=this,{xKey:a,yName:n,showInLegend:r,legendItemName:l}=this.properties;return!i?.length||!a||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:o&&s.getItemEnabled({seriesId:t,itemId:t}),label:{text:l??n??t},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!r}]}hasItemStylers(){return this.properties.itemStyler!=null}};is.className="CandleStickSeries",is.type="candlestick";import{_ModuleSupport as Gm}from"ag-charts-community";import{boolean as Vm,constant as Km,number as zm,required as Gi,string as vt,undocumented as Bl}from"ag-charts-core";var{commonSeriesOptionsDefs:Wm,candlestickSeriesThemeableOptionsDef:$m}=Gm,Xa={...Wm,...$m,type:Gi(Km("candlestick")),xKey:Gi(vt),openKey:Gi(vt),highKey:Gi(vt),lowKey:Gi(vt),closeKey:Gi(vt),xName:vt,yName:vt,openName:vt,highName:vt,lowName:vt,closeName:vt};Xa.pickOutsideVisibleMinorAxis=Bl(Vm),Xa.focusPriority=Bl(zm);import{_ModuleSupport as Hm}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Gl},multiSeriesHighlightStyle:Xm,FILL_GRADIENT_LINEAR_SHADED_DEFAULTS:Ym,FILL_IMAGE_DEFAULTS:Um,FILL_PATTERN_DEFAULTS:qm}=Hm;function Vl(e){return{fill:{$applySwitch:[{$path:"type"},{$if:[{$eq:[{$palette:"type"},"user-indexed"]},e==="up"?"transparent":{$palette:"fill"},{$palette:`${e}.fill`}]},["gradient",Ym(e)],["image",Um],["pattern",qm]]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${e}.stroke`}]}}}var jm={series:{item:{up:Vl("up"),down:Vl("down")},highlightStyle:{item:{strokeWidth:3}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Xm()},animation:{enabled:!1},axes:{[Gl.NUMBER]:{crosshair:{snap:!1}},[Gl.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:Kl,CARTESIAN_POSITION:zl}=Zy.ThemeConstants,bT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:e=>new is(e),defaultAxes:[{type:Kl.NUMBER,position:zl.LEFT},{type:Kl.ORDINAL_TIME,position:zl.BOTTOM}],themeTemplate:jm,groupable:!1},Ya={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:Xa,create:e=>new is(e)};import{_ModuleSupport as Jm}from"ag-charts-community";import{_ModuleSupport as os}from"ag-charts-community";import{Logger as Zm}from"ag-charts-core";import{Logger as Qm,cachedTextMeasurer as ss,findMaxValue as Wl,wrapLines as $l}from"ag-charts-core";function ef(e,t){const{fontSize:i,minimumFontSize:o=i}=e,{fontSize:s,minimumFontSize:a=s}=t,n=i-o,r=s-a;let l=e.fontSize,c=t.fontSize;const p=[{labelFontSize:i,secondaryLabelFontSize:s}];for(;l>o||c>a;){const d=n>0?(l-o)/n:-1,u=r>0?(c-a)/r:-1;d>u?l--:c--,p.push({labelFontSize:l,secondaryLabelFontSize:c})}return p.reverse(),p}function Hl(e,t,i,o,{padding:s},a){const{spacing:n=0}=t,r=2*s,l=2*s+n,c=(t.minimumFontSize??t.fontSize)+(o.minimumFontSize??o.fontSize);if(c>a(c+l,!1).height-l)return;const p=ef(t,o),d={fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight},u={fontFamily:o.fontFamily,fontStyle:o.fontStyle,fontWeight:o.fontWeight};let g,y;return Wl(0,p.length-1,m=>{const{labelFontSize:f,secondaryLabelFontSize:S}=p[m],D=m===0,v={...d,fontSize:f},x={...u,fontSize:S},k=ss(v).lineHeight(),A=ss(x).lineHeight(),M=a(k+A+l,D),b=M.width-r,L=M.height-l;if(k+A>L||((g==null||g.fontSize!==f)&&(g=Yl(t,e,b,L,v,t.wrapping,D?t.overflowStrategy:"hide")),g==null||g.width>b||g.height>L)||((y==null||y.fontSize!==S)&&(y=Yl(o,i,b,L,x,o.wrapping,D?o.overflowStrategy:"hide")),y==null))return;const I=g.height+y.height;if(!(y.width>b||I>L))return{width:Math.max(g.width,y.width),height:I+n,meta:M.meta,label:g,secondaryLabel:y}})}function mo(e,t,{padding:i},o){const s=2*i,a=Math.min(t.minimumFontSize??t.fontSize,t.fontSize),n={fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return Wl(a,t.fontSize,r=>{const l={...n,fontSize:r},c=ss(l),p=r===a,d=t.lineHeight??c.lineHeight(),u=o(d+s,p),g=u.width-s,y=u.height-s;if(d>y||g<0)return;const m=$l(e,{maxWidth:g,maxHeight:y,font:l,textWrap:t.wrapping,overflow:(p?t.overflowStrategy:null)??"hide"});if(!m.length)return;const{width:f,height:S}=c.measureLines(m),D=m.join(`
`);return[{width:f,height:S,text:D,fontSize:r,lineHeight:d},u.meta]})}function Xl(e){return e?.minimumFontSize!=null&&e?.fontSize!=null&&e?.minimumFontSize>e?.fontSize}function Ua(e,t,i,o,s,a){const n=t.enabled?e:void 0,r=o.enabled?i:void 0;(Xl(t)||Xl(o))&&Qm.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;n!=null&&r!=null&&(l=Hl(n,t,r,o,s,a));let c;if(l==null&&n!=null&&(c=mo(n,t,s,a)),c!=null){const[d,u]=c;l={width:d.width,height:d.height,meta:u,label:d,secondaryLabel:void 0}}let p;if(l==null&&n==null&&r!=null&&(p=mo(r,o,s,a)),p!=null){const[d,u]=p;l={width:d.width,height:d.height,meta:u,label:void 0,secondaryLabel:d}}return l}function Yl(e,t,i,o,s,a,n){const r=$l(t,{maxWidth:i,maxHeight:o,font:s,textWrap:a,overflow:n});if(!r.length)return;const l=ss(s),c=e.lineHeight??l.lineHeight(),{width:p}=l.measureLines(r);return{width:p,lineHeight:c,text:r.join(`
`),height:r.length*c,fontSize:s.fontSize}}import{_ModuleSupport as tf}from"ag-charts-community";import{_ModuleSupport as Ul}from"ag-charts-community";var{Property:fo}=Ul,Vi=class extends Ul.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};h([fo],Vi.prototype,"wrapping",2),h([fo],Vi.prototype,"overflowStrategy",2),h([fo],Vi.prototype,"lineHeight",2),h([fo],Vi.prototype,"minimumFontSize",2);var Rt=class extends Vi{constructor(){super(...arguments),this.spacing=0}};h([fo],Rt.prototype,"spacing",2);var So=class extends Vi{},{CartesianSeriesProperties:of,makeSeriesTooltip:sf,Property:ze}=tf,Be=class extends of{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Rt,this.tooltip=sf()}};h([ze],Be.prototype,"title",2),h([ze],Be.prototype,"xKey",2),h([ze],Be.prototype,"yKey",2),h([ze],Be.prototype,"colorKey",2),h([ze],Be.prototype,"xName",2),h([ze],Be.prototype,"yName",2),h([ze],Be.prototype,"colorName",2),h([ze],Be.prototype,"colorRange",2),h([ze],Be.prototype,"stroke",2),h([ze],Be.prototype,"strokeOpacity",2),h([ze],Be.prototype,"strokeWidth",2),h([ze],Be.prototype,"textAlign",2),h([ze],Be.prototype,"verticalAlign",2),h([ze],Be.prototype,"itemPadding",2),h([ze],Be.prototype,"itemStyler",2),h([ze],Be.prototype,"label",2),h([ze],Be.prototype,"tooltip",2);var{SeriesNodePickMode:ql,computeBarFocusBounds:af,getMissCount:nf,valueProperty:qa,ChartAxisDirection:dt,DEFAULT_CARTESIAN_DIRECTION_KEYS:rf,DEFAULT_CARTESIAN_DIRECTION_NAMES:lf,createDatumId:cf,ColorScale:hf,Rect:pf,PointerEvents:df,applyShapeStyle:uf,mergeDefaults:jl,formatValue:gf,addHitTestersToQuadtree:yf,findQuadtreeMatch:Jl,updateLabelNode:mf}=os,ff=class extends os.CartesianSeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.colorKey=o.properties.colorKey}},Sf={left:-.5,center:0,right:-.5},xf={top:-.5,middle:0,bottom:-.5},as=class extends os.CartesianSeries{constructor(e){super({moduleCtx:e,propertyKeys:{...rf,color:["colorKey"]},propertyNames:{...lf,color:["colorName"]},categoryKey:void 0,pickModes:[ql.NEAREST_NODE,ql.EXACT_SHAPE_MATCH],pathsPerSeries:[]}),this.properties=new Be,this.NodeEvent=ff,this.colorScale=new hf}async processData(e){const t=this.axes[dt.X],i=this.axes[dt.Y];if(!t||!i||!this.data?.length)return;const{xKey:o,yKey:s,colorRange:a,colorKey:n}=this.properties,r=this.axes[dt.X]?.scale,l=this.axes[dt.Y]?.scale,{xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:r,yScale:l}),d=this.colorScale.type,{dataModel:u,processedData:g}=await this.requestDataModel(e,this.data,{props:[qa(o,c,{id:"xValue"}),qa(s,p,{id:"yValue"}),...n?[qa(n,d,{id:"colorValue",invalidValue:void 0})]:[]]});if(this.isColorScaleValid()){const y=u.resolveProcessedDataIndexById(this,"colorValue"),m=g.domain.values[y].filter(S=>S!=null),f=os.extent(m);if(this.colorScale.domain=f??[],f?.length&&f[0]===f[1]){const S=Math.floor(a.length/2);this.colorScale.range=[a[S],a[S]]}else this.colorScale.range=a;this.colorScale.update()}}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=nf(this,i.defs.values[o].missing),n=t.resolveProcessedDataIndexById(this,"colorValue"),r=i.domain.values[n].filter(c=>c!=null).length;return!(s===0||s===a||r===0)}xCoordinateRange(e,t){const i=this.axes[dt.X].scale,o=t*(i.bandwidth??0)/2,s=i.convert(e)+o,a=t*(i.bandwidth??10);return[s,s+a]}yCoordinateRange(e,t){const i=this.axes[dt.Y].scale,o=t*(i.bandwidth??0)/2,s=i.convert(e[0])+o,a=t*(i.bandwidth??10);return[s,s+a]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return!t||!i?[]:e===dt.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i)}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,visible:t,axes:i,dataModel:o,processedData:s}=this,a=i[dt.X],n=i[dt.Y];if(!(e&&o&&s&&t&&a&&n))return;if(a.type!=="category"||n.type!=="category"){Zm.warnOnce(`Heatmap series expected axes to have "category" type, but received "${a.type}" and "${n.type}" instead.`);return}const{xKey:r,xName:l,yKey:c,yName:p,colorKey:d,colorName:u,textAlign:g,verticalAlign:y,itemPadding:m,label:f}=this.properties,S=o.resolveColumnById(this,"xValue",s),D=o.resolveColumnById(this,"yValue",s),v=d?o.resolveColumnById(this,"colorValue",s):void 0,x=d?o.getDomain(this,"colorValue","value",s):[],k=a.scale,A=n.scale,M=(k.bandwidth??0)/2,b=(A.bandwidth??0)/2,L=[],I=[],N=k.bandwidth??10,R=A.bandwidth??10,P=(N-2*m)*Sf[g],_=(R-2*m)*xf[y],T=()=>({width:N,height:R,meta:null});return(s.dataSources.get(this.id)??[]).forEach((E,C)=>{const w=S[C],F=D[C],B=k.convert(w)+M,V=A.convert(F)+b,G=v?.[C],K=f.enabled&&G!=null?this.getLabelText(G,E,d,"color",x,f,{value:G,datum:E,colorKey:d,colorName:u,xKey:r,yKey:c,xName:l,yName:p}):void 0,W=Ua(K,this.properties.label,void 0,this.properties.label,{padding:m},T),z={x:B,y:V,size:0},$=this.getItemStyle({datumIndex:C,datum:E,colorValue:G},!1);if(L.push({series:this,itemId:c,datumIndex:C,yKey:c,xKey:r,xValue:w,yValue:F,colorValue:G,datum:E,point:z,width:N,height:R,midPoint:{x:B,y:V},missing:v!=null&&G==null,style:$}),W?.label!=null){const{text:Y,fontSize:oe,lineHeight:ae,height:q}=W.label,{fontStyle:j,fontFamily:Z,fontWeight:he,color:ie}=this.properties.label,J=z.x+P*(N-2*m),pe=z.y+_*(R-2*m)-(W.height-q)*.5;I.push({series:this,itemId:c,datum:E,datumIndex:C,text:Y,fontSize:oe,lineHeight:ae,fontStyle:j,fontFamily:Z,fontWeight:he,color:ie,textAlign:g,textBaseline:y,x:J,y:pe,style:$})}}),{itemId:this.properties.yKey??this.id,nodeData:L,labelData:I,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new pf}update(e){return this.ctx.animationManager.skipCurrentBatch(),super.update(e)}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,o=t??[];return i.update(o)}getItemStyle({datumIndex:e,datum:t,colorValue:i},o){const{id:s,properties:a}=this,{xKey:n,yKey:r,itemStyler:l,stroke:c,strokeWidth:p,strokeOpacity:d}=a,u=this.getHighlightStyle(o,e),g=jl(u,{fill:this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):"transparent",fillOpacity:1,stroke:c,strokeWidth:p,strokeOpacity:d,opacity:1});let y;return l!=null&&e!=null&&(y=this.cachedDatumCallback(cf(e,o?"highlight":"node"),()=>{const m=this.ctx.highlightManager?.getActiveHighlight(),f=this.getHighlightStateString(m,o,e);return this.callWithContext(l,{seriesId:s,datum:t,xKey:n,yKey:r,highlighted:o,highlightState:f,...g})})),y?jl(y,g):g}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o,t)})}updateDatumNodes({datumSelection:e}){const t=this.axes[dt.X],[i,o]=t?.visibleRange??[],a=!(i!==0||o!==1);e.each((n,r)=>{const{point:l,width:c,height:p,style:d}=r;uf(n,d),n.crisp=a,n.x=Math.floor(l.x-c/2),n.y=Math.floor(l.y-p/2),n.width=Math.ceil(c),n.height=Math.ceil(p)})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e,{enabled:o}=this.properties.label,s=o?t:[];return i.update(s)}updateLabelNodes(e){const t=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((i,o)=>{i.pointerEvents=df.None,i.text=o.text,i.fillOpacity=this.getHighlightStyle(!1,o.datumIndex)?.opacity??1,mf(this,i,this.properties,this.properties.label,o,!1,t)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,axes:s,properties:a,colorScale:n,ctx:r}=this,{formatManager:l}=r,{xKey:c,xName:p,yKey:d,yName:u,colorKey:g,colorName:y,colorRange:m,title:f,legendItemName:S,tooltip:D}=a,v=s[dt.X],x=s[dt.Y];if(!i||!o||!v||!x)return;const k=o.dataSources.get(this.id)?.[e],A=i.resolveColumnById(this,"xValue",o)[e],M=i.resolveColumnById(this,"yValue",o)[e],b=g!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",o)[e]:void 0;if(A==null)return;const L=[];let I;if(b==null)I=m[0];else{I=n.convert(b);const P=i.getDomain(this,"colorValue","value",o),_=l.format(this.callWithContext.bind(this),{type:"number",value:b,datum:k,seriesId:t,legendItemName:S,key:g,source:"tooltip",property:"color",domain:P,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});L.push({label:y,fallbackLabel:g,value:_??gf(b)})}L.push({label:p,fallbackLabel:c,value:this.getAxisValueText(v,"tooltip",A,k,c,S)},{label:u,fallbackLabel:d,value:this.getAxisValueText(x,"tooltip",M,k,d,S)});const N=this.getItemStyle({datumIndex:e,datum:k,colorValue:b},!1);N.fill!=null&&(I=N.fill);const R=I!=null?{marker:{shape:"square",fill:I,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}}:void 0;return this.formatTooltipWithContext(D,{title:f??S,symbol:R,data:L},{seriesId:t,datum:k,title:f,xKey:c,xName:p,yKey:d,yName:u,colorKey:g,colorName:y,...N})}getLegendData(e){return e!=="gradient"||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,series:this.getFormatterContext("color"),colorDomain:this.colorScale.domain,colorRange:this.colorScale.range}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:e}){const t=this.contextNodeData?.nodeData[e];if(t===void 0)return;const{width:i,height:o,midPoint:s}=t,a={x:s.x-i/2,y:s.y-o/2,width:i,height:o};return af(this,a)}initQuadTree(e){yf(e,this.datumNodesIter())}pickNodesExactShape(e){const t=Jl(this,e);return t!=null&&t.distance<=0?[t.datum]:[]}pickNodeClosestDatum(e){return Jl(this,e)}hasItemStylers(){return this.properties.itemStyler!=null}};as.className="HeatmapSeries",as.type="heatmap";import{_ModuleSupport as bf}from"ag-charts-community";import{arrayOf as vf,color as Df,constant as kf,required as ja,string as Ki}from"ag-charts-core";var{commonSeriesOptionsDefs:Af,heatmapSeriesThemeableOptionsDef:Mf,without:Zl}=bf,If={...Zl(Mf,["showInLegend"]),...Zl(Af,["showInLegend"]),type:ja(kf("heatmap")),xKey:ja(Ki),yKey:ja(Ki),colorKey:Ki,xName:Ki,yName:Ki,colorName:Ki,colorRange:vf(Df)};import{_ModuleSupport as ns}from"ag-charts-community";var Lf={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$path:["/0",{$palette:"stroke"},{$palette:"strokes"}]}]},strokeWidth:{$isUserOption:["./stroke",2,void 0]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},ns.SAFE_RANGE2_OPERATION]},label:{...ns.LABEL_BOXING_DEFAULTS,enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3,highlight:ns.singleSeriesHighlightStyle()},gradientLegend:{enabled:!0,...ns.LEGEND_CONTAINER_THEME}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:Ql,CARTESIAN_POSITION:ec}}=Jm,RT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:e=>new as(e),defaultAxes:[{type:Ql.CATEGORY,position:ec.LEFT},{type:Ql.CATEGORY,position:ec.BOTTOM}],themeTemplate:Lf},Ja={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:If,create:e=>new as(e)};import{_ModuleSupport as Nf}from"ag-charts-community";import{_ModuleSupport as Tf}from"ag-charts-community";var{applyShapeStyle:Rf}=Tf,rs=class extends wl{constructor(){super(...arguments),this.properties=new es}nodeFactory(){const e=new Tm;return e.lineCap="square",e}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o.datumIndex,t,void 0,o.itemId)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const o=this.ctx.highlightManager.getActiveHighlight();e.each((s,a)=>{const{centerX:n,width:r,y:l,height:c,yOpen:p,yClose:d,crisp:u}=a;s.centerX=n,s.width=r,s.y=l,s.height=c,s.yOpen=p,s.yClose=d,s.crisp=u;const g=a.style??i.styles[a.itemId][this.getHighlightState(o,t,a.datumIndex)];Rf(s,g)})}getLegendData(e){const{id:t,data:i,ctx:{legendManager:o},visible:s}=this,{xKey:a,yName:n,item:{up:r,down:l},showInLegend:c,legendItemName:p}=this.properties;if(!i?.length||!a||e!=="category")return[];const d={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:r.stroke,stop:0},{color:r.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&o.getItemEnabled({seriesId:t,itemId:t}),label:{text:p??n??t},symbol:{marker:{fill:d,fillOpacity:r.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:p,hideInLegend:!c}]}hasItemStylers(){return this.properties.itemStyler!=null}};rs.className="ohlc",rs.type="ohlc";import{_ModuleSupport as Cf}from"ag-charts-community";import{boolean as Pf,constant as _f,number as Ef,required as zi,string as Dt,undocumented as tc}from"ag-charts-core";var{commonSeriesOptionsDefs:wf,ohlcSeriesThemeableOptionsDef:Of}=Cf,Za={...wf,...Of,type:zi(_f("ohlc")),xKey:zi(Dt),openKey:zi(Dt),highKey:zi(Dt),lowKey:zi(Dt),closeKey:zi(Dt),xName:Dt,yName:Dt,openName:Dt,highName:Dt,lowName:Dt,closeName:Dt};Za.pickOutsideVisibleMinorAxis=tc(Pf),Za.focusPriority=tc(Ef);var{ThemeConstants:{CARTESIAN_AXIS_TYPE:ls,CARTESIAN_POSITION:ic},multiSeriesHighlightStyle:Ff}=Nf,wT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:e=>new rs(e),defaultAxes:[{type:ls.NUMBER,position:ic.LEFT},{type:ls.ORDINAL_TIME,position:ic.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Ff(!1)},axes:{[ls.NUMBER]:{crosshair:{snap:!1}},[ls.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},Qa={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:Za,create:e=>new rs(e)};import{_ModuleSupport as oc}from"ag-charts-community";import{_ModuleSupport as cs}from"ag-charts-community";import{_ModuleSupport as Bf}from"ag-charts-community";var{AGGREGATION_INDEX_Y_MAX:Gf,AGGREGATION_INDEX_Y_MIN:Vf,aggregationDomain:Kf,aggregationIndexForXRatio:sc,aggregationRangeFittingPoints:zf,aggregationXRatioForXValue:ac,compactAggregationIndices:Wf,createAggregationIndices:$f}=Bf,Hf=1e3;function nc(e,t,i,o,s,a){const n=e[a];if(n==null)return!1;const r=ac(n,t,i),l=sc(r,s);return a===o[l+Gf]}function rc(e,t,i,o,s,a){const n=e[a];if(n==null)return!1;const r=ac(n,t,i),l=sc(r,s);return a===o[l+Vf]}function Xf(e,t,i,o,s){if(t.length<Hf)return;const[a,n]=Kf(e,s);let r=zf(t,a,n);const{indexData:l,valueData:c}=$f(t,i,o,a,n,r);let p=[],d=[];for(let g=0;g<t.length;g+=1)nc(t,a,n,l,r,g)&&p.push(g),rc(t,a,n,l,r,g)&&d.push(g);const u=[{maxRange:r,topIndices:p,bottomIndices:d}];for(;r>64;)({maxRange:r}=Wf(l,c,r,{inPlace:!0})),p=p.filter(nc.bind(null,t,a,n,l,r)),d=d.filter(rc.bind(null,t,a,n,l,r)),u.push({maxRange:r,topIndices:p,bottomIndices:d});return u.reverse(),u}import{_ModuleSupport as Yf}from"ag-charts-community";var{CartesianSeriesProperties:Uf,InterpolationProperties:qf,SeriesMarker:jf,makeSeriesTooltip:Jf,Property:Se,DropShadow:Zf,Label:Qf}=Yf,en=class extends Qf{constructor(){super(...arguments),this.placement="outside",this.spacing=0}};h([Se],en.prototype,"placement",2),h([Se],en.prototype,"spacing",2);var De=class extends Uf{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new qf,this.shadow=new Zf().set({enabled:!1}),this.marker=new jf,this.label=new en,this.tooltip=Jf(),this.connectMissingData=!1}};h([Se],De.prototype,"xKey",2),h([Se],De.prototype,"yLowKey",2),h([Se],De.prototype,"yHighKey",2),h([Se],De.prototype,"xName",2),h([Se],De.prototype,"yName",2),h([Se],De.prototype,"yLowName",2),h([Se],De.prototype,"yHighName",2),h([Se],De.prototype,"fill",2),h([Se],De.prototype,"fillOpacity",2),h([Se],De.prototype,"stroke",2),h([Se],De.prototype,"strokeWidth",2),h([Se],De.prototype,"strokeOpacity",2),h([Se],De.prototype,"lineDash",2),h([Se],De.prototype,"lineDashOffset",2),h([Se],De.prototype,"interpolation",2),h([Se],De.prototype,"styler",2),h([Se],De.prototype,"shadow",2),h([Se],De.prototype,"marker",2),h([Se],De.prototype,"label",2),h([Se],De.prototype,"tooltip",2),h([Se],De.prototype,"connectMissingData",2);import{_ModuleSupport as eS}from"ag-charts-community";var{CollapseMode:hs,isScaleValid:lc,pairUpSpans:ps,prepareAreaFillAnimationFns:tS,plotInterpolatedLinePathStroke:Wi,prepareLinePathPropertyAnimation:iS,areScalingEqual:cc}=eS;function oS(e,t,i,o){const s=(l,c)=>{Wi(l,c,t.removed),Wi(l,c,i.removed)},a=(l,c)=>{Wi(l,c,t.moved),Wi(l,c,i.moved)},n=(l,c)=>{Wi(l,c,t.added),Wi(l,c,i.added)},r=iS(e,o);return{status:e,path:{addPhaseFn:n,updatePhaseFn:a,removePhaseFn:s},pathProperties:r}}function sS(e,t,i){const o=e.scales.x?.type==="category",s=t.scales.x?.type==="category";if(o!==s||!lc(e.scales.x)||!lc(t.scales.x))return;let a="updated";t.visible&&!e.visible?a="removed":!t.visible&&e.visible&&(a="added");const n=ps({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},hs.Split);if(n==null)return;const r=ps({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},hs.Split);if(r==null)return;const l=ps({scales:e.scales,data:e.highStrokeData.spans},{scales:t.scales,data:t.highStrokeData.spans},hs.Split);if(l==null)return;const c=ps({scales:e.scales,data:e.lowStrokeData.spans},{scales:t.scales,data:t.lowStrokeData.spans},hs.Split);if(c==null)return;const p="fade",d=tS(a,n,r,p),u=oS(a,l,c,p),g=(i?.changed??!0)||!cc(e.scales.x,t.scales.x)||!cc(e.scales.y,t.scales.y)||a!=="updated";return{status:a,fill:d,stroke:u,hasMotion:g}}var{valueProperty:hc,keyProperty:aS,ChartAxisDirection:Ge,mergeDefaults:nS,updateLabelNode:rS,fixNumericExtent:pc,buildResetPathFn:lS,resetLabelFn:cS,resetMarkerFn:hS,resetMarkerPositionFn:dc,pathSwipeInAnimation:pS,resetMotion:dS,markerSwipeScaleInAnimation:uS,seriesLabelFadeInAnimation:tn,animationValidation:gS,diff:yS,updateClipPath:uc,computeMarkerFocusBounds:gc,plotAreaPathFill:mS,plotLinePathStroke:yc,interpolatePoints:mc,pathFadeInAnimation:fc,markerFadeInAnimation:Sc,fromToMotion:xc,pathMotion:bc,extent:fS,applyShapeFillBBox:SS,PointerEvents:on,Marker:xS,BBox:bS,findMinMax:vS,applyShapeStyle:DS,processedDataIsAnimatable:kS,simpleMemorize2:AS,markerEnabled:MS,getMarkerStyles:IS,calculateSegments:LS}=cs,NS=AS(Xf),TS=class extends cs.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},ds=class extends cs.CartesianSeries{constructor(e){super({moduleCtx:e,pathsPerSeries:["fill","stroke"],pickModes:[cs.SeriesNodePickMode.AXIS_ALIGNED],propertyKeys:{[Ge.X]:["xKey"],[Ge.Y]:["yLowKey","yHighKey"]},propertyNames:{[Ge.X]:["xName"],[Ge.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:lS({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:cS,datum:(t,i)=>({...hS(t),...dc(t,i)})},clipFocusBox:!1}),this.properties=new De,this.NodeEvent=TS,this.dataAggregationFilters=void 0}async processData(e){const{xKey:t,yLowKey:i,yHighKey:o}=this.properties,s=this.axes[Ge.X]?.scale,a=this.axes[Ge.Y]?.scale,{xScaleType:n,yScaleType:r}=this.getScaleInformation({xScale:s,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(yS(this.id,this.processedData)),c&&l.push(gS());const{dataModel:p,processedData:d}=await this.requestDataModel(e,this.data,{props:[aS(t,n,{id:"xValue"}),hc(i,r,{id:"yLowValue"}),hc(o,r,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(p,d),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||kS(t))return;const i=this.axes[Ge.X];if(i==null)return;const o=e.resolveKeysById(this,"xValue",t),s=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:n}=e.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[n];return NS(i.scale.type,o,s,a,r)}xCoordinateRange(e){const t=this.axes[Ge.X].scale.convert(e);return[t,t]}yCoordinateRange(e){const t=this.axes[Ge.Y].scale.convert(e[0]);return[t,t]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];const{domain:{keys:[o]}}=t;if(e===Ge.X){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s.def.valueType==="category"?o:pc(fS(o))}else{const s=this.domainForClippedRange(Ge.Y,["yHighValue","yLowValue"],"xValue"),a=vS(s);return pc(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(Ge.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,processedData:i,axes:o}=this,s=o[Ge.X],a=o[Ge.Y];if(!(e&&s&&a&&t&&i&&this.chart?.seriesRect))return;const n=s.scale,r=a.scale,{xKey:l,yLowKey:c,yHighKey:p,connectMissingData:d,marker:u,interpolation:g,fill:y,fillOpacity:m,stroke:f,strokeWidth:S,strokeOpacity:D}=this.properties,v=i.dataSources.get(this.id)??[],x=(n.bandwidth??0)/2,k=t.resolveKeysById(this,"xValue",i),A=t.resolveColumnById(this,"yHighValue",i),M=t.resolveColumnById(this,"yLowValue",i),b=z=>n.convert(k[z])+x,L=[],I=[],N=[],R=(z,$,Y)=>{const oe=v[z],ae=k[z];if(ae==null)return;const q=N[N.length-1];if(Number.isFinite($)&&Number.isFinite(Y)){const j=(de,le,ue)=>{I.push({index:z,series:this,itemId:de,datum:oe,datumIndex:z,midPoint:{x:he,y:ue},yHighValue:$,yLowValue:Y,xValue:ae,xKey:l,yLowKey:c,yHighKey:p,point:{x:he,y:ue,size:pe},enabled:!0});const Ae=this.createLabelData({datumIndex:z,point:{x:he,y:ue},value:le,yLowValue:Y,yHighValue:$,itemId:de,inverted:Z,datum:oe,series:this});L.push(Ae)},Z=Y>$,he=b(z),ie=r.convert($),J=r.convert(Y),{size:pe}=u;j("high",$,ie),j("low",Y,J);const ee={high:{point:{x:he,y:ie},xDatum:ae,yDatum:$},low:{point:{x:he,y:J},xDatum:ae,yDatum:Y}};Array.isArray(q)?q.push(ee):q!=null?(q.skip+=1,N.push([ee])):N.push([ee])}else d||(Array.isArray(q)||q==null?N.push({skip:0}):q.skip+=1)},{dataAggregationFilters:P}=this,[_,T]=n.range,O=Math.abs(T-_),E=P?.find(z=>z.maxRange>O),C=E?.topIndices,w=E?.bottomIndices;let[F,B]=this.visibleRangeIndices("xValue",s.range,C);F=Math.max(F-1,0),B=Math.min(B+1,C?.length??k.length),i.input.count<1e3&&(F=0,B=i.input.count);for(let z=F;z<B;z+=1){const $=C?.[z]??z,Y=w?.[z]??z;R($,A[$],M[Y])}const V=N.flatMap(z=>{if(!Array.isArray(z))return[];const $=z.map(Y=>Y.high);return mc($,g)}),G=N.flatMap(z=>{if(!Array.isArray(z))return[];const $=z.map(Y=>Y.low);return mc($,g)}),K=LS(this.properties.segmentation,s,a,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:`${c}-${p}`,labelData:L,nodeData:I,fillData:{itemId:"high",spans:V,phantomSpans:G},highStrokeData:{itemId:"high",spans:V},lowStrokeData:{itemId:"low",spans:G},scales:this.calculateScaling(),visible:this.visible,styles:IS(this,u,{fill:y,fillOpacity:m,stroke:f,strokeWidth:S,strokeOpacity:D}),segments:K}}createLabelData({datumIndex:e,point:t,value:i,itemId:o,inverted:s,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:p,yName:d,yLowName:u,yHighName:g,label:y}=this.properties,{placement:m}=y,f=y.spacing+(typeof y.padding=="number"?y.padding:0);let S=o;s&&(S=o==="low"?"high":"low");const D=m==="outside"&&S==="high"||m==="inside"&&S==="low"?-1:1,v=this.getSeriesDomain(Ge.Y);return{x:t.x,y:t.y+f*D,series:n,itemId:o,datum:a,datumIndex:e,text:this.getLabelText(i,a,o==="high"?c:l,"y",v,y,{value:i,datum:a,itemId:o,xKey:r,yLowKey:l,yHighKey:c,xName:p,yLowName:u,yHighName:g,yName:d}),textAlign:"center",textBaseline:D===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{visible:t}=e,[i,o]=e.paths,s=this.contextNodeData?.segments,{strokeWidth:a,stroke:n,strokeOpacity:r,lineDash:l,lineDashOffset:c,fill:p,fillOpacity:d,opacity:u}=nS(this.getHighlightStyle(),this.properties);o.setProperties({segments:s,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:on.None,stroke:n,strokeWidth:a,strokeOpacity:r,lineDash:l,lineDashOffset:c,opacity:u,visible:t}),o.datum=s;const g=this.getShapeFillBBox();SS(i,p,g),DS(i,{stroke:void 0,fill:p,fillOpacity:d,lineDash:l,lineDashOffset:c,strokeOpacity:r,strokeWidth:a,opacity:u},g),i.setProperties({segments:s,pointerEvents:on.None,lineJoin:"round",fillShadow:this.properties.shadow,opacity:u,visible:t}),i.datum=s,uc(this,o),uc(this,i)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(e,t){const[i]=e;i.path.clear(),mS(i,t.fillData),i.markDirty("RangeArea")}updateStrokePath(e,t){const[,i]=e;i.path.clear(),yc(i,t.highStrokeData.spans),yc(i,t.lowStrokeData.spans),i.markDirty("RangeArea")}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{processedData:o,axes:s,properties:a}=this,{marker:n}=a,r=MS(o.input.count,s[Ge.X].scale,n);return n.isDirty()&&(i.clear(),i.cleanup()),i.update(r?t:[])}updateDatumStyles({datumSelection:e,isHighlight:t}){const{xKey:i,yLowKey:o,yHighKey:s,marker:a,fill:n,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:p}=this.properties;e.each((d,u)=>{u.style=this.getMarkerStyle(a,u,{xKey:i,yHighKey:s,yLowKey:o},{isHighlight:t},void 0,{fill:n,fillOpacity:c,stroke:r,strokeWidth:l,strokeOpacity:p})})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:o}=e,s=this.getShapeFillBBox(),a=this.ctx.highlightManager.getActiveHighlight();i.each((n,r)=>{const l=r.style??t.styles[this.getHighlightState(a,o,r.datumIndex)];this.applyMarkerStyle(l,n,r.point,s)}),o||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,o=>{o.pointerEvents=on.None})}updateLabelNodes(e){const t={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:this.properties.yLowName??this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:this.properties.yHighName??this.properties.yHighKey},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,s)=>{o.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,rS(this,o,t,this.properties.label,s,!1,i)})}getHighlightData(e,t){const i=e.filter(o=>o.datum===t.datum);return i.length>0?i:void 0}makeStylerParams(e,t){throw new Error("not implemented")}getTooltipContent(e,t){const i=t?.itemId??"high",{id:o,dataModel:s,processedData:a,axes:n,properties:r}=this,{xName:l,yName:c,yLowKey:p,yLowName:d,xKey:u,yHighKey:g,yHighName:y,tooltip:m,legendItemName:f}=r,S=n[Ge.X],D=n[Ge.Y];if(!s||!a||!S||!D)return;const v=a.dataSources.get(this.id)?.[e],x=s.resolveKeysById(this,"xValue",a)[e],k=s.resolveColumnById(this,"yHighValue",a)[e],A=s.resolveColumnById(this,"yLowValue",a)[e];if(x==null)return;const M=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:v},{xKey:u,yLowKey:p,yHighKey:g}),b=`${this.getAxisValueText(D,"tooltip",A,v,p,f)} - ${this.getAxisValueText(D,"tooltip",k,v,g,f)}`;return this.formatTooltipWithContext(m,{heading:this.getAxisValueText(S,"tooltip",x,v,u,f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:`${d??p} - ${y??g}`,value:b}]},{seriesId:o,datum:v,title:c,itemId:i,xName:l,yName:c,yLowKey:p,yLowName:d,xKey:u,yHighKey:g,yHighName:y,...M})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:s,marker:a}=this.properties;return{marker:{shape:a.shape,fill:a.fill??e,stroke:a.stroke??t,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},line:{stroke:t,strokeOpacity:o,strokeWidth:i,lineDash:s}}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yLowKey:o,yHighKey:s,yName:a,yLowName:n,yHighName:r,showInLegend:l}=this.properties,c=a??`${n??o} - ${r??s}`,p=`${o}-${s}`;return[{legendType:"category",id:t,itemId:p,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new xS}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:o,paths:s}=e,{animationManager:a}=this.ctx;this.updateAreaPaths(s,o),pS(this,a,...s),dS([t],dc),uS(this,a,t),tn(this,"labels",a,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:o,contextData:s,paths:a,previousContextData:n}=e,[r,l]=a;if(r==null&&l==null)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(a,s)},p=()=>{t.skipCurrentBatch(),c()};if(s==null||n==null){c(),Sc(this,t,"added",i),fc(this,"fill_path_properties",t,"add",r),fc(this,"stroke_path_properties",t,"add",l),tn(this,"labels",t,o);return}const d=sS(s,n,this.processedData?.reduced?.diff?.[this.id]);if(d===void 0){p();return}else if(d.status==="no-op")return;xc(this.id,"fill_path_properties",t,[r],d.fill.pathProperties),xc(this.id,"stroke_path_properties",t,[l],d.stroke.pathProperties),d.status==="added"?this.updateAreaPaths(a,s):d.status==="removed"?this.updateAreaPaths(a,n):(bc(this.id,"fill_path_update",t,[r],d.fill.path),bc(this.id,"stroke_path_update",t,[l],d.stroke.path)),d.hasMotion&&(Sc(this,t,void 0,i),tn(this,"labels",t,o)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,s)})}getFormattedMarkerStyle(e){const{xKey:t,yLowKey:i,yHighKey:o}=this.properties;return this.getMarkerStyle(this.properties.marker,e,{xKey:t,yLowKey:i,yHighKey:o},{isHighlight:!0})}computeFocusBounds(e){const t=gc(this,e),i=gc(this,{...e,datumIndex:e.datumIndex+1});if(t&&i)return bS.merge([t,i])}isDatumEnabled(e,t){return t%2===0&&super.isDatumEnabled(e,t)}hasItemStylers(){return this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};ds.className="RangeAreaSeries",ds.type="range-area";import{_ModuleSupport as RS}from"ag-charts-community";import{boolean as CS,constant as PS,number as _S,required as us,shapeSegmentation as ES,string as gi,undocumented as vc}from"ag-charts-core";var{commonSeriesOptionsDefs:wS,rangeAreaSeriesThemeableOptionsDef:OS}=RS,sn={...wS,...OS,type:us(PS("range-area")),xKey:us(gi),yLowKey:us(gi),yHighKey:us(gi),xName:gi,yName:gi,yLowName:gi,yHighName:gi,segmentation:ES};sn.pickOutsideVisibleMinorAxis=vc(CS),sn.focusPriority=vc(_S);import{_ModuleSupport as Vt}from"ag-charts-community";var FS={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Vt.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",Vt.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},fillOpacity:.7,nodeClickRange:"nearest",strokeWidth:1,marker:{enabled:!1,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Vt.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",Vt.FILL_IMAGE_DEFAULTS],["pattern",Vt.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},size:6,strokeWidth:2},label:{...Vt.LABEL_BOXING_DEFAULTS,enabled:!1,placement:"outside",padding:{$isUserOption:["./spacing",0,10]},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Vt.multiSeriesHighlightStyle(),segmentation:Vt.SEGMENTATION_DEFAULTS},axes:{[Vt.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:Dc,CARTESIAN_POSITION:kc}}=oc,$T={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:e=>new ds(e),predictAxis:oc.predictCartesianTimeAxis,defaultAxes:[{type:Dc.NUMBER,position:kc.LEFT},{type:Dc.CATEGORY,position:kc.BOTTOM}],themeTemplate:FS},an={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:sn,create:e=>new ds(e)};import{_ModuleSupport as Ac}from"ag-charts-community";import{_ModuleSupport as gs}from"ag-charts-community";import{_ModuleSupport as BS}from"ag-charts-community";var{aggregationDomain:GS,aggregationRangeFittingPoints:VS,compactAggregationIndices:KS,createAggregationIndices:zS}=BS,WS=1e3;function $S(e,t,i,o,s,a){if(t.length<WS)return;const[n,r]=GS(e,s);let l=VS(t,n,r,{smallestKeyInterval:a}),{indexData:c,valueData:p}=zS(t,i,o,n,r,l);const d=[{maxRange:l,indexData:c}];for(;l>64;)({indexData:c,valueData:p,maxRange:l}=KS(c,p,l)),d.push({maxRange:l,indexData:c});return d.reverse(),d}import{_ModuleSupport as HS}from"ag-charts-community";var{AbstractBarSeriesProperties:XS,makeSeriesTooltip:YS,Property:Ie,DropShadow:US,Label:qS}=HS,nn=class extends qS{constructor(){super(...arguments),this.placement="inside",this.spacing=0}};h([Ie],nn.prototype,"placement",2),h([Ie],nn.prototype,"spacing",2);var Re=class extends XS{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new US().set({enabled:!1}),this.label=new nn,this.tooltip=YS()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,cornerRadius:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,cornerRadius:r,opacity:1}}};h([Ie],Re.prototype,"xKey",2),h([Ie],Re.prototype,"yLowKey",2),h([Ie],Re.prototype,"yHighKey",2),h([Ie],Re.prototype,"xName",2),h([Ie],Re.prototype,"yName",2),h([Ie],Re.prototype,"yLowName",2),h([Ie],Re.prototype,"yHighName",2),h([Ie],Re.prototype,"fill",2),h([Ie],Re.prototype,"fillOpacity",2),h([Ie],Re.prototype,"stroke",2),h([Ie],Re.prototype,"strokeWidth",2),h([Ie],Re.prototype,"strokeOpacity",2),h([Ie],Re.prototype,"lineDash",2),h([Ie],Re.prototype,"lineDashOffset",2),h([Ie],Re.prototype,"cornerRadius",2),h([Ie],Re.prototype,"itemStyler",2),h([Ie],Re.prototype,"shadow",2),h([Ie],Re.prototype,"label",2),h([Ie],Re.prototype,"tooltip",2);var{SeriesNodePickMode:Mc,valueProperty:Ic,keyProperty:jS,ChartAxisDirection:xo,checkCrisp:JS,updateLabelNode:ZS,SMALLEST_KEY_INTERVAL:QS,LARGEST_KEY_INTERVAL:ex,diff:tx,prepareBarAnimationFunctions:Lc,midpointStartingBarPosition:Nc,resetBarSelectionsFn:ix,fixNumericExtent:ox,seriesLabelFadeInAnimation:Tc,resetLabelFn:sx,animationValidation:ax,computeBarFocusBounds:nx,visibleRangeIndices:rx,createDatumId:lx,ContinuousScale:cx,Rect:hx,PointerEvents:px,motion:Rc,applyShapeStyle:dx,findMinMax:ux,areScalingEqual:gx,processedDataIsAnimatable:yx,AGGREGATION_SPAN:Cc,AGGREGATION_INDEX_X_MAX:Pc,AGGREGATION_INDEX_X_MIN:_c,AGGREGATION_INDEX_Y_MAX:mx,AGGREGATION_INDEX_Y_MIN:fx,mergeDefaults:Ec,simpleMemorize2:Sx,getItemStyles:xx,calculateSegments:bx}=gs,vx=Sx($S),Dx=class extends gs.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},ys=class extends gs.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Mc.AXIS_ALIGNED,Mc.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},propertyNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:ix,label:sx}}),this.properties=new Re,this.dataAggregationFilters=void 0,this.NodeEvent=Dx}async processData(e){const{xKey:t,yLowKey:i,yHighKey:o}=this.properties,s=this.getCategoryAxis()?.scale,a=this.getValueAxis()?.scale,{isContinuousX:n,xScaleType:r,yScaleType:l}=this.getScaleInformation({xScale:s,yScale:a}),c=[];this.ctx.animationManager.isSkipped()||(this.processedData&&c.push(tx(this.id,this.processedData)),c.push(ax()));const p=this.visible?{}:{forceValue:0},{dataModel:d,processedData:u}=await this.requestDataModel(e,this.data,{props:[jS(t,r,{id:"xValue"}),Ic(i,l,{id:"yLowValue",invalidValue:null,...p}),Ic(o,l,{id:"yHighValue",invalidValue:null,...p}),...n?[QS,ex]:[],...c],groupByKeys:!1});this.smallestDataInterval=u.reduced?.smallestKeyInterval,this.largestDataInterval=u.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(d,u),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||yx(t))return;const i=this.axes[xo.X];if(i==null)return;const o=e.resolveKeysById(this,"xValue",t),s=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:n}=e.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[n];return vx(i.scale.type,o,s,a,r,t.reduced?.smallestKeyInterval)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[o]}=t.domain;if(e===this.getCategoryDirection()){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s?.def.valueType==="category"?o:this.padBandExtent(o)}else{const s=this.domainForClippedRange(e,["yHighValue","yLowValue"],"xValue"),a=ux(s);return ox(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(xo.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,groupScale:i,processedData:o,visible:s}=this,a=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&a&&n&&t&&o?.dataSources&&this.chart?.seriesRect))return;const r=a.scale,l=n.scale,c=this.getBarDirection()===xo.X,{xKey:p,yLowKey:d,yHighKey:u,strokeWidth:g}=this.properties,y=`${d}-${u}`,m=bx(this.properties.segmentation,a,n,this.chart.seriesRect,this.ctx.scene),f={itemId:y,nodeData:[],labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:xx(this.getItemStyle.bind(this)),segments:m};if(!s)return f;const S=o.dataSources.get(this.id)??[],D=t.resolveKeysById(this,"xValue",o),v=t.resolveColumnById(this,"yLowValue",o),x=t.resolveColumnById(this,"yHighValue",o),{barWidth:k,groupIndex:A}=this.updateGroupScale(a),M=cx.is(r)?k*-.5:0,b=i.convert(String(A)),L=JS(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval),I=E=>Math.round(r.convert(D[E]))+b+M,N=(E,C,w,F,B,V,G)=>{const K=S[E],W=D[E];if(W==null)return;const z=v[E],$=x[E];if(!Number.isFinite(z?.valueOf())||!Number.isFinite($?.valueOf()))return;const[Y,oe]=z<$?[z,$]:[$,z],ae=Math.round(l.convert(V)),q=Math.round(l.convert(B)),j=Math.max(g,Math.abs(q-ae)),Z={x:c?Math.min(ae,q):w,y:c?w:Math.min(ae,q),width:c?j:F,height:c?F:j},he={x:Z.x+Z.width/2,y:Z.y+Z.height/2},ie=this.createLabelData({datumIndex:E,rect:Z,barAlongX:c,yLowValue:Y,yHighValue:oe,datum:K,series:this}),J={index:C,series:this,itemId:y,datum:K,datumIndex:E,xValue:W,yLowValue:z,yHighValue:$,yLowKey:d,yHighKey:u,xKey:p,x:Z.x,y:Z.y,width:Z.width,height:Z.height,midPoint:he,crisp:G,labels:ie};f.nodeData.push(J),f.labelData.push(...ie)},{dataAggregationFilters:R}=this,[P,_]=r.range,T=Math.abs(_-P),O=R?.find(E=>E.maxRange>T);if(O!=null){const{maxRange:E,indexData:C}=O,[w,F]=rx(1,E,a.range,B=>{const V=B*Cc,G=C[V+_c],K=C[V+Pc];if(G===-1)return;const W=(G+K)/2|0;return[I(W),I(K)+k]});for(let B=w;B<F;B+=1){const V=B*Cc,G=C[V+_c],K=C[V+Pc],W=C[V+fx],z=C[V+mx];if(G===-1)continue;const $=(G+K)/2|0;if(D[$]==null)continue;const oe=I($),ae=Math.abs(I(G)-I(K))+k,q=v[W],j=x[z];N($,0,oe,ae,q,j,!1)}}else if(o.type==="ungrouped"){const E=o.invalidData?.get(this.id);let[C,w]=this.visibleRangeIndices("xValue",a.range);o.input.count<1e3&&(C=0,w=o.input.count);for(let F=C;F<w;F+=1){if(E?.[F]===!0)continue;const B=I(F),V=k,G=v[F],K=x[F];N(F,0,B,V,G,K,L)}}else for(const{datumIndex:E,groupIndex:C}of t.forEachGroupDatum(this,o)){const w=I(E),F=k,B=v[E],V=x[E];N(E,C,w,F,B,V,L)}return f}createLabelData({datumIndex:e,rect:t,barAlongX:i,yLowValue:o,yHighValue:s,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:p,yLowName:d,yHighName:u,yName:g,label:y}=this.properties,m={datum:a,xKey:r,yLowKey:l,yHighKey:c,xName:p,yLowName:d,yHighName:u,yName:g},{placement:f}=y,v=(y.spacing+(typeof y.padding=="number"?y.padding:0))*(f==="outside"?1:-1),x=this.getSeriesDomain(xo.Y),k={datumIndex:e,x:t.x+(i?-v:t.width/2),y:t.y+(i?t.height/2:t.height+v),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(o,a,l,"y",x,y,{itemId:"low",value:o,...m}),itemId:"low",datum:a,series:n},A={datumIndex:e,x:t.x+(i?t.width+v:t.width/2),y:t.y+(i?t.height/2:-v),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(s,a,c,"y",x,y,{itemId:"high",value:s,...m}),itemId:"high",datum:a,series:n};return f==="outside"&&(k.textAlign=i?"right":"center",k.textBaseline=i?"middle":"top",A.textAlign=i?"left":"center",A.textBaseline=i?"middle":"bottom"),[k,A]}nodeFactory(){return new hx}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,o=t??[];return i.update(o,void 0,s=>this.getDatumId(s))}getItemStyle(e,t,i){const{id:o,properties:s,dataModel:a,processedData:n}=this,{xKey:r,yHighKey:l,yLowKey:c,itemStyler:p}=s,d=this.getHighlightStyle(t,e,i);let g=Ec(d,s.getStyle());if(p&&a!=null&&n!=null&&e!=null){const y=n.dataSources.get(o)?.[e],m=a.resolveKeysById(this,"xValue",n)[e],f=this.cachedDatumCallback(lx(this.getDatumId({xValue:m}),t?"highlight":"node"),()=>{const S=this.ctx.highlightManager?.getActiveHighlight(),D=this.getHighlightStateString(S,t,e);return this.callWithContext(p,{seriesId:o,datum:y,xKey:r,yHighKey:l,yLowKey:c,highlighted:t,highlightState:D,...g})});f&&(g=Ec(f,g))}return g}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{e.isGarbage(i)||(o.style=this.getItemStyle(o.datumIndex,t))})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const o=this.ctx.highlightManager.getActiveHighlight(),s=this.getCategoryDirection()===xo.X,a=this.getShapeFillBBox();e.each((n,r)=>{const l=r.style??i.styles[this.getHighlightState(o,t,r.datumIndex)];dx(n,l,a),n.cornerRadius=l.cornerRadius??0,n.visible=s?r.width>0:r.height>0,n.crisp=r.crisp})}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=px.None})}updateLabelNodes(e){const t={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:this.properties.yLowName??this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:this.properties.yHighName??this.properties.yHighKey},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,s)=>{o.fillOpacity=this.getHighlightStyle(!1,s?.datumIndex).opacity??1,ZS(this,o,t,this.properties.label,s,!1,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yName:r,yLowKey:l,yHighKey:c,yLowName:p,yHighName:d,tooltip:u,legendItemName:g}=s,y=this.getCategoryAxis(),m=this.getValueAxis();if(!i||!o||!y||!m)return;const f=o.dataSources.get(this.id)?.[e],S=i.resolveKeysById(this,"xValue",o)[e],D=i.resolveColumnById(this,"yHighValue",o)[e],v=i.resolveColumnById(this,"yLowValue",o)[e];if(S==null)return;const x=this.getItemStyle(e,!1),k=`${this.getAxisValueText(m,"tooltip",v,f,l,g)} - ${this.getAxisValueText(m,"tooltip",D,f,c,g)}`;return this.formatTooltipWithContext(u,{heading:this.getAxisValueText(y,"tooltip",S,f,a,g),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:`${p??l} - ${d??c}`,value:k}]},{seriesId:t,datum:f,title:r,xKey:a,xName:n,yName:r,yLowKey:l,yHighKey:c,yLowName:p,yHighName:d,...x})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=this.properties;return{marker:{fill:e,stroke:t,fillOpacity:o,strokeOpacity:s,strokeWidth:i,lineDash:a,lineDashOffset:n}}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yName:o,yLowName:s,yHighName:a,yLowKey:n,yHighKey:r,showInLegend:l}=this.properties,c=o??`${s??n} - ${a??r}`,p=`${n}-${r}`;return[{legendType:"category",id:t,itemId:p,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=Lc(Nc(this.isVertical(),"normal"),"unknown");Rc.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],i),Tc(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:o,previousContextData:s}=e,a=gs.calculateDataDiff(this.id,t,this.getDatumId.bind(this),o,s,this.processedData);this.ctx.animationManager.stopByAnimationGroupId(this.id);const n=s==null?"fade":"normal",r=Lc(Nc(this.isVertical(),n),"added");Rc.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],r,(l,c)=>this.getDatumId(c),a),(a?.changed||!gx(o.groupScale,s?.groupScale))&&Tc(this,"labels",this.ctx.animationManager,i)}getDatumId(e){return`${e.xValue}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return nx(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){return this.properties.itemStyler!=null}};ys.className="RangeBarSeries",ys.type="range-bar";import{_ModuleSupport as kx}from"ag-charts-community";import{boolean as Ax,constant as Mx,number as Ix,required as ms,shapeSegmentation as Lx,string as yi,undocumented as wc}from"ag-charts-core";var{commonSeriesOptionsDefs:Nx,rangeBarSeriesThemeableOptionsDef:Tx}=kx,rn={...Nx,...Tx,type:ms(Mx("range-bar")),xKey:ms(yi),yLowKey:ms(yi),yHighKey:ms(yi),xName:yi,yName:yi,yLowName:yi,yHighName:yi,segmentation:Lx};rn.pickOutsideVisibleMinorAxis=wc(Ax),rn.focusPriority=wc(Ix);import{_ModuleSupport as mi}from"ag-charts-community";var Rx={series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",mi.FILL_GRADIENT_LINEAR_DEFAULTS],["image",mi.FILL_IMAGE_DEFAULTS],["pattern",mi.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{...mi.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},placement:"inside",padding:{$isUserOption:["./spacing",0,6]}},highlight:mi.multiSeriesHighlightStyle(),segmentation:mi.SEGMENTATION_DEFAULTS},axes:{[mi.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},ZT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:e=>new ys(e),predictAxis:Ac.predictCartesianTimeAxis,defaultAxes:Ac.DIRECTION_SWAP_AXES,themeTemplate:Rx,groupable:!0},ln={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:rn,create:e=>new ys(e)};import{_ModuleSupport as Cx}from"ag-charts-community";import{_ModuleSupport as fi}from"ag-charts-community";import{_ModuleSupport as Px}from"ag-charts-community";var{AbstractBarSeriesProperties:_x,BaseProperties:bo,PropertiesArray:Ex,makeSeriesTooltip:wx,Property:se,DropShadow:Ox,Label:Fx}=Px,fs=class extends bo{};h([se],fs.prototype,"totalType",2),h([se],fs.prototype,"index",2),h([se],fs.prototype,"axisLabel",2);var Oc=class extends bo{};h([se],Oc.prototype,"renderer",2);var cn=class extends Fx{constructor(){super(...arguments),this.placement="outside-end",this.spacing=0}};h([se],cn.prototype,"placement",2),h([se],cn.prototype,"spacing",2);var Ue=class extends bo{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Ox().set({enabled:!1}),this.label=new cn,this.tooltip=new Oc}};h([se],Ue.prototype,"name",2),h([se],Ue.prototype,"fill",2),h([se],Ue.prototype,"stroke",2),h([se],Ue.prototype,"fillOpacity",2),h([se],Ue.prototype,"strokeOpacity",2),h([se],Ue.prototype,"lineDash",2),h([se],Ue.prototype,"lineDashOffset",2),h([se],Ue.prototype,"strokeWidth",2),h([se],Ue.prototype,"cornerRadius",2),h([se],Ue.prototype,"itemStyler",2),h([se],Ue.prototype,"shadow",2),h([se],Ue.prototype,"label",2),h([se],Ue.prototype,"tooltip",2);var Si=class extends bo{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};h([se],Si.prototype,"enabled",2),h([se],Si.prototype,"stroke",2),h([se],Si.prototype,"strokeOpacity",2),h([se],Si.prototype,"lineDash",2),h([se],Si.prototype,"lineDashOffset",2),h([se],Si.prototype,"strokeWidth",2);var Ss=class extends bo{constructor(){super(...arguments),this.positive=new Ue,this.negative=new Ue,this.total=new Ue}};h([se],Ss.prototype,"positive",2),h([se],Ss.prototype,"negative",2),h([se],Ss.prototype,"total",2);var Kt=class extends _x{constructor(){super(...arguments),this.item=new Ss,this.totals=new Ex(fs),this.line=new Si,this.tooltip=wx()}getStyle(e){const{fillOpacity:t,strokeWidth:i,strokeOpacity:o,fill:s,stroke:a,lineDash:n,lineDashOffset:r,cornerRadius:l}=this.item[e==="subtotal"?"total":e];return{fill:s,fillOpacity:t,stroke:a,strokeWidth:i,strokeOpacity:o,lineDash:n,lineDashOffset:r,cornerRadius:l,opacity:1}}};h([se],Kt.prototype,"xKey",2),h([se],Kt.prototype,"yKey",2),h([se],Kt.prototype,"xName",2),h([se],Kt.prototype,"yName",2),h([se],Kt.prototype,"item",2),h([se],Kt.prototype,"totals",2),h([se],Kt.prototype,"line",2),h([se],Kt.prototype,"tooltip",2);var{adjustLabelPlacement:Bx,SeriesNodePickMode:Fc,fixNumericExtent:Gx,valueProperty:Bc,keyProperty:Vx,accumulativeValueProperty:xs,trailingAccumulatedValueProperty:Kx,ChartAxisDirection:bs,createDatumId:zx,checkCrisp:Wx,updateLabelNode:$x,prepareBarAnimationFunctions:Hx,collapsedStartingBarPosition:Xx,resetBarSelectionsFn:Yx,seriesLabelFadeInAnimation:Ux,resetLabelFn:qx,animationValidation:jx,DEFAULT_CARTESIAN_DIRECTION_KEYS:Jx,DEFAULT_CARTESIAN_DIRECTION_NAMES:Zx,computeBarFocusBounds:Qx,isContinuous:Gc,Rect:eb,motion:tb,applyShapeStyle:ib,mergeDefaults:Vc,getItemStylesPerItemId:ob}=fi,vs=class extends fi.AbstractBarSeries{constructor(e){super({moduleCtx:e,propertyKeys:Jx,propertyNames:Zx,categoryKey:void 0,pickModes:[Fc.NEAREST_NODE,Fc.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:Yx,label:qx}}),this.properties=new Kt,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(e){const{xKey:t,yKey:i,totals:o}=this.properties,{data:s=[]}=this;if(!this.visible)return;const a=D=>Gc(D)&&Number(D)>=0,n=D=>Gc(D)&&Number(D)>=0,r=D=>D==="total"||D==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],p=o.reduce((D,v)=>{const x=D.get(v.index);return x?x.push(v):D.set(v.index,[v]),D},new Map);s.forEach((D,v)=>{c.push(D),p.get(v)?.forEach(x=>c.push({...x.toJson(),[t]:x.axisLabel}))});const d=[];this.ctx.animationManager.isSkipped()||d.push(jx());const u=this.getCategoryAxis()?.scale,g=this.getValueAxis()?.scale,{isContinuousX:y,xScaleType:m,yScaleType:f}=this.getScaleInformation({xScale:u,yScale:g}),{processedData:S}=await this.requestDataModel(e,c,{props:[Vx(t,m,{id:"xValue"}),xs(i,f,{...l,id:"yCurrent"}),xs(i,f,{...l,missingValue:0,id:"yCurrentTotal"}),xs(i,f,{...l,id:"yCurrentPositive",validation:a}),xs(i,f,{...l,id:"yCurrentNegative",validation:n}),Kx(i,f,{...l,id:"yPrevious"}),Bc(i,f,{id:"yRaw"}),Bc("totalType","category",{id:"totalTypeValue",missingValue:void 0,validation:r}),...y?[fi.SMALLEST_KEY_INTERVAL,fi.LARGEST_KEY_INTERVAL]:[],...d]});this.smallestDataInterval=S.reduced?.smallestKeyInterval,this.largestDataInterval=S.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[o],values:s}=t.domain;if(e===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue");if(a?.def.type==="key"&&a?.def.valueType==="category")return o;const n=e===bs.Y,r=this.getCategoryAxis().isReversed();return this.padBandExtent(o,r!==n)}else{const a=i.resolveProcessedDataIndexById(this,"yCurrent"),n=s[a],r=[Math.min(0,n[0]),Math.max(0,n[1])];return Gx(r)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,dataModel:t,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!e||!o||!s||!t||!i)return;const{line:a}=this.properties,n=o.scale,r=s.scale,l=this.getBarDirection()===bs.X,c=this.getBandwidth(o)??10,p=o.isReversed(),d=s.isReversed();if(i.type!=="ungrouped")return;const u={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:ob(this.getItemStyle.bind(this),"total","subtotal","positive","negative")};if(!this.visible)return u;const g=[],y=t.resolveKeysById(this,"xValue",i),m=t.resolveColumnById(this,"yRaw",i),f=t.resolveColumnById(this,"totalTypeValue",i),S=t.resolveColumnById(this,"yCurrent",i),D=t.resolveColumnById(this,"yPrevious",i),v=t.resolveColumnById(this,"yCurrentTotal",i),x=this.getSeriesDomain(bs.Y),k=Wx(o?.scale,o?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function A(T,O,E){return T||O?{cumulativeValue:v[E],trailingValue:O?b:0}:{cumulativeValue:S[E],trailingValue:D[E]}}function M(T,O,E,C,w){return T?C:O?(C??0)-(w??0):E}let b=0;const{xKey:L,yKey:I,xName:N,yName:R}=this.properties;(i.dataSources.get(this.id)??[]).forEach((T,O)=>{const E=f[O],C=this.isSubtotal(E),w=this.isTotal(E),F=w||C,B=y[O];if(B==null)return;const V=Math.round(n.convert(B)),G=m[O],{cumulativeValue:K,trailingValue:W}=A(w,C,O);F&&(b=K??0);const z=Math.round(r.convert(K)),$=Math.round(r.convert(W)),Y=M(w,C,G,K,W),oe=(Y??0)>=0,ae=this.getSeriesItemType(oe,E),{strokeWidth:q,label:j}=this.getItemConfig(ae),Z=oe?z:$,he=oe?$:z,ie=Math.max(q,Math.abs(he-Z)),J={x:l?Math.min(Z,he):V,y:l?V:Math.min(Z,he),width:l?ie:c,height:l?c:ie},pe={x:J.x+J.width/2,y:J.y+J.height/2},ee=F?z:$,de=Math.floor(a.strokeWidth)%2/2,le=p?z:ee,ue=p?ee:z;let Ae,st;l?(Ae={x:le+de,y:J.y},st={x:ue+de,y:J.y+J.height}):(Ae={x:J.x,y:le+de},st={x:J.x+J.width,y:ue+de});const ai={x:p?st.x:Ae.x,y:p?st.y:Ae.y,x2:p?Ae.x:st.x,y2:p?Ae.y:st.y,size:0};g.push(ai);const ft=ae==="subtotal"?"total":ae,Nt=this.getLabelText(Y,T,I,"y",x,j,{itemId:ft,value:Y,datum:T,xKey:L,yKey:I,xName:N,yName:R}),ro=j.spacing+(typeof j.padding=="number"?j.padding:0),lo={index:O,series:this,itemId:ae,datum:T,datumIndex:O,cumulativeValue:K??0,xValue:B,yValue:Y,yKey:I,xKey:L,x:J.x,y:J.y,width:J.width,height:J.height,midPoint:pe,crisp:k,label:{text:Nt,...Bx({isUpward:(Y??-1)>=0!==d,isVertical:!l,placement:j.placement,spacing:ro,rect:J})}};u.nodeData.push(lo),u.labelData.push(lo)});const _=this.properties.line.enabled;return S!=null&&_&&(u.pointData=g),u}updateSeriesItemTypes(){const{dataModel:e,seriesItemTypes:t,processedData:i}=this;if(!e||!i)return;t.clear();const o=e.resolveProcessedDataIndexById(this,"yCurrentPositive"),s=e.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=e.resolveProcessedDataIndexById(this,"totalTypeValue"),n=i.domain.values[o]??[],r=i.domain.values[s]??[];n.length>0&&t.add("positive"),r.length>0&&t.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&t.add("total")})}isSubtotal(e){return e==="subtotal"}isTotal(e){return e==="total"}nodeFactory(){return new eb}getSeriesItemType(e,t){return t??(e?"positive":"negative")}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,o=t??[];return i.update(o)}getItemStyle(e,t,i,o="total"){const{id:s,properties:a}=this,{datumIndex:n=0,datum:r}=e??{},l=o==="subtotal"?"total":o,c=a.item[l],p=this.getHighlightStyle(t,n,i),d=Vc(p,a.getStyle(o)),{itemStyler:u}=c,{xKey:g,yKey:y}=a;let m=d;if(u!=null&&e!=null){const f=this.ctx.highlightManager?.getActiveHighlight(),S=this.cachedDatumCallback(zx(n,t?"highlight":"node"),()=>{const D=this.getHighlightStateString(f,t,n);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`,"item",l],this.callWithContext(u,{seriesId:s,itemId:o,datum:r,xKey:g,yKey:y,highlighted:t,highlightState:D,...m}))});S&&(m=Vc(S,m))}return m}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o,t,void 0,o.itemId)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const o=this.ctx.highlightManager.getActiveHighlight(),s=this.getCategoryDirection()===bs.X,a=this.getShapeFillBBox();e.each((n,r)=>{const l=r.style??i.styles[r.itemId][this.getHighlightState(o,t,r.datumIndex)];ib(n,l,a),n.cornerRadius=l.cornerRadius??0,n.visible=s?r.width>0:r.height>0,n.crisp=r.crisp})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;if(t.length===0)return i.update([]);const o=t.filter(s=>{const{label:a}=this.getItemConfig(s.itemId);return a.enabled});return i.update(o)}updateLabelNodes(e){const t={itemId:"positive",xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xName,yKey:this.properties.yKey,yName:this.properties.yName??this.properties.yName},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,s)=>{t.itemId=s.itemId,o.fillOpacity=this.getHighlightStyle(!1,s.datumIndex)?.opacity??1;const a=this.getItemConfig(s.itemId).label;$x(this,o,t,a,s.label,!1,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yKey:r,yName:l,tooltip:c,legendItemName:p}=s,d=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!o||!d||!u)return;const g=o.dataSources.get(this.id)?.[e],y=i.resolveKeysById(this,"xValue",o)[e],m=i.resolveColumnById(this,"yRaw",o)[e],f=i.resolveColumnById(this,"yCurrentTotal",o),S=i.resolveColumnById(this,"totalTypeValue",o);if(y==null)return;const D=S[e],v=(m??0)>=0,x=this.getSeriesItemType(v,D);let k;if(this.isTotal(D))k=f[e];else if(this.isSubtotal(D)){k=f[e];for(let b=e-1;b>=0;b-=1)if(this.isSubtotal(S[b])){k=k-f[b];break}}else k=m;const A=this.contextNodeData?.nodeData?.[e],M=this.getItemStyle(A,!1,void 0,A?.itemId);return this.formatTooltipWithContext(c,{heading:this.getAxisValueText(d,"tooltip",y,g,a,p),symbol:this.legendItemSymbol(x),data:[{label:l,fallbackLabel:r,value:this.getAxisValueText(u,"tooltip",k,g,r,p)}]},{seriesId:t,datum:g,title:l,itemId:x,xKey:a,xName:n,yKey:r,yName:l,...M})}legendItemSymbol(e){const{fill:t,stroke:i,fillOpacity:o,strokeOpacity:s,strokeWidth:a,lineDash:n,lineDashOffset:r}=this.getItemConfig(e);return{marker:{fill:t,stroke:i,fillOpacity:o,strokeOpacity:s,strokeWidth:a,lineDash:n,lineDashOffset:r}}}getLegendData(e){if(e!=="category")return[];const{id:t,seriesItemTypes:i}=this,o=[],s=n=>n.charAt(0).toUpperCase()+n.substring(1),{showInLegend:a}=this.properties;return i.forEach(n=>{const{name:r}=this.getItemConfig(n);o.push({legendType:"category",id:t,itemId:n,seriesId:t,enabled:!0,label:{text:r??s(n)},symbol:this.legendItemSymbol(n),hideInLegend:!a,isFixed:!0})}),o}toggleSeriesItem(){}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:o}=e,s=Hx(Xx(this.isVertical(),this.axes,"normal"),"unknown");tb.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s),Ux(this,"labels",this.ctx.animationManager,i);const{pointData:a}=o;a&&(this.isVertical()?this.animateConnectorLinesVertical(e):this.animateConnectorLinesHorizontal(e))}animateConnectorLinesHorizontal(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:o}=i;this.updateLineNode(i);const s=this.getValueAxis(),a=s?.isReversed(),n=a?(p,d)=>p<d:(p,d)=>p>d,r=s?.scale.convert(0),l=t.reduce((p,d)=>(n(d.x,p)&&(p=d.x),p),a?1/0:0),c=(p,d,u,g,y)=>(p-d)/(u-d)*(y-g)+g;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:fi.Motion.easeOut,collapsable:!1,onUpdate(p){o.clear(!0),t.forEach((d,u)=>{const g=c(p,r,l,r,d.x),y=c(p,r,l,r,d.x2);u!==0&&o.lineTo(g,d.y),o.moveTo(y,d.y2)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateConnectorLinesVertical(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:o}=i;this.updateLineNode(i);const s=this.getValueAxis(),a=s?.isReversed(),n=a?(p,d)=>p>d:(p,d)=>p<d,r=s?.scale.convert(0),l=t.reduce((p,d)=>(n(d.y,p)&&(p=d.y),p),a?0:1/0),c=(p,d,u,g,y)=>(p-d)/(u-d)*(y-g)+g;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:fi.Motion.easeOut,collapsable:!1,onUpdate(p){o.clear(!0),t.forEach((d,u)=>{const g=c(p,r,l,r,d.y),y=c(p,r,l,r,d.y2);u!==0&&o.lineTo(d.x,g),o.moveTo(d.x2,y)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}resetConnectorLinesPath({contextData:e,paths:t}){if(t.length===0)return;const[i]=t;this.updateLineNode(i);const{path:o}=i;o.clear(!0);const{pointData:s}=e;s&&(s.forEach((a,n)=>{n!==0&&o.lineTo(a.x,a.y),o.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,lineJoin:"round",pointerEvents:fi.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return Qx(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){const{positive:e,negative:t,total:i}=this.properties.item;return e.itemStyler!=null||t.itemStyler!=null||i.itemStyler!=null}};vs.className="WaterfallSeries",vs.type="waterfall";import{_ModuleSupport as sb}from"ag-charts-community";import{arrayOfDefs as ab,constant as nb,positiveNumber as rb,required as $i,string as vo,union as lb}from"ag-charts-core";var{commonSeriesOptionsDefs:cb,waterfallSeriesThemeableOptionsDef:hb}=sb,pb={...hb,...cb,type:$i(nb("waterfall")),xKey:$i(vo),yKey:$i(vo),xName:vo,yName:vo,totals:ab({totalType:$i(lb("total","subtotal")),index:$i(rb),axisLabel:$i(vo)},"a total definition options array")};import{_ModuleSupport as hn}from"ag-charts-community";var{FILL_GRADIENT_LINEAR_SHADED_DEFAULTS:db,FILL_IMAGE_DEFAULTS:ub,FILL_PATTERN_DEFAULTS:gb}=hn;function pn(e,t){return{fill:{$applySwitch:[{$path:"type"},{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`/${t}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${e}.fill`}]},["gradient",db(e)],["image",ub],["pattern",gb]]},stroke:{$palette:`${e}.stroke`},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{...hn.LABEL_BOXING_DEFAULTS,enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end",padding:{$isUserOption:["./spacing",0,6]}}}}var yb={series:{item:{positive:pn("altUp",0),negative:pn("altDown",1),total:pn("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2},highlight:hn.singleSeriesHighlightStyle()},legend:{enabled:!0,toggleSeries:!1}},aR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:e=>new vs(e),defaultAxes:Cx.DIRECTION_SWAP_AXES,themeTemplate:yb},dn={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:pb,create:e=>new vs(e)},{NewAreaSeriesModule:mb,NewBarSeriesModule:fb,NewBubbleSeriesModule:Sb,NewHistogramSeriesModule:xb,NewLineSeriesModule:bb,NewScatterSeriesModule:vb,numberFormatValidator:Db,without:nt}=ay,Kc={width:pt,height:pt,grip:go,fill:qo,stroke:qo,strokeWidth:pt,cornerRadius:pt},rt=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],kb=[...rt,"errorBar","label","legendItemName","direction"],Ab=[...rt,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"],Mb=[...rt,"title","label","labelKey","labelName","sizeName"],Ib=[...rt,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"],Lb=[...rt,"label"],Nb=[...rt,"errorBar","title","label"],Tb=[...rt,"label","yLowName","yHighName"],Rb=[...rt,"direction","label","yLowName","yHighName"],Cb=[...rt,"errorBar","title","label","labelKey","labelName"],Pb=[...rt,"direction"],_b={enabled:go,height:pt,spacing:pt,cornerRadius:fl,mask:{fill:qo,fillOpacity:hy,stroke:qo,strokeWidth:pt},minHandle:Kc,maxHandle:Kc,miniChart:{enabled:go,padding:{top:pt,bottom:pt},label:{enabled:go,avoidCollisions:go,spacing:pt,format:Db,formatter:ly,interval:{minSpacing:pt,maxSpacing:pt,values:ny,step:fl},...cy},series:ry(py({area:nt(mb.options,[...rt,"type"]),bar:nt(fb.options,[...kb,"type"]),"box-plot":nt(Ga.options,[...Ab,"type"]),bubble:nt(Sb.options,[...Mb,"type"]),candlestick:nt(Ya.options,[...rt,"type"]),heatmap:nt(Ja.options,[...Ib,"type"]),histogram:nt(xb.options,[...Lb,"type"]),line:nt(bb.options,[...Nb,"type"]),ohlc:nt(Qa.options,[...rt,"type"]),"range-area":nt(an.options,[...Tb,"type"]),"range-bar":nt(ln.options,[...Rb,"type"]),scatter:nt(vb.options,[...Cb,"type"]),waterfall:nt(dn.options,[...Pb,"type"])},"miniChart series options"))}},{annotationOptionsDef:Eb}=zg,wb={type:"plugin",name:"annotations",chartType:"cartesian",options:Eb,create(){return null}},Ob={type:"plugin",name:"navigator",chartType:"cartesian",options:_b,create(){return null}},Fb={type:"plugin",name:"initialState",options:sy,create(){return null}};import{_ModuleSupport as Do}from"ag-charts-community";import{_ModuleSupport as Bb}from"ag-charts-community";import{Logger as Gb,cachedTextMeasurer as Vb,calcLineHeight as Kb,wrapText as zb}from"ag-charts-core";import{_ModuleSupport as zc}from"ag-charts-community";import{Logger as Wb}from"ag-charts-core";function Wc(e,t,i){i||(t=$b(t));const o=new Map;for(const a of e)o.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let s=0;return o.forEach((a,n)=>{s=Math.max(s,un(o,t,a,n,-1,[])+un(o,t,a,n,1,[])+1)}),{links:t,nodeGraph:o,maxPathLength:s}}function $c(e,t,i,o){const s=o.indexOf(t);if(s!==-1){for(let n=s;n<o.length;n+=1)i.add(o[n]);return}o.push(t);const{toNode:a}=t;for(const n of e)n.fromNode===a&&$c(e,n,i,o);o.pop()}function $b(e){const t=new Set;for(const i of e)$c(e,i,t,[]);return t.size!==0&&Wb.warnOnce("Some links formed circular references. These will be removed from the output."),t.size===0?e:e.filter(i=>!t.has(i))}function un(e,t,i,o,s,a){if(a.includes(o))return 1/0;let n=s===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(n===-1){n=0;const r=s===-1?i.linksBefore:i.linksAfter;for(const l of t){const{fromNode:c,toNode:p}=l,d=s===-1?p.id:c.id,u=s===-1?c.id:p.id,g=o===d?e.get(u):void 0;g!=null&&(r.push({node:g,link:l}),a?.push(o),n=Math.max(n,un(e,t,g,u,s,a)+1),a?.pop())}s===-1?i.maxPathLengthBefore=n:i.maxPathLengthAfter=n}return n}var{Series:Hb,DataController:Xb,keyProperty:Yb,valueProperty:Ds,Selection:xi,Group:Hi,TransformableText:Ub}=zc,qb=class extends zc.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o);const{datumIndex:s}=i,a=o.contextNodeData?.nodeData.find(n=>n.datumIndex.type===s.type&&n.datumIndex.index===s.index);this.size=a?.size,this.label=a?.type===1?a?.label:void 0}},Hc=class extends Hb{constructor(){super(...arguments),this.NodeEvent=qb,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Hi({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Hi({name:"nodeGroup"})),this.focusLinkGroup=this.highlightGroup.appendChild(new Hi({name:"linkGroup"})),this.focusNodeGroup=this.highlightGroup.appendChild(new Hi({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightGroup.appendChild(new Hi({name:"linkGroup"})),this.highlightNodeGroup=this.highlightGroup.appendChild(new Hi({name:"nodeGroup"})),this.labelSelection=xi.select(this.labelGroup,Ub),this.linkSelection=xi.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=xi.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=xi.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=xi.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=xi.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=xi.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes}async processData(e){const{data:t,nodes:i}=this;if(t==null)return;const{fromKey:o,toKey:s,sizeKey:a,idKey:n,labelKey:r}=this.properties,l=new Xb("standalone",e.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[Yb(n,void 0,{id:"idValue",includeProperty:!1}),...r!=null?[Ds(r,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,p=e.request(this.id,t,{props:[Ds(o,void 0,{id:"fromValue",includeProperty:!1}),Ds(s,void 0,{id:"toValue",includeProperty:!1}),...a!=null?[Ds(a,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[d,u]=await Promise.all([c,p]);this.nodesDataModel=d?.dataModel,this.nodesProcessedData=d?.processedData,this.linksDataModel=u?.dataModel,this.linksProcessedData=u?.processedData;const g=new Map;if(d==null){const y=u.dataModel.resolveColumnById(this,"fromValue",u.processedData),m=u.dataModel.resolveColumnById(this,"toValue",u.processedData),f=S=>{const D=g.size,v=S;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:D},type:1,index:D,linksBefore:[],linksAfter:[],id:S,size:0,label:v,style:this.getNodeStyle({datumIndex:{type:1,index:D},datum:{},size:0,label:v},D,!1)}};u.processedData.dataSources.get(this.id)?.forEach((S,D)=>{const v=y[D],x=m[D];v==null||x==null||(g.has(v)||g.set(v,f(v)),g.has(x)||g.set(x,f(x)))})}else{const y=d.dataModel.resolveColumnById(this,"idValue",d.processedData),m=r!=null?d.dataModel.resolveColumnById(this,"labelValue",d.processedData):void 0;d.processedData.dataSources.get(this.id)?.forEach((f,S)=>{const D=y[S],v=m?.[S],x={type:1,index:S};g.set(D,{series:this,itemId:void 0,datum:f,datumIndex:x,type:1,index:S,linksBefore:[],linksAfter:[],id:D,size:0,label:v,style:this.getNodeStyle({datumIndex:x,datum:f,size:0,label:v},S,!1)})})}this.processedNodes=g}getNodeGraph(e,t,{includeCircularReferences:i}){const{linksDataModel:o,linksProcessedData:s}=this;if(o==null||s==null){const{links:y,nodeGraph:m,maxPathLength:f}=Wc(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:m,links:y,maxPathLength:f}}const{sizeKey:a}=this.properties,n=o.resolveColumnById(this,"fromValue",s),r=o.resolveColumnById(this,"toValue",s),l=a!=null?o.resolveColumnById(this,"sizeValue",s):void 0,c=new Map;this.processedNodes.forEach(y=>{const m=e(y);c.set(y.id,m)});const p=[];s.dataSources.get(this.id)?.forEach((y,m)=>{const f=n[m],S=r[m],D=l!=null?l[m]:1,v=c.get(f),x=c.get(S);if(D<=0||v==null||x==null)return;const k={type:0,index:m},A=t({series:this,itemId:void 0,datum:y,datumIndex:k,type:0,index:m,fromNode:v,toNode:x,size:D,style:this.getLinkStyle({datum:y,datumIndex:k},v.datumIndex,!1)});p.push(A)});const{links:d,nodeGraph:u,maxPathLength:g}=Wc(c.values(),p,i);return u.forEach(y=>{y.datum.linksBefore=y.linksBefore.map(m=>m.link),y.datum.linksAfter=y.linksAfter.map(m=>m.link)}),this.nodeCount=u.size,this.linkCount=d.length,{nodeGraph:u,links:d,maxPathLength:g}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){const{seriesRect:t}=e,i={seriesRectWidth:t?.width??0,seriesRectHeight:t?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const o=this.contextNodeData?.nodeData??[],s=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:p}=a;a=p!=null?o.find(d=>d.type===1&&d.id===p):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlight.unhighlightedItem.opacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:s,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:o.filter(p=>p.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:o.filter(p=>p.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let n,r,l,c;a?.type===1?(n=o.filter(p=>p.type===0&&(p.toNode===a||p.fromNode===a)),r=n.map(p=>p.fromNode===a?p.toNode:p.fromNode),r.push(a),l=[],c=[a]):a?.type===0?(n=[a],r=[a.fromNode,a.toNode],l=[a],c=[]):(n=[],r=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:n,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:r,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(e){}dataCount(){return NaN}getSeriesDomain(e){return[]}getSeriesRange(e,t){return[NaN,NaN]}legendItemSymbol(e,t,i={}){const{fills:o,strokes:s}=this.properties,{fill:a=o[t%o.length],fillOpacity:n=1,stroke:r=s[t%s.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:p=[0],lineDashOffset:d=0}=i;return{marker:{fill:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:p,lineDashOffset:d}}}getLegendData(e){if(e!=="category")return[];const{showInLegend:t}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:o},s)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:o??i},symbol:this.legendItemSymbol(1,s),hideInLegend:!t,isFixed:!0}))}pickNodeClosestDatum({x:e,y:t}){let i=1/0,o;return this.linkSelection.each((s,a)=>{const n=s.distanceSquared(e,t);n<i&&(i=n,o=a)}),this.nodeSelection.each((s,a)=>{const n=s.distanceSquared(e,t);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}getDatumAriaText(e,t){if(e.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:e.index+1,count:this.linkCount,from:e.fromNode.id,to:e.toNode.id,size:e.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(e.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:e.index+1,count:this.nodeCount,description:t})}pickFocus(e){const{datumIndexDelta:t,otherIndexDelta:i}=e,o=this.contextNodeData?.nodeData[e.datumIndex-e.datumIndexDelta];let s=o;if(i!==0||t===0)return;if(o?.type===0){const r=Array.from(this.linkSelection,p=>p.datum),c=r.indexOf(o)+t;if(c>=0&&c<r.length)s=r[c];else if(c>0)s=r[r.length-1];else{const p=Array.from(this.nodeSelection,d=>d.datum);s=p[p.length-1]}}else if(o?.type===1){const r=Array.from(this.nodeSelection,p=>p.datum),c=r.indexOf(o)+t;c>=0&&c<r.length?s=r[c]:c<0?s=r[0]:s=Array.from(this.linkSelection,d=>d.datum)[0]}if(s==null)return;const a=s.type===1?Array.from(this.nodeSelection).find(r=>r.datum===s):Array.from(this.linkSelection).find(r=>r.datum===s);if(a==null)return;const n=this.computeFocusBounds(a.node);if(n!=null)return{datum:a.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(a.datum)??0,otherIndex:0,bounds:n,clipFocusBox:!0}}getCategoryValue(e){}datumIndexForCategoryValue(e){}};import{_ModuleSupport as jb}from"ag-charts-community";var{Path:Jb,SceneChangeDetection:Ut}=jb;function Xc({radius:e,startAngle:t,endAngle:i,tension:o}){const s=e*Math.cos(t),a=e*Math.sin(t),n=e*Math.cos(i),r=e*Math.sin(i),l=s*o,c=a*o,p=n*o,d=r*o;return{x:[s,l,p,n],y:[a,c,d,r]}}var zt=class extends Jb{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(e,t,i,o,s,a,n,r){const{path:l,tension:c}=this,p=1-c;l.cubicCurveTo((i-e)*p+e,(o-t)*p+t,(s-n)*p+n,(a-r)*p+r,n,r)}updatePath(){const{path:e,centerX:t,centerY:i,radius:o}=this;let{startAngle1:s,endAngle1:a,startAngle2:n,endAngle2:r}=this;s>n&&([s,n]=[n,s],[a,r]=[r,a]),e.clear();const l=t+o*Math.cos(s),c=i+o*Math.sin(s);e.moveTo(l,c),this.tensionedCurveTo(l,c,t,i,t,i,t+o*Math.cos(r),i+o*Math.sin(r)),e.arc(t,i,o,r,n,!0),this.tensionedCurveTo(t+o*Math.cos(n),i+o*Math.sin(n),t,i,t,i,t+o*Math.cos(a),i+o*Math.sin(a)),e.arc(t,i,o,a,s,!0),e.closePath()}};h([Ut()],zt.prototype,"centerX",2),h([Ut()],zt.prototype,"centerY",2),h([Ut()],zt.prototype,"radius",2),h([Ut()],zt.prototype,"startAngle1",2),h([Ut()],zt.prototype,"endAngle1",2),h([Ut()],zt.prototype,"startAngle2",2),h([Ut()],zt.prototype,"endAngle2",2),h([Ut()],zt.prototype,"tension",2);import{_ModuleSupport as Zb}from"ag-charts-community";var{FillGradientDefaults:Qb,FillPatternDefaults:ev,FillImageDefaults:tv,BaseProperties:Yc,makeSeriesTooltip:iv,SeriesProperties:ov,Property:te,Label:sv}=Zb,gn=class extends sv{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};h([te],gn.prototype,"spacing",2),h([te],gn.prototype,"maxWidth",2);var Ct=class extends Yc{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}getStyle(e,t,i){const{fillOpacity:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,tension:l}=this,c=this.fill??e[i%e.length],p=this.stroke??t[i%e.length];return{fill:c,fillOpacity:o,stroke:p,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,tension:l}}};h([te],Ct.prototype,"fill",2),h([te],Ct.prototype,"fillOpacity",2),h([te],Ct.prototype,"stroke",2),h([te],Ct.prototype,"strokeOpacity",2),h([te],Ct.prototype,"strokeWidth",2),h([te],Ct.prototype,"lineDash",2),h([te],Ct.prototype,"lineDashOffset",2),h([te],Ct.prototype,"tension",2),h([te],Ct.prototype,"itemStyler",2);var kt=class extends Yc{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t,i){const{fillOpacity:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this,l=this.fill??e[i%e.length],c=this.stroke??t[i%e.length];return{fill:l,fillOpacity:o,stroke:c,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}}};h([te],kt.prototype,"spacing",2),h([te],kt.prototype,"width",2),h([te],kt.prototype,"fill",2),h([te],kt.prototype,"fillOpacity",2),h([te],kt.prototype,"stroke",2),h([te],kt.prototype,"strokeOpacity",2),h([te],kt.prototype,"strokeWidth",2),h([te],kt.prototype,"lineDash",2),h([te],kt.prototype,"lineDashOffset",2),h([te],kt.prototype,"itemStyler",2);var Ee=class extends ov{constructor(){super(),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new Qb,this.fillPatternDefaults=new ev,this.fillImageDefaults=new tv,this.fills=[],this.strokes=[],this.label=new gn,this.link=new Ct,this.node=new kt,this.tooltip=iv(),this.highlightStyle.deprecated=!1}};h([te],Ee.prototype,"fromKey",2),h([te],Ee.prototype,"toKey",2),h([te],Ee.prototype,"idKey",2),h([te],Ee.prototype,"idName",2),h([te],Ee.prototype,"labelKey",2),h([te],Ee.prototype,"labelName",2),h([te],Ee.prototype,"sizeKey",2),h([te],Ee.prototype,"sizeName",2),h([te],Ee.prototype,"nodes",2),h([te],Ee.prototype,"fillGradientDefaults",2),h([te],Ee.prototype,"fillPatternDefaults",2),h([te],Ee.prototype,"fillImageDefaults",2),h([te],Ee.prototype,"fills",2),h([te],Ee.prototype,"strokes",2),h([te],Ee.prototype,"label",2),h([te],Ee.prototype,"link",2),h([te],Ee.prototype,"node",2),h([te],Ee.prototype,"tooltip",2);var{SeriesNodePickMode:Uc,createDatumId:ks,angleBetween:As,normalizeAngle360:av,isBetweenAngles:qc,Sector:nv,evaluateBezier:Ms,applyShapeStyle:jc,getShapeStyle:Is,getLabelStyles:rv,BBox:lv,mergeDefaults:Ls}=Bb,Ns=e=>e.startAngle+As(e.startAngle,e.endAngle)/2,Ts=class extends Hc{constructor(e){super({moduleCtx:e,pickModes:[Uc.NEAREST_NODE,Uc.EXACT_SHAPE_MATCH]}),this.properties=new Ee}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new zt}nodeFactory(){return new nv}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0},properties:o}=this,{fromKey:s,toKey:a,sizeKey:n,labelKey:r,label:{spacing:l,maxWidth:c,fontSize:p},node:{width:d,spacing:u}}=o,g=t/2,y=i/2;let m=[];const{nodeGraph:f,links:S}=this.getNodeGraph(T=>({...T,centerX:g,centerY:y,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),T=>({...T,centerX:g,centerY:y,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let D=0;f.forEach(({datum:T,linksBefore:O,linksAfter:E},C)=>{const w=O.reduce((F,{link:B})=>F+B.size,0)+E.reduce((F,{link:B})=>F+B.size,0);if(w===0)f.delete(C);else{const{label:F}=o;T.size=w,D+=T.size,T.label=F.enabled?this.getLabelText(T.label,T.datum,r,"label",[],F,{datum:T.datum,value:T.label,fromKey:s,toKey:a,sizeKey:n,size:T.size}):void 0}});let v=0;if(this.isLabelEnabled()){const T=Vb(this.properties.label);let O=0;f.forEach(({datum:E})=>{const{id:C,label:w}=E;if(w==null)return;const F=zb(w,{maxWidth:c,font:this.properties.label,textWrap:"never"}),{width:B}=T.measureText(F);O=Math.max(B,O),m.push({id:C,text:F,centerX:g,centerY:y,angle:NaN,radius:NaN,size:E.size})}),v=O+l}const x=f.size;let k=Math.min(t,i)/2-d-v,A=u/k;if(v!==0&&(x*A>=1.5*Math.PI||k<=0)&&(m=[],k=Math.min(t,i)/2-d,A=u/k),x*A>=2*Math.PI||k<=0){Gb.warnOnce("There was insufficient space to display the Chord Series.");return}const M=k,b=k+d,L=Math.max((2*Math.PI-x*A)/D,0);let I=0;f.forEach(({datum:T})=>{T.innerRadius=M,T.outerRadius=b,T.startAngle=I,T.endAngle=I+T.size*L,I=T.endAngle+A;const O=(T.innerRadius+T.outerRadius)/2,E=Ns(T);T.midPoint={x:T.centerX+O*Math.cos(E),y:T.centerY+O*Math.sin(E)}});const N=[];f.forEach(({datum:T,linksBefore:O,linksAfter:E})=>{const C=Ns(T),w=[...O.map(B=>({link:B.link,distance:As(Ns(B.node.datum),C),after:!1})),...E.map(B=>({link:B.link,distance:As(Ns(B.node.datum),C),after:!0}))];let F=T.startAngle;w.toSorted((B,V)=>B.distance-V.distance).forEach(({link:B,after:V})=>{const G=B.size*L;V?(B.startAngle1=F,B.endAngle1=F+G):(B.startAngle2=F,B.endAngle2=F+G),F+=B.size*L}),N.push(T)});const{tension:R}=this.properties.link;S.forEach(T=>{T.radius=k;const O=Xc({radius:k,startAngle:T.startAngle1,endAngle:T.endAngle2,tension:R}),E=Xc({radius:k,startAngle:T.startAngle2,endAngle:T.endAngle1,tension:R}),C=Ms(...O.x,.5),w=Ms(...O.y,.5),F=Ms(...E.x,.5),B=Ms(...E.y,.5);T.midPoint={x:T.centerX+(C+F)/2,y:T.centerY+(w+B)/2},N.push(T)}),m.forEach(T=>{const O=f.get(T.id)?.datum;O!=null&&(T.radius=b+l,T.angle=av(O.startAngle+As(O.startAngle,O.endAngle)/2))}),m.sort((T,O)=>T.angle-O.angle);let P=1/0,_=-1/0;return m=m.filter(T=>{const O=Kb(p),E=Math.atan2(O/2,T.radius),C=T.angle-E,w=T.angle+E;return qc(P,C,w)||qc(_,C,w)?!1:(P=Math.min(C,P),_=Math.max(w,_),!0)}),{itemId:e,nodeData:N,labelData:m}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const t={toKey:this.properties.toKey,fromKey:this.properties.fromKey,sizeKey:this.properties.sizeKey,size:NaN},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,{size:s,text:a,centerX:n,centerY:r,radius:l,angle:c})=>{t.size=s;const p=rv(this,void 0,t,this.properties.label,!1,i),{fontStyle:d,fontWeight:u,fontSize:g,fontFamily:y,color:m}=p;o.visible=!0,o.translationX=n+l*Math.cos(c),o.translationY=r+l*Math.sin(c),o.text=a,o.fill=m,o.fontStyle=d,o.fontWeight=u,o.fontSize=g,o.fontFamily=y,o.textBaseline="middle",Math.cos(c)>=0?(o.textAlign="left",o.rotation=c):(o.textAlign="right",o.rotation=c-Math.PI),o.setBoxing(p)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ks(t.type,t.id))}getNodeStyle({datumIndex:e,datum:t,size:i=0,label:o},s,a){const{id:n,properties:r}=this,{fills:l,strokes:c,fillGradientDefaults:p,fillPatternDefaults:d,fillImageDefaults:u}=r,{itemStyler:g}=r.node,y=this.getHighlightStyle(a,e),m=Ls(y,r.node.getStyle(l,c,s));let f=Is(m,p,d,u);if(g!=null&&e!=null){const S=this.ctx.highlightManager?.getActiveHighlight(),D=this.cachedDatumCallback(ks(e.index,"node",a?"highlight":"node"),()=>{const v=this.getHighlightStateString(S,a,e);return this.callWithContext(g,{seriesId:n,datum:t,highlighted:a,highlightState:v,...f,size:i,label:o})});D&&(f=Is(Ls(D,f),p,d,u))}return f.opacity=1,f}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,o=this.getShapeFillBBox();t.each((s,a)=>{const{datumIndex:n}=a,r=this.getNodeStyle(a,n.index,i);jc(s,r,o),s.centerX=a.centerX,s.centerY=a.centerY,s.innerRadius=a.innerRadius,s.outerRadius=a.outerRadius,s.startAngle=a.startAngle,s.endAngle=a.endAngle,s.inset=s.strokeWidth/2})}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ks(t.type,t.index,t.fromNode.id,t.toNode.id))}getLinkStyle({datumIndex:e,datum:t},i,o){const{id:s,properties:a}=this,{fills:n,strokes:r,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:p}=a,{itemStyler:d}=a.link,u=this.getHighlightStyle(o,e),g=Ls(u,a.link.getStyle(n,r,i.index));let y=Is(g,l,c,p);if(d!=null&&e!=null){const m=this.ctx.highlightManager?.getActiveHighlight(),f=this.cachedDatumCallback(ks(e.index,"link",o?"highlight":"node"),()=>{const S=this.getHighlightStateString(m,o,i);return this.callWithContext(d,{seriesId:s,datum:t,highlighted:o,highlightState:S,...y})});f&&(y=Is(Ls(f,y),l,c,p))}return y.opacity=1,y}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,o=this.getShapeFillBBox();t.each((s,a)=>{const n=a.fromNode.datumIndex,r=this.getLinkStyle(a,n,i);s.centerX=a.centerX,s.centerY=a.centerY,s.radius=a.radius,s.startAngle1=a.startAngle1,s.endAngle1=a.endAngle1,s.startAngle2=a.startAngle2,s.endAngle2=a.endAngle2,s.tension=r.tension,jc(s,r,o)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(e,t),o=(e-i)/2,s=(t-i)/2,a=new lv(o,s,e,t);return{series:a,axis:a}}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:o,properties:s,ctx:{formatManager:a}}=this,{fromKey:n,toKey:r,sizeKey:l,sizeName:c,tooltip:p}=s,d=this.contextNodeData?.nodeData.find(D=>D.datumIndex.type===e.type&&D.datumIndex.index===e.index);if(d==null)return;const u=d.type===0?d.fromNode.index:d.index,g=d.type===0?`${d.fromNode.label} - ${d.toNode.label}`:d.label,y=e.type===0?i?.dataSources.get(this.id)?.[e.index]:o?.dataSources.get(this.id)?.[e.index],m=d.size;let f;if(d.type===0){const D=d.fromNode.datumIndex;f=this.getLinkStyle({datumIndex:e,datum:y},D,!1)}else{const D=d.label;f=this.getNodeStyle({datumIndex:e,datum:y,size:m,label:D},e.index,!1)}const S=[];if(l!=null){const D=a.format(this.callWithContext.bind(this),{type:"number",value:m,datum:y,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});S.push({label:c,fallbackLabel:l,value:D??String(m)})}return this.formatTooltipWithContext(p,{title:g,symbol:this.legendItemSymbol(d.type,u,f),data:S},{seriesId:t,datum:y,title:g,fromKey:n,toKey:r,sizeKey:l,sizeName:c,size:m,...f})}computeFocusBounds(e){return e}hasItemStylers(){return this.properties.node.itemStyler!=null||this.properties.link.itemStyler!=null}};Ts.className="ChordSeries",Ts.type="chord";import{_ModuleSupport as cv}from"ag-charts-community";import{constant as hv,fillGradientDefaults as pv,fillImageDefaults as dv,fillPatternDefaults as uv,required as yn,string as Rs,undocumented as mn}from"ag-charts-core";var{commonSeriesOptionsDefs:gv,chordSeriesThemeableOptionsDef:yv}=cv,Cs={...yv,...gv,type:yn(hv("chord")),fromKey:yn(Rs),toKey:yn(Rs),sizeKey:Rs,sizeName:Rs};Cs.fillGradientDefaults=mn(pv),Cs.fillPatternDefaults=mn(uv),Cs.fillImageDefaults=mn(dv);var yR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],solo:!0,identifier:"chord",moduleFactory:e=>new Ts(e),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:Do.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:Do.FILL_PATTERN_DEFAULTS,fillImageDefaults:Do.FILL_IMAGE_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},highlight:Do.singleSeriesHighlightStyle(),label:{...Do.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]},tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},Jc={type:"series",name:"chord",chartType:"standalone",enterprise:!0,options:Cs,create:e=>new Ts(e)};import{_ModuleSupport as Xi}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Yi,CARTESIAN_POSITION:Ui},ThemeSymbols:{DEFAULT_SHADOW_COLOUR:mv}}=Xi,qi={$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},Zc={autoRotate:{$path:"/series/0/stageLabel/autoRotate"},autoRotateAngle:{$path:"/series/0/stageLabel/autoRotateAngle"},avoidCollisions:{$path:["/series/0/stageLabel/avoidCollisions",!0]},border:{$path:["/series/0/stageLabel/border"]},color:{$path:["/series/0/stageLabel/color",{$ref:"textColor"}]},cornerRadius:{$path:["/series/0/stageLabel/cornerRadius"]},enabled:{$if:[{$eq:[{$path:"/series/0/stageLabel/enabled"},void 0]},!0,{$path:"/series/0/stageLabel/enabled"}]},fill:{$path:["/series/0/stageLabel/fill"]},fillOpacity:{$path:["/series/0/stageLabel/fillOpacity"]},fontSize:{$path:["/series/0/stageLabel/fontSize",{$ref:"fontSize"}]},fontStyle:{$path:["/series/0/stageLabel/fontStyle",{$ref:"fontStyle"}]},fontWeight:{$path:["/series/0/stageLabel/fontWeight",{$ref:"fontWeight"}]},format:{$path:"/series/0/stageLabel/format"},formatter:{$path:"/series/0/stageLabel/formatter"},itemStyler:{$path:"/series/0/stageLabel/itemStyler"},minSpacing:{$path:"/series/0/stageLabel/minSpacing"},padding:{$path:["/series/0/stageLabel/padding"]},rotation:{$path:["/series/0/stageLabel/rotation",0]}},fR=[{type:{$if:[qi,Yi.NUMBER,Yi.CATEGORY]},position:{$if:[qi,Ui.LEFT,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"after"]},Ui.RIGHT,Ui.LEFT]}]},label:{$if:[qi,void 0,Zc]}},{type:{$if:[qi,Yi.CATEGORY,Yi.NUMBER]},position:{$if:[qi,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"before"]},Ui.TOP,Ui.BOTTOM]},Ui.BOTTOM]},label:{$if:[qi,Zc,void 0]}}],SR={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacingRatio:.25,fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},[{$path:["/0",void 0,{$palette:"fills"}]}],{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",Xi.FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS],["pattern",Xi.FILL_PATTERN_SINGLE_DEFAULTS],["image",Xi.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},[{$path:["/0",void 0,{$palette:"strokes"}]}]]},label:{...Xi.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:{$isUserOption:["./stroke",2,0]}},shadow:{enabled:!1,color:mv,xOffset:3,yOffset:3,blur:5},highlight:Xi.singleSeriesHighlightStyle()},axes:{[Yi.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[Yi.CATEGORY]:{line:{enabled:!1}}}};import{_ModuleSupport as fv}from"ag-charts-community";import{_ModuleSupport as fn}from"ag-charts-community";import{_ModuleSupport as Sv}from"ag-charts-community";var{lineDistanceSquared:Ps,BBox:xv,Path:bv,SceneChangeDetection:qt}=Sv,Qc=1e-6;function eh([e,t],[i,o]){return Math.abs(e-i)<=Qc&&Math.abs(t-o)<=Qc}var Pt=class extends bv{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:e,y0:t,x1:i,y1:o,x2:s,y2:a,x3:n,y3:r}=this;return{x:(e+i+s+n)/4,y:(t+o+a+r)/4}}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const{x0:i,y0:o,x1:s,y1:a,x2:n,y2:r,x3:l,y3:c}=this;return Math.min(Ps(e,t,i,o,s,a,1/0),Ps(e,t,s,a,n,r,1/0),Ps(e,t,n,r,l,c,1/0),Ps(e,t,l,c,i,o,1/0))}computeBBox(){const{x0:e,y0:t,x1:i,y1:o,x2:s,y2:a,x3:n,y3:r}=this,l=Math.min(e,i,s,n),c=Math.max(e,i,s,n)-l,p=Math.min(t,o,a,r),d=Math.max(t,o,a,r)-p;return new xv(l,p,c,d)}updatePath(){const{path:e,x0:t,y0:i,x1:o,y1:s,x2:a,y2:n,x3:r,y3:l}=this,c=[[t,i],[o,s],[a,n],[r,l]];e.clear();let p,d;c.forEach(u=>{if(p!=null&&eh(p,u)||d!=null&&eh(d,u))return;const[g,y]=u;p==null?e.moveTo(g,y):e.lineTo(g,y),p??(p=u),d=u}),e.closePath()}};h([qt()],Pt.prototype,"x0",2),h([qt()],Pt.prototype,"y0",2),h([qt()],Pt.prototype,"x1",2),h([qt()],Pt.prototype,"y1",2),h([qt()],Pt.prototype,"x2",2),h([qt()],Pt.prototype,"y2",2),h([qt()],Pt.prototype,"x3",2),h([qt()],Pt.prototype,"y3",2);import{_ModuleSupport as vv}from"ag-charts-community";var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:Dv}=vv;function th(e,t,i,o){const{x0:s,y0:a,x1:n,y1:r,x2:l,y2:c,x3:p,y3:d,opacity:u}=e;return i?{x0:(s+p)/2,y0:(a+d)/2,x1:(n+l)/2,y1:(r+c)/2,x2:(n+l)/2,y2:(r+c)/2,x3:(s+p)/2,y3:(a+d)/2,opacity:u}:{x0:(s+n)/2,y0:(a+r)/2,x1:(s+n)/2,y1:(a+r)/2,x2:(l+p)/2,y2:(c+d)/2,x3:(l+p)/2,y3:(c+d)/2,opacity:u}}function kv(e,t){const i=a=>a==null;return{fromFn:(a,n,r)=>{r==="updated"&&i(n)?r="removed":r==="updated"&&i(a.previousDatum)&&(r="added");let l;r==="added"&&a.previousDatum==null&&t==="fade"?l={...ko(a,n),opacity:0}:r==="unknown"||r==="added"?l=th(n,a.previousDatum,e,t):l={x0:a.x0,y0:a.y0,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,x3:a.x3,y3:a.y3,opacity:a.opacity};const c=Dv[r];return{...l,phase:c}},toFn:(a,n,r)=>{let l;return r==="removed"&&a.datum==null&&t==="fade"?l={...ko(a,n),opacity:0}:r==="removed"||i(n)?l=th(n,a.previousDatum,e,t):l=ko(a,n),l}}}function ko(e,t){const{x0:i,y0:o,x1:s,y1:a,x2:n,y2:r,x3:l,y3:c,opacity:p}=t;return{x0:i,y0:o,x1:s,y1:a,x2:n,y2:r,x3:l,y3:c,opacity:p}}var{SeriesNodePickMode:ih,SeriesZIndexMap:oh,valueProperty:Av,keyProperty:Mv,ChartAxisDirection:Iv,updateLabelNode:Lv,SMALLEST_KEY_INTERVAL:Nv,LARGEST_KEY_INTERVAL:Tv,diff:Rv,fixNumericExtent:Cv,seriesLabelFadeInAnimation:sh,resetMotion:Pv,resetLabelFn:_v,animationValidation:Ev,computeBarFocusBounds:wv,ContinuousScale:Ov,Group:Fv,Selection:Bv,PointerEvents:ah,motion:Gv,checkCrisp:Vv,createDatumId:Kv,applyShapeStyle:zv}=fn,Wv=class extends fn.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.stageKey,this.yKey=o.properties.valueKey}},nh=class extends fn.AbstractBarSeries{constructor({moduleCtx:e,animationResetFns:t}){super({moduleCtx:e,pickModes:[ih.AXIS_ALIGNED,ih.EXACT_SHAPE_MATCH],propertyKeys:{x:["stageKey"],y:["valueKey"]},propertyNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:t.datum,label:_v}}),this.NodeEvent=Wv,this.connectorNodeGroup=this.contentGroup.appendChild(new Fv({name:`${this.id}-series-connectorNodes`,zIndex:oh.BACKGROUND})),this.connectorSelection=Bv.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=ah.None}get pickModeAxis(){return"main-category"}setZIndex(e){return super.setZIndex(e),this.connectorNodeGroup.zIndex=[oh.BACKGROUND,e],!0}isVertical(){return!super.isVertical()}connectionFactory(){return new Pt}async processData(e){const{stageKey:t,valueKey:i}=this.properties,{visible:o,id:s}=this,a=(y,m,f)=>o&&this.ctx.legendManager.getItemEnabled({seriesId:s,itemId:f}),n=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:n,yScale:r}),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(Rv(this.id,this.processedData)),d.push(Ev()));const u=this.visible?{}:{forceValue:0},{processedData:g}=await this.requestDataModel(e,this.data,{props:[Mv(t,c,{id:"xValue"}),Av(i,p,{id:"yValue",...u,validation:a,invalidValue:0}),...l?[Nv,Tv]:[],...d],groupByKeys:!1});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.largestDataInterval=g.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,id:o,ctx:{legendManager:s}}=this;if(!t||!i)return[];const{keys:[a]}=t.domain;if(e===this.getCategoryDirection()){const n=i.resolveProcessedDataDefById(this,"xValue");return n?.def.type==="key"&&n?.def.valueType==="category"?this.hasData?a.filter((r,l)=>s.getItemEnabled({seriesId:o,itemId:l})):[]:this.padBandExtent(a)}else{const n=this.domainForClippedRange(e,["yValue"],"xValue"),r=Math.max(...n),l=[-r,r];return Cv(l)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{hasData:e,data:t,dataModel:i,groupScale:o,processedData:s,id:a,ctx:{legendManager:n}}=this,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(e&&t&&r&&l&&i&&s?.type==="ungrouped"))return;const c=r.scale,p=l.scale,d=this.getBarDirection()===Iv.X,{stageKey:u,valueKey:g}=this.properties,y=`${g}`,m={itemId:y,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible},f=this.visible;if(!f)return m;const S=i.resolveKeysById(this,"xValue",s),D=i.resolveColumnById(this,"yValue",s),{barWidth:v,groupIndex:x}=this.updateGroupScale(r),k=Ov.is(c)?v*-.5:0,A=Vv(r?.scale,r?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let M;return(s.dataSources.get(this.id)??[]).forEach((L,I)=>{const N=f&&n.getItemEnabled({seriesId:a,itemId:I}),R=S[I];if(R==null)return;const P=Math.round(c.convert(R))+o.convert(String(x))+k,_=D[I],T=Math.round(p.convert(-_)),O=Math.round(p.convert(_)),E=this.getItemStyle({datum:L,datumIndex:I},!1),C=Math.max(E.strokeWidth??0,Math.abs(O-T)),w={x:d?Math.min(O,T):P,y:d?P:Math.min(O,T),width:d?C:v,height:d?v:C},F={x:w.x+w.width/2,y:w.y+w.height/2},B=this.createLabelData({datumIndex:I,rect:w,barAlongX:d,yDatum:_,datum:L,visible:N}),V={index:I,series:this,itemId:y,datum:L,datumIndex:I,xValue:R,yValue:_,xKey:u,yKey:g,x:w.x,y:w.y,width:w.width,height:w.height,midPoint:F,crisp:A,label:B,visible:N};if(m.nodeData.push(V),B!=null&&m.labelData.push(B),M!=null){const G=M.rect,K=M.nodeDatum,W=M.datumIndex;d?m.connectorData.push({datum:K,datumIndex:W,x0:G.x,y0:G.y+G.height,x1:G.x+G.width,y1:G.y+G.height,x2:w.x+w.width,y2:w.y,x3:w.x,y3:w.y,opacity:1}):m.connectorData.push({datum:K,datumIndex:W,x0:G.x+G.width,y0:G.y,x1:w.x,y1:w.y,x2:w.x,y2:w.y+w.height,x3:G.x+G.width,y3:G.y+G.height,opacity:1})}N&&(M={itemId:y,rect:w,nodeDatum:V,datumIndex:I})}),m}updateNodes(e,t){super.updateNodes(e,t);const{connectorSelection:i}=this,o=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:i,connectorData:o}),this.updateConnectorNodes({connectorSelection:i})}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,o=t??[];return i.update(o,void 0,s=>this.getDatumId(s))}updateConnectorSelection(e){const{connectorData:t,connectorSelection:i}=e;return i.update(this.connectorEnabled()?t:[],void 0,o=>this.getDatumId(o.datum))}updateConnectorNodes(e){const t=this.getShapeFillBBox();e.connectorSelection.each((i,o)=>{const{fill:s,fillOpacity:a,stroke:n,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:p}=this.connectorStyle(o.datumIndex);i.setProperties(ko(i,o)),zv(i,{fill:s,stroke:n,fillOpacity:a,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:p},t)})}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=ah.None})}updateLabelNodes(e){const t={stageKey:this.properties.stageKey,valueKey:this.properties.valueKey},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,s)=>{o.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,Lv(this,o,t,this.properties.label,s,!1,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s}=this,{stageKey:a,valueKey:n,tooltip:r,legendItemName:l}=s,c=this.getCategoryAxis(),p=this.getValueAxis();if(!i||!o||!c||!p)return;const d=o.dataSources.get(this.id)?.[e],u=i.resolveKeysById(this,"xValue",o)[e],g=i.resolveColumnById(this,"yValue",o)[e];if(u!=null)return this.formatTooltipWithContext(r,{symbol:this.legendItemSymbol(e),data:[{label:this.getAxisValueText(c,"tooltip",u,d,a,l),value:this.getAxisValueText(p,"tooltip",g,d,n,l)}]},{seriesId:t,datum:d,title:a,stageKey:a,valueKey:n,...this.tooltipStyle(d,e)})}resetAllAnimation(e){super.resetAllAnimation(e),Pv([this.connectorSelection],ko)}animateEmptyUpdateReady({labelSelection:e}){const{connectorSelection:t}=this,i=this.isVertical(),s=kv(i,"normal");Gv.fromToMotion(this.id,"connectors",this.ctx.animationManager,[t],s),sh(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(e){const{labelSelection:t}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id),sh(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return Kv(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return wv(this,this.contextNodeData?.nodeData[e])}legendItemSymbol(e){const{strokeWidth:t,fillOpacity:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,fill:n,stroke:r}=this.properties.getStyle(e);return{marker:{fill:n,fillOpacity:i,stroke:r,strokeWidth:t,strokeOpacity:o,lineDash:s,lineDashOffset:a}}}getLegendData(e){const{id:t,processedData:i,dataModel:o,ctx:{legendManager:s},visible:a}=this;if(!o||!i||e!=="category")return[];const{showInLegend:n}=this.properties,r=o.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)??[]).map((l,c)=>{const p=r[c];if(p!=null)return{legendType:"category",id:t,datum:l,itemId:c,seriesId:t,enabled:a&&s.getItemEnabled({seriesId:t,itemId:c}),label:{text:String(p)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!n}}).filter(l=>l!=null)}hasItemStylers(){return this.properties.itemStyler!=null}};import{_ModuleSupport as $v}from"ag-charts-community";var{Label:Hv,AbstractBarSeriesProperties:Xv,makeSeriesTooltip:Yv,AxisLabel:Uv,Property:Ze}=$v,Sn=class extends Hv{constructor(){super(...arguments),this.spacing=0}};h([Ze],Sn.prototype,"placement",2),h([Ze],Sn.prototype,"spacing",2);var rh=class extends Uv{};h([Ze],rh.prototype,"placement",2);var lt=class extends Xv{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new Sn,this.stageLabel=new rh,this.tooltip=Yv()}getStyle(e){const{fills:t,strokes:i,fillOpacity:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this;return{fill:t[e],fillOpacity:o,stroke:i[e],strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,opacity:1}}};h([Ze],lt.prototype,"stageKey",2),h([Ze],lt.prototype,"valueKey",2),h([Ze],lt.prototype,"fills",2),h([Ze],lt.prototype,"fillOpacity",2),h([Ze],lt.prototype,"strokes",2),h([Ze],lt.prototype,"strokeWidth",2),h([Ze],lt.prototype,"strokeOpacity",2),h([Ze],lt.prototype,"lineDash",2),h([Ze],lt.prototype,"lineDashOffset",2),h([Ze],lt.prototype,"label",2),h([Ze],lt.prototype,"stageLabel",2),h([Ze],lt.prototype,"tooltip",2);function lh(e,{x:t,y:i,width:o,height:s,opacity:a}){return{x1:t,y1:i,x2:t+o,y2:i+s,opacity:a??1}}var{Line:qv,ChartAxisDirection:jv}=fv,xn=class extends nh{constructor(e){super({moduleCtx:e,animationResetFns:{datum:lh}}),this.properties=new lt}get hasData(){const{id:e,ctx:{legendManager:t}}=this,i=this.data?.reduce((o,s,a)=>o+(t.getItemEnabled({seriesId:e,itemId:a})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}getItemStyle({datumIndex:e},t){return this.properties.getStyle(e)}connectorStyle(e){return this.properties.getStyle(e)}nodeFactory(){return new qv}createLabelData({datumIndex:e,rect:t,barAlongX:i,yDatum:o,datum:s,visible:a}){const{stageKey:n,valueKey:r,label:l}=this.properties,{spacing:c,placement:p}=l;if(!l.enabled)return;let d,u,g,y;if(i)switch(d=t.x+t.width/2,g="center",p){case"before":u=t.y-c,y="bottom";break;case"after":u=t.y+t.height+c,y="top";break;default:u=t.y+t.height/2,y="middle"}else switch(u=t.y+t.height/2,y="middle",p){case"before":d=t.x-c,g="right";break;case"after":d=t.x+t.width+c,g="left";break;default:d=t.x+t.width/2,g="center"}const m=this.getSeriesDomain(jv.Y),f=this.getLabelText(o,s,r,"y",m,l,{itemId:r,value:o,datum:s,stageKey:n,valueKey:r});return{x:d,y:u,textAlign:g,textBaseline:y,text:f,itemId:r,datum:s,datumIndex:e,series:this,visible:a}}updateDatumNodes(e){const t=this.getHighlightStyle(e.isHighlight);e.datumSelection.each((i,o)=>{i.setProperties(lh(i,o)),i.stroke=t?.stroke,i.strokeWidth=t?.strokeWidth??0,i.strokeOpacity=t?.strokeOpacity??1,i.lineDash=t?.lineDash,i.lineDashOffset=t?.lineDashOffset??0,i.opacity=t?.opacity??1})}tooltipStyle(e,t){const{fill:i,stroke:o,fillOpacity:s,strokeOpacity:a,strokeWidth:n,lineDash:r,lineDashOffset:l}=this.properties.getStyle(t);return{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:n,lineDash:r,lineDashOffset:l}}hasItemStylers(){return this.properties.label.itemStyler!=null}};xn.className="ConeFunnelSeries",xn.type="cone-funnel";import{_ModuleSupport as Jv}from"ag-charts-community";import{constant as Zv,required as bn,string as ch}from"ag-charts-core";var{commonSeriesOptionsDefs:Qv,coneFunnelSeriesThemeableOptionsDef:eD,without:tD}=Jv,iD={...tD(Qv,["showInLegend"]),...eD,type:bn(Zv("cone-funnel")),stageKey:bn(ch),valueKey:bn(ch)};import{_ModuleSupport as jt}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:hh}}=jt,LR={series:{direction:"vertical",fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},jt.SAFE_RANGE2_OPERATION]},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",jt.FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS],["pattern",jt.FILL_PATTERN_SINGLE_DEFAULTS],["image",jt.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},jt.SAFE_RANGE2_OPERATION]}]},strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{...jt.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:jt.singleSeriesHighlightStyle(!1)},seriesArea:{padding:{top:20,bottom:20}},axes:{[hh.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[hh.CATEGORY]:{line:{enabled:!1}}}},ph={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:iD,create:e=>new xn(e)};import{_ModuleSupport as oD}from"ag-charts-community";import{_ModuleSupport as sD}from"ag-charts-community";var{Label:aD,DropShadow:nD,AbstractBarSeriesProperties:rD,BaseProperties:lD,makeSeriesTooltip:cD,AxisLabel:hD,Property:me}=sD,pD=class extends aD{},dh=class extends hD{};h([me],dh.prototype,"placement",2);var Wt=class extends lD{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{fill:e,stroke:t,fillOpacity:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=this;return{fill:e,fillOpacity:i,stroke:t,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,opacity:1}}};h([me],Wt.prototype,"enabled",2),h([me],Wt.prototype,"fill",2),h([me],Wt.prototype,"fillOpacity",2),h([me],Wt.prototype,"stroke",2),h([me],Wt.prototype,"strokeWidth",2),h([me],Wt.prototype,"strokeOpacity",2),h([me],Wt.prototype,"lineDash",2),h([me],Wt.prototype,"lineDashOffset",2);var We=class extends rD{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new Wt,this.shadow=new nD().set({enabled:!1}),this.label=new pD,this.stageLabel=new dh,this.tooltip=cD()}getStyle(e){const{fills:t,strokes:i,fillOpacity:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this;return{fill:t[e],fillOpacity:o,stroke:i[e],strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,opacity:1}}};h([me],We.prototype,"stageKey",2),h([me],We.prototype,"valueKey",2),h([me],We.prototype,"fills",2),h([me],We.prototype,"fillOpacity",2),h([me],We.prototype,"strokes",2),h([me],We.prototype,"strokeWidth",2),h([me],We.prototype,"strokeOpacity",2),h([me],We.prototype,"lineDash",2),h([me],We.prototype,"lineDashOffset",2),h([me],We.prototype,"spacingRatio",2),h([me],We.prototype,"itemStyler",2),h([me],We.prototype,"dropOff",2),h([me],We.prototype,"shadow",2),h([me],We.prototype,"label",2),h([me],We.prototype,"stageLabel",2),h([me],We.prototype,"tooltip",2);var{ChartAxisDirection:uh,resetBarSelectionsFn:dD,prepareBarAnimationFunctions:gh,midpointStartingBarPosition:yh,createDatumId:uD,Rect:gD,motion:mh,applyShapeStyle:yD,mergeDefaults:vn}=oD,Dn=class extends nh{constructor(e){super({moduleCtx:e,animationResetFns:{datum:dD}}),this.properties=new We}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}connectorStyle(e){return vn(this.properties.dropOff.getStyle(),this.properties.getStyle(e))}nodeFactory(){return new gD}createLabelData({datumIndex:e,rect:t,yDatum:i,datum:o,visible:s}){const{valueKey:a,stageKey:n,label:r}=this.properties;if(!r.enabled)return;const l=this.getSeriesDomain(uh.Y),c=this.getLabelText(i,o,a,"y",l,r,{itemId:a,value:i,datum:o,stageKey:n,valueKey:a});return{x:t.x+t.width/2,y:t.y+t.height/2,textAlign:"center",textBaseline:"middle",text:c,itemId:n,datum:o,datumIndex:e,series:this,visible:s}}getItemStyle({datum:e,datumIndex:t},i){const{id:o,properties:s}=this,{stageKey:a,valueKey:n,itemStyler:r}=s,l=this.getHighlightStyle(i,t);let p=vn(l,s.getStyle(t));if(r!=null){const d=this.ctx.highlightManager?.getActiveHighlight(),u=this.cachedDatumCallback(uD(t,i?"highlight":"node"),()=>{const g=this.getHighlightStateString(d,i,t);return this.callWithContext(r,{seriesId:o,datum:e,highlighted:i,highlightState:g,stageKey:a,valueKey:n,...p})});u&&(p=vn(u,p))}return p}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const{shadow:o}=this.properties,s=this.getCategoryDirection()===uh.X,a=this.getShapeFillBBox();e.each((n,r)=>{const l=this.getItemStyle(r,t);yD(n,l,a),n.visible=s?r.width>0:r.height>0,n.crisp=r.crisp,n.fillShadow=o})}tooltipStyle(e,t){return this.getItemStyle({datum:e,datumIndex:t},!1)}animateEmptyUpdateReady(e){super.animateEmptyUpdateReady(e);const{datumSelection:t}=e,i=this.isVertical(),s=gh(yh(i,"normal"),"unknown");mh.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e);const{datumSelection:t}=e,{processedData:i}=this,o=i?.reduced?.diff?.[this.id],s=gh(yh(this.isVertical(),"fade"),"added");mh.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s,(a,n)=>n.xValue,o)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};Dn.className="FunnelSeries",Dn.type="funnel";import{_ModuleSupport as mD}from"ag-charts-community";import{constant as fD,required as kn,string as fh}from"ag-charts-core";var{commonSeriesOptionsDefs:SD,funnelSeriesThemeableOptionsDef:xD,without:bD}=mD,vD={...xD,...bD(SD,["showInLegend"]),type:kn(fD("funnel")),stageKey:kn(fh),valueKey:kn(fh)},Sh={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:vD,create:e=>new Dn(e)};import{_ModuleSupport as Ao}from"ag-charts-community";import{_ModuleSupport as ji}from"ag-charts-community";import{cachedTextMeasurer as xh}from"ag-charts-core";import{_ModuleSupport as DD}from"ag-charts-community";function An(e,t,i){return DD.callWithContext(e.chartService,t,i)}var bh=class{*[Symbol.iterator](){const{node:e,datum:t}=this;e&&t&&(yield{node:e,datum:t})}nodes(){return this.node?[this.node]:[]}update(e,t,i,o){const s=e.nodes();if(s.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,t.appendChild(this.node));const a=s[0],n=s.toReversed().find(r=>r.datum.datum.value>r.datum.datum.segmentStart)??s[s.length-1];this.node.datum=this.datum=a.datum,o(this.node,a,n)}}},vh={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function Dh(e,t){if(e==null)return"";const{min:i,max:o}=t,s=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,a=o!==0?Math.ceil(Math.log10(Math.abs(o))):0,n=Math.max(2-Math.max(s,a),0);return e.toFixed(n)}function Mo(e,t,i,o){if(i.text!=null)return i.text;const s=o??i.value;let a;if(i?.formatter!=null&&(a=An(t,i.formatter,{seriesId:e,datum:void 0,value:s})),a!=null)return String(a)}function kh({path:e,x:t,y:i,size:o}){e.moveTo(t,i-o/2),e.lineTo(t,i+o/2)}import{clamp as Ah,iterate as kD}from"ag-charts-core";function Mh(e,t){const i=kD(e.datumUnion.nodes(),e.targetSelection.nodes());return e.pickNodeNearestDistantObject(t,i)}function Ih(e,t){const i=[{data:e.contextNodeData?.nodeData,selection:e.datumUnion},{data:e.contextNodeData?.targetData,selection:e.targetSelection}].filter(l=>l.data&&l.data.length>0),o=Ah(0,t.otherIndex+t.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:s,selection:a}=i[o];if(s==null||s.length===0)return;const n=Ah(0,t.datumIndex,s.length-1),r=s[n];for(const l of a)if(l.datum===r)return{bounds:l.node,clipFocusBox:!0,datum:r,datumIndex:n,otherIndex:o}}import{_ModuleSupport as Mn}from"ag-charts-community";import{_ModuleSupport as AD}from"ag-charts-community";import{Logger as MD}from"ag-charts-core";var{BaseProperties:Lh,Property:Ji}=AD,_s=class extends Lh{getSegments(e,t){const{values:i,step:o,count:s}=this,a=Math.min(...e.domain),n=Math.max(...e.domain);let r;if(i!=null){const l=i.filter(c=>c>a&&c<n).sort((c,p)=>c-p);r=[a,...l,n]}else if(o!=null){const l=[];for(let c=a;c<n;c+=o)l.push(c);l.push(n),r=l}else if(s!=null){const l=s+1;r=Array.from({length:l+1},(c,p)=>p/l*(n-a)+a)}else{const l=e.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.filter(c=>c>a&&c<n);r=l!=null?[a,...l,n]:void 0}return r!=null&&r.length>t&&(MD.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),r=void 0),r??(r=[a,n]),r}};h([Ji],_s.prototype,"values",2),h([Ji],_s.prototype,"step",2),h([Ji],_s.prototype,"count",2);var Io=class extends Lh{constructor(){super(...arguments),this.enabled=!1,this.interval=new _s,this.spacing=0}};h([Ji],Io.prototype,"enabled",2),h([Ji],Io.prototype,"interval",2),h([Ji],Io.prototype,"spacing",2);var{BaseProperties:Es,makeSeriesTooltip:ID,SeriesProperties:LD,PropertiesArray:In,Property:X,Label:ND,AxisLabel:TD,getColorStops:RD}=Mn,Nh=class extends ND{};h([X],Nh.prototype,"spacing",2);var $e=class extends Es{constructor(){super(...arguments),this.value=0,this.label=new Nh}getStyle(e){const{fill:t=e.fill??"black",fillOpacity:i=e.fillOpacity??1,stroke:o=e.stroke??"black",strokeWidth:s=e.strokeWidth??0,strokeOpacity:a=e.strokeOpacity??1,lineDash:n=e.lineDash??[0],lineDashOffset:r=e.lineDashOffset??0}=this;return{fill:t,fillOpacity:i,stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}}};h([X],$e.prototype,"text",2),h([X],$e.prototype,"value",2),h([X],$e.prototype,"shape",2),h([X],$e.prototype,"placement",2),h([X],$e.prototype,"spacing",2),h([X],$e.prototype,"size",2),h([X],$e.prototype,"rotation",2),h([X],$e.prototype,"fill",2),h([X],$e.prototype,"fillOpacity",2),h([X],$e.prototype,"stroke",2),h([X],$e.prototype,"strokeWidth",2),h([X],$e.prototype,"strokeOpacity",2),h([X],$e.prototype,"lineDash",2),h([X],$e.prototype,"lineDashOffset",2),h([X],$e.prototype,"label",2);var ct=class extends Es{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new In(Mn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t,i){const{fill:o,fills:s,fillMode:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:p,lineDashOffset:d}=this;return{fill:o??Rh(s,a,e,i,t),fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:p,lineDashOffset:d}}};h([X],ct.prototype,"enabled",2),h([X],ct.prototype,"thickness",2),h([X],ct.prototype,"thicknessRatio",2),h([X],ct.prototype,"fills",2),h([X],ct.prototype,"fillMode",2),h([X],ct.prototype,"fill",2),h([X],ct.prototype,"fillOpacity",2),h([X],ct.prototype,"stroke",2),h([X],ct.prototype,"strokeWidth",2),h([X],ct.prototype,"strokeOpacity",2),h([X],ct.prototype,"lineDash",2),h([X],ct.prototype,"lineDashOffset",2);var Lo=class extends Es{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};h([X],Lo.prototype,"values",2),h([X],Lo.prototype,"step",2),h([X],Lo.prototype,"minSpacing",2),h([X],Lo.prototype,"maxSpacing",2);var Th=class extends TD{constructor(){super(...arguments),this.placement=void 0}};h([X],Th.prototype,"placement",2);var qe=class extends Es{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new In(Mn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Lo,this.label=new Th}getStyle(e,t,i,o){const{fill:s,fills:a,defaultFill:n,fillMode:r,fillOpacity:l,stroke:c,strokeWidth:p,strokeOpacity:d,lineDash:u,lineDashOffset:g}=this;return{fill:s??(e&&a.length===0?n:void 0)??Rh(a,r,t,o,i),fillOpacity:l,stroke:c,strokeWidth:p,strokeOpacity:d,lineDash:u,lineDashOffset:g}}};h([X],qe.prototype,"min",2),h([X],qe.prototype,"max",2),h([X],qe.prototype,"fills",2),h([X],qe.prototype,"fillMode",2),h([X],qe.prototype,"fill",2),h([X],qe.prototype,"fillOpacity",2),h([X],qe.prototype,"stroke",2),h([X],qe.prototype,"strokeWidth",2),h([X],qe.prototype,"strokeOpacity",2),h([X],qe.prototype,"lineDash",2),h([X],qe.prototype,"lineDashOffset",2),h([X],qe.prototype,"defaultFill",2),h([X],qe.prototype,"interval",2),h([X],qe.prototype,"label",2);var ws=class extends Rt{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};h([X],ws.prototype,"text",2),h([X],ws.prototype,"placement",2),h([X],ws.prototype,"avoidCollisions",2);var je=class extends LD{constructor(){super(...arguments),this.value=0,this.segmentation=new Io,this.defaultColorRange=[],this.targets=new In($e),this.defaultTarget=new $e,this.defaultScale=new qe,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new qe,this.bar=new ct,this.label=new ws,this.tooltip=ID()}};h([X],je.prototype,"value",2),h([X],je.prototype,"segmentation",2),h([X],je.prototype,"defaultColorRange",2),h([X],je.prototype,"targets",2),h([X],je.prototype,"defaultTarget",2),h([X],je.prototype,"defaultScale",2),h([X],je.prototype,"direction",2),h([X],je.prototype,"thickness",2),h([X],je.prototype,"cornerRadius",2),h([X],je.prototype,"cornerMode",2),h([X],je.prototype,"margin",2),h([X],je.prototype,"scale",2),h([X],je.prototype,"bar",2),h([X],je.prototype,"label",2),h([X],je.prototype,"tooltip",2);function Rh(e,t,i,o,s){return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:RD(e,i,o.domain,t),rotation:s?90:0,bounds:"series"}}import{_ModuleSupport as CD}from"ag-charts-community";import{cachedTextMeasurer as PD}from"ag-charts-core";var{BBox:_D}=CD;function Ln(e){const{x0:t,y0:i,x1:o,y1:s,horizontalInset:a,verticalInset:n}=e,r=Math.min(t,o)+a,l=Math.min(i,s)+n,c=Math.max(Math.abs(o-t)-2*a,0),p=Math.max(Math.abs(s-i)-2*n,0);return{x:r,y:l,width:c,height:p}}function ED(e,t){if(t==null)return!0;const i=Ln(e),o=1e-6,s=i.x+o,a=i.y+o,n=i.x+i.width-o,r=i.y+i.height-o,l=t.x,c=t.x+t.width,p=t.y,d=t.y+t.height;return Math.max(s,l)<=Math.min(n,c)&&Math.max(a,p)<=Math.min(r,d)}function Nn(e){const{clipX0:t,clipX1:i,clipY0:o,clipY1:s}=e;return t!=null&&i!=null||o!=null&&s!=null}function wD(e){if(!Nn(e))return;const{x0:t,y0:i,x1:o,y1:s}=e,{x:a,y:n,width:r,height:l}=Ln(e);let{clipX0:c,clipX1:p,clipY0:d,clipY1:u}=e;(c==null||p==null)&&(c=t,p=o),(d==null||u==null)&&(d=i,u=s);const g=Math.min(c,p),y=Math.min(d,u),m=Math.abs(p-c),f=Math.abs(u-d);return c=Math.max(a,g),d=Math.max(n,y),p=Math.min(a+r,g+m),u=Math.min(n+l,y+f),new _D(Math.min(c,p),Math.min(d,u),Math.abs(p-c),Math.abs(u-d))}function Ch(e,t){const i=e?"initial":"update";return{node:{fromFn(s,a){const n=s.previousDatum;let{x0:r,y0:l,x1:c,y1:p,clipX0:d,clipY0:u,clipX1:g,clipY1:y}=n??a;const{horizontalInset:m,verticalInset:f}=a,S=n!=null&&Nn(n),D=Nn(a);return S&&D||(!S&&D?({x0:r,y0:l,x1:c,y1:p,clipX0:d,clipY0:u,clipX1:g,clipY1:y}=a,e&&(t?g=a.clipX0:y=a.clipY0)):S&&!D?({x0:r,y0:l,x1:c,y1:p}=a,d=void 0,u=void 0,g=void 0,y=void 0):e&&(t?c=r:p=l)),{x0:r,y0:l,x1:c,y1:p,clipX0:d,clipY0:u,clipX1:g,clipY1:y,horizontalInset:m,verticalInset:f,phase:i}},toFn(s,a){const{x0:n,y0:r,x1:l,y1:c,clipX0:p,clipY0:d,clipX1:u,clipY1:g,horizontalInset:y,verticalInset:m}=a;return{x0:n,y0:r,x1:l,y1:c,clipX0:p,clipY0:d,clipX1:u,clipY1:g,horizontalInset:y,verticalInset:m}},applyFn(s,a){s.setProperties(No(s,a))}}}}function No(e,t){const{x:i,y:o,width:s,height:a}=Ln(t),n=wD(t),r=ED(t,n);return{x:i,y:o,width:s,height:a,clipBBox:n,visible:r}}var OD={Before:"right",Center:"center",After:"left"},FD={Before:"top",Center:"middle",After:"bottom"},BD={Before:-1,Center:-.5,After:0},GD={Before:0,Center:-.5,After:-1};function VD(e,t,i,o,s,a){const{seriesRect:n,gaugeRect:r,barRect:l}=s,{padding:c,horizontal:p}=o;i.each((d,u)=>{const g=Mo(e.id,t,u,a?.label);let y,m;u.placement==="outside-start"?p?(y=r.x,m=n.height):(y=n.width,m=n.height-(r.y+r.height)):u.placement==="outside-end"?p?(y=n.width-(r.x+r.width),m=n.height):(y=n.width,m=r.y):u.avoidCollisions&&(y=r.width,m=r.height);let f;if(g==null)return;if(y!=null&&m!=null)f=mo(g,u,{padding:c},()=>({width:y,height:m,meta:null}))?.[0];else{const T=PD(u),{width:O,height:E}=T.measureText(g);f={text:g,fontSize:u.fontSize,lineHeight:u.lineHeight??T.lineHeight(),width:O,height:E}}if(f==null){d.visible=!1;return}const S=p?r.x:r.y+r.height,D=p?r.x+r.width:r.y,v=p?l.x:l.y+l.height,x=p?l.x+l.width:l.y,k=u.spacing*(p?1:-1);let A,M,b,L;switch(u.placement){case"outside-start":A=-1/0,M=1/0,b=S-k,L="Before";break;case"outside-end":A=-1/0,M=1/0,b=D+k,L="After";break;case"inside-start":A=S,M=x,b=S+k,L="After";break;case"inside-end":A=x,M=D,b=D-k,L="Before";break;case"inside-center":A=S,M=D,b=(S+D)/2,L="Center";break;case"bar-inside":A=v,M=x,b=(v+x)/2,L="Center";break;case"bar-inside-end":A=v,M=x,b=x-k,L="Before";break;case"bar-outside-end":A=x,M=D,b=x+k,L="After";break;case"bar-end":A=-1/0,M=1/0,b=x,L="Center";break}const I=p?b:r.x+r.width/2,N=p?r.y+r.height/2:b;let R,P;p?(R=I+BD[L]*f.width,P=R+f.width):(R=N+GD[L]*f.height,P=R+f.height);const _=Math.min(R,P)>=Math.min(A,M)&&Math.max(R,P)<=Math.max(A,M);if(u.avoidCollisions&&!_){d.visible=!1;return}d.visible=!0,d.text=f.text,d.fontSize=f.fontSize,d.lineHeight=f.lineHeight,d.textAlign=p?OD[L]:"center",d.textBaseline=p?"middle":FD[L],d.x=I,d.y=N})}var{fromToMotion:Tn,resetMotion:KD,SeriesNodePickMode:Ph,StateMachine:zD,createDatumId:_h,toRadians:Eh,BBox:_t,Group:bi,PointerEvents:wh,Selection:vi,Rect:WD,Text:Oh,TransformableText:$D,Marker:HD,LinearScale:XD,generateTicks:YD,NiceMode:UD,easing:qD,findRangeExtent:jD,tickFormat:JD,mergeDefaults:ZD,applyShapeStyle:Rn}=ji,QD={before:180,middle:0,after:0},e0={before:90,middle:0,after:-90},Os=class extends ji.Series{constructor(e){super({moduleCtx:e,pickModes:[Ph.EXACT_SHAPE_MATCH,Ph.NEAREST_NODE]}),this.properties=new je,this.seriesRect=_t.NaN,this.gaugeRect=_t.NaN,this.scale=new XD,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new bi({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new bi({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new bi({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new bi({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new bi({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new bi({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new bi({name:"tickGroup"})),this.scaleSelection=vi.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=vi.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=vi.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=vi.select(this.itemTargetLabelGroup,Oh),this.labelSelection=vi.select(this.itemLabelGroup,Oh),this.highlightTargetSelection=vi.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=vi.select(this.tickGroup,$D),this.datumUnion=new bh,this.animationState=new zD("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=wh.None,this.tickGroup.pointerEvents=wh.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const e=new WD;return e.crisp=!0,e}markerFactory(){return new HD}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){return Dh(e,this.properties.scale)}getShapeFillBBox(){const{properties:e,originX:t,originY:i,horizontal:o,scale:s}=this,{thickness:a}=e,n=jD(s.range),r=new _t(t,i,o?n:a,o?a:n);return{axis:r,series:r}}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:o=t.text,value:s=t.value??0,shape:a=t.shape??"triangle",rotation:n=t.rotation??0,placement:r=t.placement??"middle",spacing:l=t.spacing??0,size:c=t.size??0}=i,{enabled:p=t.label.enabled,color:d=t.label.color??"black",fontStyle:u=t.label.fontStyle??"normal",fontWeight:g=t.label.fontWeight??"normal",fontSize:y=t.label.fontSize,fontFamily:m=t.label.fontFamily,spacing:f=t.label.spacing??0}=i.label;return{text:o,value:s,shape:a,placement:r,spacing:l,size:c,rotation:n,label:{enabled:p,color:d,fontStyle:u,fontWeight:g,fontSize:y,fontFamily:m,spacing:f},style:i.getStyle(t)}})}getTargetPoint(e){const{properties:t,originX:i,originY:o,horizontal:s,scale:a,gaugeRect:n}=this,{thickness:r}=t,{value:l,placement:c,spacing:p,size:d}=e,u=a.convert(l);let g;switch(c){case"before":g=-(p+d/2);break;case"after":g=r+p+d/2;break;default:g=r/2;break}return{x:i+n.x+(s?u:g),y:o+n.y+(s?g:u)}}getTargetLabel(e){const{size:t,placement:i,label:o}=e,{spacing:s,color:a,fontStyle:n,fontWeight:r,fontSize:l,fontFamily:c}=o,p=void 0,d=t/2+s;let u,g,y=0,m=0;return this.horizontal?(u="center",i==="after"?(g="top",m=d):(g="bottom",m=-d)):(g="middle",i==="before"?(u="right",y=-d):(u="left",y=d)),{offsetX:y,offsetY:m,fill:a,textAlign:u,textBaseline:g,fontStyle:n,fontWeight:r,fontSize:l,fontFamily:c,lineHeight:p}}labelDatum(e,t){const{placement:i,avoidCollisions:o,spacing:s,text:a,color:n,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:p,fontFamily:d,lineHeight:u,wrapping:g,overflowStrategy:y,formatter:m=f=>this.formatLabel(f.value)}=e;return{placement:i,avoidCollisions:o,spacing:s,text:a,value:t,fill:n,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:p,fontFamily:d,lineHeight:u,wrapping:g,overflowStrategy:y,formatter:m}}verticalLabelInset(){const{label:e}=this.properties,t=xh(e),i=e.text?.split(`
`),o=(e.lineHeight??t.lineHeight())*(i?.length??1);return e.spacing+o}horizontalLabelInset(){const{scale:e,properties:t}=this,{scale:i,label:o}=t,s=o.text?.split(`
`),a=xh(o),n=i.interval.values??e.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5})?.ticks??[],l=(s??n?.map(c=>Mo(this.id,this.ctx,this.labelDatum(o,c))??"")).reduce((c,p)=>{const{width:d}=a.measureText(p);return Math.max(c,d)},0);return o.spacing+l}tickFormatter(e,t){const{format:i,formatter:o}=this.properties.scale.label;let s;return i!=null&&(s=JD(t,typeof i=="string"?i:void 0)),(a,n)=>{let r;return o&&(r??(r=An(this.ctx,o,{value:a,index:n,domain:e,boundSeries:void 0}))),r??(r=s?.(a)),r??this.formatLabel(a)}}createNodeData(){const{id:e,properties:t,horizontal:i,scale:o,seriesRect:s}=this,{value:a,segmentation:n,thickness:r,cornerRadius:l,cornerMode:c,bar:p,scale:d,label:u,defaultColorRange:g}=t;o.domain=[d.min,d.max],o.range=i?[0,s.width]:[s.height,0];let y,m;i?(m=1,y=Math.PI/2):d.label.placement==="before"?(m=1,y=0):(m=-1,y=0);let f,S,D,v;i?(f=0,S=s.width,D=(s.height-r)/2,v=D+r,u.placement==="outside-start"?f+=this.horizontalLabelInset():u.placement==="outside-end"&&(S-=this.horizontalLabelInset())):(f=(s.width-r)/2,S=f+r,v=0,D=s.height,u.placement==="outside-start"?D-=this.verticalLabelInset():u.placement==="outside-end"&&(v+=this.verticalLabelInset())),this.gaugeRect=new _t(Math.min(f,S),Math.min(D,v),Math.abs(S-f),Math.abs(v-D));const x=0,k=0;o.domain=[d.min,d.max],o.range=i?[f,S]:[D,v];const{tickData:{ticks:A}}=YD({scale:o,label:this.properties.scale.label,interval:this.properties.scale.interval,tickFormatter:(q,j)=>this.tickFormatter(q,j),domain:o.domain,range:this.range,reverse:!1,primaryTickCount:void 0,defaultTickMinSpacing:0,visibleRange:[0,1],niceMode:UD.Off,labelOffset:0,axisRotation:y,sideFlag:m}),M=!1,b=this.getTargets(),L=[],I=[],N=[],R=[],[P,_]=o.range,T=Math.abs(_-P),O=i?o.convert(a):S,E=i?v:o.convert(a),C=n.enabled?n.spacing/2:0,w=i?C:0,F=i?0:C,B=Math.min(p.thickness??Math.round(p.thicknessRatio*r),r),V=-(r-B)/2,G=i?0:V,K=i?V:0,W=c==="item",z=Math.ceil(T);let $=n.enabled?n.interval.getSegments(o,z):void 0;const Y=p.getStyle(g,i,o),oe=d.getStyle(p.enabled,g,i,o);if($==null&&W){const q=Math.min(...o.domain),j=Math.max(...o.domain),Z={value:a,segmentStart:q,segmentEnd:j};if(p.enabled){const de=Math.min(l,B/2,T/2)*(M?-1:1),le=i?de:0,ue=i?0:de;L.push({series:this,itemId:"value",datum:Z,datumIndex:{type:0},type:0,x0:x+f-le-G,y0:k+D-ue-K,x1:x+O+le+G,y1:k+E+ue+K,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,horizontalInset:w,verticalInset:F,style:Y})}const ie=Math.min(l,r/2,T/2)*(M?-1:1),J=i?ie:0,pe=i?0:ie;R.push({series:this,itemId:"scale",datum:Z,datumIndex:{type:0},type:0,x0:x+f-J,y0:k+D-pe,x1:x+S+J,y1:k+v+pe,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,horizontalInset:w,verticalInset:F,style:oe})}else{$??($=o.domain);const q=x+f-G,j=k+D-K,Z=x+O+G,he=k+E+K;for(let ie=0;ie<$.length-1;ie+=1){const J=$[ie+0],pe=$[ie+1],ee={value:a,segmentStart:J,segmentEnd:pe},de=ie===0,le=ie===$.length-2,ue=o.convert(J),Ae=o.convert(pe),st=W||de?l:0,ai=W||le?l:0,ft=i?st:ai,Nt=ai,ro=i?ai:st,lo=st;p.enabled&&L.push({series:this,itemId:`value-${ie}`,datum:ee,datumIndex:{type:0},type:0,x0:x+(i?ue:f),y0:k+(i?D:ue),x1:x+(i?Ae:S),y1:k+(i?v:Ae),clipX0:q,clipY0:j,clipX1:Z,clipY1:he,topLeftCornerRadius:ft,topRightCornerRadius:Nt,bottomRightCornerRadius:ro,bottomLeftCornerRadius:lo,horizontalInset:w,verticalInset:F,style:Y}),R.push({series:this,itemId:`scale-${ie}`,datum:ee,datumIndex:{type:0},type:0,x0:x+(i?ue:f),y0:k+(i?D:ue),x1:x+(i?Ae:S),y1:k+(i?v:Ae),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:ft,topRightCornerRadius:Nt,bottomRightCornerRadius:ro,bottomLeftCornerRadius:lo,horizontalInset:w,verticalInset:F,style:oe})}}u.enabled&&N.push(this.labelDatum(u,a));const ae=i?QD:e0;for(let q=0;q<b.length;q+=1){const j=b[q],{value:Z,text:he,shape:ie,size:J,style:pe}=j,ee=this.getTargetPoint(j),de=Eh(j.rotation+ae[j.placement]);I.push({series:this,itemId:`target-${q}`,midPoint:ee,datum:{value:Z},datumIndex:{type:1,index:q},type:1,value:Z,text:he,x:ee.x,y:ee.y,shape:ie,size:J,rotation:de,label:this.getTargetLabel(j),style:pe})}return{itemId:e,nodeData:L,tickData:A,targetData:I,labelData:N,scaleData:R}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,targetSelection:o,targetLabelSelection:s,scaleSelection:a,highlightTargetSelection:n,tickSelection:r}=this;this.seriesRect=e??_t.NaN;const l=this.checkResize(e);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],p=this.contextNodeData?.labelData??[],d=this.contextNodeData?.targetData??[],u=this.contextNodeData?.scaleData??[],g=this.contextNodeData?.tickData??[],y=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:u,scaleSelection:a}),this.updateScaleNodes({scaleSelection:a}),this.targetSelection=this.updateTargetSelection({targetData:d,targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:d,targetLabelSelection:s}),this.updateTargetLabelNodes({targetLabelSelection:s}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:p,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:y!=null?[y]:[],targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:g,tickSelection:r}),this.updateTickNodes({tickSelection:r}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>_h(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i}=this,o=i.animationManager.isSkipped(),s=this.getShapeFillBBox();t.each((n,r)=>{const{topLeftCornerRadius:l,topRightCornerRadius:c,bottomRightCornerRadius:p,bottomLeftCornerRadius:d}=r;Rn(n,r.style,s),n.topLeftCornerRadius=l,n.topRightCornerRadius=c,n.bottomRightCornerRadius=p,n.bottomLeftCornerRadius=d,n.pointerEvents=this.properties.bar.enabled?ji.PointerEvents.All:ji.PointerEvents.None,(o||n.previousDatum==null)&&n.setProperties(No(n,r))});const{horizontal:a}=this;this.datumUnion.update(t,this.itemGroup,ji.Rect,(n,r,l)=>{const c=Math.min(r.x,l.x),p=Math.max(r.x+r.width,l.x+l.width),d=Math.min(r.y,l.y),u=Math.max(r.y+r.height,l.y+l.height),g=p-c,y=u-d;n.pointerEvents=ji.PointerEvents.None,n.x=c,n.y=d,n.width=g,n.height=y,n.topLeftCornerRadius=a?r.topLeftCornerRadius:l.topLeftCornerRadius,n.topRightCornerRadius=l.topRightCornerRadius,n.bottomRightCornerRadius=a?l.bottomRightCornerRadius:r.bottomRightCornerRadius,n.bottomLeftCornerRadius=r.bottomLeftCornerRadius;const m=r.clipBBox,f=l.clipBBox??m;m&&f?n.clipBBox=_t.merge([m,f]).intersection(a?new _t(c,-1/0,g,1/0):new _t(-1/0,d,1/0,y)):n.clipBBox=void 0})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>_h(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,i=this.getShapeFillBBox();t.each((o,s)=>{const{topLeftCornerRadius:a,topRightCornerRadius:n,bottomRightCornerRadius:r,bottomLeftCornerRadius:l}=s;Rn(o,s.style,i),o.setProperties(No(o,s)),o.topLeftCornerRadius=a,o.topRightCornerRadius=n,o.bottomRightCornerRadius=r,o.bottomLeftCornerRadius=l,o.setProperties(No(o,s))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e;t.each((o,s)=>{const{x:a,y:n,shape:r,size:l,rotation:c}=s,p=this.getTargetStyle(i,s);Rn(o,p),o.size=l,o.shape=r==="line"?kh:r,o.translationX=a,o.translationY=n,o.rotation=c})}getTargetStyle(e,{datumIndex:t,style:i}){const o=this.getHighlightStyle(e,t);return ZD(o,{...i,opacity:1})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,o)=>{const{x:s,y:a,text:n}=o,{offsetX:r,offsetY:l,fill:c,fontStyle:p,fontWeight:d,fontSize:u,fontFamily:g,textAlign:y,textBaseline:m}=o.label;i.visible=!0,i.x=s+r,i.y=a+l,i.text=n,i.fill=c,i.fontStyle=p,i.fontWeight=d,i.fontSize=u,i.fontFamily=g,i.textAlign=y,i.textBaseline=m})}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.tickId)}updateTickNodes(e){const{gaugeRect:t,properties:i}=this,o=i.defaultScale,{enabled:s,color:a,fontFamily:n=o.label.fontFamily,fontSize:r=o.label.fontSize,fontStyle:l,fontWeight:c=o.label.fontWeight,spacing:p}=i.scale.label;let{placement:d}=i.scale.label;const u=Eh(i.scale.label.rotation??0);let g,y,m,f;this.horizontal?(d??(d="after"),g="center",y=d==="before"?"bottom":"top",f=this.originY+t.y+(d==="before"?-p:t.height+p)):(d??(d="before"),g=d==="before"?"end":"start",y="middle",m=this.originX+t.x+(d==="before"?-p:t.width+p)),e.tickSelection.each((S,D)=>{if(!s){S.visible=!1;return}const v=m??D.translation,x=f??D.translation;S.visible=!0,S.text=D.tickLabel,S.fill=a,S.fontFamily=n,S.fontSize=r,S.fontStyle=l,S.fontWeight=c,S.textBaseline=y,S.textAlign=g,S.x=v,S.y=x,S.rotationCenterX=v,S.rotationCenterY=x,S.rotation=u})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>"primary")}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((o,s)=>{o.fill=s.fill,o.fontStyle=s.fontStyle,o.fontWeight=s.fontWeight,o.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,horizontal:i,scale:o,seriesRect:s,gaugeRect:a}=this,{x:n,y:r,width:l,height:c}=a,p=e?.label??this.properties.value;let d;if(i){const y=o.convert(p);d=new _t(n,r,y-n,c)}else{const y=o.convert(p);d=new _t(n,y,l,c-y)}const u={seriesRect:s,gaugeRect:a,barRect:d},{margin:g}=this.properties;VD(this,this.ctx,t,{padding:g,horizontal:i},u,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),KD([this.datumSelection],No),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i=0,o=0;if(this.labelSelection.each((s,a)=>{s.opacity=1,i=s.previousDatum?.value??e.from??a.value,o=a.value}),!this.labelsHaveExplicitText())if(i===o)this.formatLabelText({label:o});else{const s=`${this.id}_labels`;t.animate({id:s,groupId:"label",from:{label:i},to:{label:o},phase:e.phase??"update",ease:qD.easeOut,onUpdate:a=>this.formatLabelText(a),onStop:()=>this.formatLabelText({label:o})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Ch(!0,this.horizontal);Tn(this.id,"node",e,[this.datumSelection],t,(i,o)=>o.itemId),Tn(this.id,"label",e,[this.labelSelection],vh,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Ch(!1,this.horizontal);Tn(this.id,"node",e,[this.datumSelection],t,(i,o)=>o.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}dataCount(){return NaN}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:o}=i;if(e==null)return;let s,a,n;if(e.type===0?(s=i.value,a=i.label.text,n=this.ctx.localeManager.t("ariaLabelGaugeValue")):({value:s,text:a}=i.targets[e.index],n=this.ctx.localeManager.t("ariaLabelGaugeTarget")),s!=null)return this.formatTooltipWithContext(o,{data:[{label:a,fallbackLabel:n,value:this.formatLabel(s)}]},{seriesId:t,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(e){return Mh(this,e)}pickFocus(e){return Ih(this,e)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return!1}};Os.className="LinearGaugeSeries",Os.type="linear-gauge";var zR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"linear-gauge",moduleFactory:e=>new Os(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},Ao.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",Ao.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{spacing:11}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{...Ao.LABEL_BOXING_DEFAULTS,enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:2},minimumFontSize:Ao.FONT_SIZE.SMALL,spacing:18,color:{$ref:"chartBackgroundColor"}},margin:4,tooltip:{range:{$path:["/tooltip/range",10]}}}}},Fh={type:"series",name:"linear-gauge",chartType:"standalone",enterprise:!0,options:Ao.linearGaugeSeriesOptionsDef,create:e=>new Os(e)};import{_ModuleSupport as Fs}from"ag-charts-community";import{_ModuleSupport as Cn}from"ag-charts-community";var To={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1,...Cn.LEGEND_CONTAINER_THEME}};function Et(e){const t=Cn.deepClone(e);return Cn.jsonWalk(t,i=>{typeof i=="object"&&"$palette"in i&&(i.$mapPalette=i.$palette,delete i.$palette)}),t}import{_ModuleSupport as Bh}from"ag-charts-community";import{Logger as Gh,cachedTextMeasurer as t0}from"ag-charts-core";import{_ModuleSupport as i0}from"ag-charts-community";var o0=1e-9;function Vh(e,t,i,o){const[s,a]=e,[n,r]=t,l=n-s,c=r-a,p=l*l+c*c;let d,u;if(Math.abs(p)<o0)d=s,u=a;else{let m=((i-s)*l+(o-a)*c)/p;m=Math.max(0,Math.min(1,m)),d=s+m*(n-s),u=a+m*(r-a)}const g=i-d,y=o-u;return g*g+y*y}function Kh(e,t,i){let o=1/0,s=e[e.length-1];for(const a of e)o=Math.min(o,Vh(s,a,t,i)),s=a;return Math.sqrt(o)}function Pn(e){let[t,i]=e[0],o=0;for(let s=1;s<e.length;s+=1){const[a,n]=e[s],r=Math.hypot(a-t,n-i);o+=r,t=a,i=n}return o}function Bs(e){if(e.length===0)return;const t=Pn(e)/2;let[i,o]=e[0],s=0;for(let a=1;a<e.length;a+=1){const[n,r]=e[a],l=Math.hypot(n-i,r-o),c=s+l;if(c>t){const p=(t-s)/l,d=[i+(n-i)*p,o+(r-o)*p],u=Math.atan2(r-o,n-i);return{point:d,angle:u}}s=c,i=n,o=r}}import{_ModuleSupport as s0}from"ag-charts-community";var{LonLatBBox:a0}=s0;function Di(e,t){return e.forEach(i=>{const[o,s]=i;t=a0.extend(t,o,s,o,s)}),t}function n0(e){if(e.length===0)return;let t=0,i=0,o=0,[s,a]=e[e.length-1];for(const[n,r]of e){const l=s*r-n*a;o+=l,t+=(s+n)*l,i+=(a+r)*l,s=n,a=r}return o*=3,[t/o,i/o]}function Gs(e,t,i){let o=!1,s=1/0;for(const a of e){let n=a[a.length-1],[r,l]=n;for(const c of a){const[p,d]=c;d>i!=l>i&&t<(r-p)*(i-d)/(l-d)+p&&(o=!o),s=Math.min(s,Vh(n,c,t,i)),n=c,r=p,l=d}}return(o?-1:1)*Math.sqrt(s)}var{Path:r0,ExtendedPath2D:l0,BBox:c0,SceneChangeDetection:h0,SceneObjectChangeDetection:p0,objectsEqual:d0}=i0,Zi=class extends r0{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new l0}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=e!=null?this.drawGeometry(e,void 0):void 0}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(e,t)?!1:this.geometryDistance(i,e,t)<=0}distanceSquared(e,t){const{projectedGeometry:i}=this;if(i==null)return 1/0;const o=this.geometryDistance(i,e,t);return o>0?o*o:0}geometryDistance(e,t,i){const{renderMode:o,strokeWidth:s}=this,a=(o&1)!==0,n=(o&2)!==0,r=Math.max(s/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,t,i)),1/0);case"MultiPolygon":return a?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(Gs(c,t,i),0)),1/0):1/0;case"Polygon":return a?Math.max(Gs(e.coordinates,t,i),0):1/0;case"MultiLineString":return n?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(Kh(c,t,i)-r,0)),1/0):1/0;case"LineString":return n?Math.max(Kh(e.coordinates,t,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:o,strokePath:s}=this,a=(i&1)!==0,n=(i&2)!==0;switch(e.type){case"GeometryCollection":e.geometries.forEach(r=>{t=this.drawGeometry(r,t)});break;case"MultiPolygon":a&&e.coordinates.forEach(r=>{t=this.drawPolygon(o,r,t)});break;case"Polygon":a&&(t=this.drawPolygon(o,e.coordinates,t));break;case"LineString":n&&(t=this.drawLineString(s,e.coordinates,t,!1));break;case"MultiLineString":n&&e.coordinates.forEach(r=>{t=this.drawLineString(s,r,t,!1)});break;case"Point":case"MultiPoint":break}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let o=1;o<t.length;o+=1){const s=t[o];this.drawLineString(e,s,void 0,!0)}return i}drawLineString(e,t,i,o){if(t.length<2)return i;const s=o?t.length-1:t.length;for(let a=0;a<s;a+=1){const[n,r]=t[a];if(a===0?e.moveTo(n,r):e.lineTo(n,r),i==null)i=new c0(n,r,0,0);else{const{x:l,y:c}=i,p=l+i.width,d=c+i.height;i.x=Math.min(l,n),i.y=Math.min(c,r),i.width=Math.max(p,n)-i.x,i.height=Math.max(d,r)-i.y}}return o&&e.closePath(),i}};h([p0({equals:d0})],Zi.prototype,"projectedGeometry",2),h([h0()],Zi.prototype,"renderMode",2);import{_ModuleSupport as u0}from"ag-charts-community";var{LonLatBBox:_n}=u0;function Qi(e,t){if(e.bbox!=null){const[i,o,s,a]=e.bbox;return t=_n.extend(t,i,o,s,a),t}switch(e.type){case"GeometryCollection":e.geometries.forEach(i=>{t=Qi(i,t)});break;case"MultiPolygon":e.coordinates.forEach(i=>{i.length>0&&(t=Di(i[0],t))});break;case"Polygon":e.coordinates.length>0&&(t=Di(e.coordinates[0],t));break;case"MultiLineString":e.coordinates.forEach(i=>{t=Di(i,t)});break;case"LineString":t=Di(e.coordinates,t);break;case"MultiPoint":e.coordinates.forEach(i=>{const[o,s]=i;t=_n.extend(t,o,s,o,s)});break;case"Point":{const[i,o]=e.coordinates;t=_n.extend(t,i,o,i,o);break}}return t}function Vs(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(o=>{const s=Vs(o);if(s==null)return;const a=Di(s[0],void 0);if(a==null)return;const n=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(t==null||n>t)&&(t=n,i=s)}),i}case"MultiPolygon":{let t,i;return e.coordinates.forEach(o=>{const s=Di(o[0],void 0);if(s==null)return;const a=Math.abs(s.lat1-s.lat0)*Math.abs(s.lon1-s.lon0);(t==null||a>t)&&(t=a,i=o)}),i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function Ks(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(o=>{const s=Ks(o);if(s==null)return;const a=Pn(s);a!=null&&(t==null||a>t)&&(t=a,i=s)}),i}case"MultiLineString":{let t=0,i;return e.coordinates.forEach(o=>{const s=Pn(o);s>t&&(t=s,i=o)}),i}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function En(e,t){if(e==null)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some(i=>En(i,t));case"MultiPolygon":case"Polygon":return(t&1)!==0;case"MultiLineString":case"LineString":return(t&2)!==0;case"MultiPoint":case"Point":return(t&4)!==0}}function Jt(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map(i=>Jt(i,t))};case"Polygon":return{type:"Polygon",coordinates:wn(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:g0(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:wn(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:On(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:On(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function g0(e,t){return e.map(i=>wn(i,t))}function wn(e,t){return e.map(i=>On(i,t))}function On(e,t){return e.map(i=>t.convert(i))}function y0(){return{fromFn:(i,o,s)=>s==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,o,s)=>s==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function zh(e,t){const i=e.contextNodeData?.nodeData[t.datumIndex];if(i!==void 0){for(const o of e.datumSelection.nodes())if(o.datum===i)return o}}import{_ModuleSupport as Wh}from"ag-charts-community";var JR=class extends Wh.SeriesProperties{},Ro=class extends Wh.DataModelSeries{addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>{this.onLegendItemClick(e)}),this.ctx.eventsHub.on("legend:item-double-click",e=>{this.onLegendItemDoubleClick(e)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}};import{_ModuleSupport as m0}from"ag-charts-community";var{Property:xe,SeriesProperties:f0,makeSeriesTooltip:S0,Label:x0}=m0,fe=class extends f0{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new x0,this.tooltip=S0()}getStyle(){const{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:o,lineDashOffset:s}=this;return{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:o,lineDashOffset:s}}};h([xe],fe.prototype,"topology",2),h([xe],fe.prototype,"title",2),h([xe],fe.prototype,"legendItemName",2),h([xe],fe.prototype,"idKey",2),h([xe],fe.prototype,"topologyIdKey",2),h([xe],fe.prototype,"idName",2),h([xe],fe.prototype,"labelKey",2),h([xe],fe.prototype,"labelName",2),h([xe],fe.prototype,"sizeKey",2),h([xe],fe.prototype,"sizeName",2),h([xe],fe.prototype,"colorKey",2),h([xe],fe.prototype,"colorName",2),h([xe],fe.prototype,"sizeDomain",2),h([xe],fe.prototype,"colorRange",2),h([xe],fe.prototype,"maxStrokeWidth",2),h([xe],fe.prototype,"stroke",2),h([xe],fe.prototype,"strokeOpacity",2),h([xe],fe.prototype,"strokeWidth",2),h([xe],fe.prototype,"lineDash",2),h([xe],fe.prototype,"lineDashOffset",2),h([xe],fe.prototype,"itemStyler",2),h([xe],fe.prototype,"label",2),h([xe],fe.prototype,"tooltip",2);var{getMissCount:b0,getLabelStyles:v0,createDatumId:$h,SeriesNodePickMode:Hh,valueProperty:Co,ColorScale:D0,LinearScale:k0,Selection:Fn,Text:A0,Transformable:M0,mergeDefaults:Xh}=Bh,zs=class extends Ro{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[Hh.EXACT_SHAPE_MATCH,Hh.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new fe,this._chartTopology=void 0,this.colorScale=new D0,this.sizeScale=new k0,this.datumSelection=Fn.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=Fn.select(this.labelGroup,A0),this.highlightDatumSelection=Fn.select(this.highlightGroup,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Zi;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:n,sizeKey:r,colorKey:l,labelKey:c,sizeDomain:p,colorRange:d}=this.properties,u=new Map;i?.features.forEach(v=>{const x=v.properties?.[a];x==null||!En(v.geometry,2)||u.set(x,v)});const g=this.sizeScale.type,y=this.colorScale.type,m=this.scale?.type,{dataModel:f,processedData:S}=await this.requestDataModel(e,t,{props:[Co(n,m,{id:"idValue",includeProperty:!1}),Co(n,m,{id:"featureValue",includeProperty:!1,processor:()=>v=>u.get(v)}),...c!=null?[Co(c,"category",{id:"labelValue"})]:[],...r!=null?[Co(r,g,{id:"sizeValue"})]:[],...l!=null?[Co(l,y,{id:"colorValue"})]:[]]}),D=f.resolveColumnById(this,"featureValue",S);if(this.topologyBounds=D.reduce((v,x)=>{const k=x?.geometry;return k==null?v:Qi(k,v)},void 0),r!=null){const v=f.resolveProcessedDataIndexById(this,"sizeValue"),x=S.domain.values[v]??[];o.domain=p??x}if(d!=null&&this.isColorScaleValid()){const v=f.resolveProcessedDataIndexById(this,"colorValue");s.domain=S.domain.values[v],s.range=d,s.update()}i==null&&Gh.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=b0(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(e,t,i,o){if(t==null||i==null)return;const s=Ks(i);if(s==null)return;const{idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:p,labelKey:d,labelName:u,label:g}=this.properties;if(d==null||!g.enabled)return;const y=this.getLabelText(t,e,d,"label",[],g,{value:t,datum:e,idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:p,labelKey:d,labelName:u});if(y==null)return;const m=o.measureText(String(y)),f=Bs(s);if(f==null)return;const[S,D]=f.point,{width:v,height:x}=m;return{point:{x:S,y:D,size:0},label:{width:v,height:x,text:y},anchor:void 0,placement:void 0}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:o,properties:s,scale:a}=this,{idKey:n,sizeKey:r,colorKey:l,labelKey:c,label:p,legendItemName:d}=s;if(t==null||i==null)return;const u=t.resolveColumnById(this,"idValue",i),g=t.resolveColumnById(this,"featureValue",i),y=c!=null?t.resolveColumnById(this,"labelValue",i):void 0,m=r!=null?t.resolveColumnById(this,"sizeValue",i):void 0,f=l!=null?t.resolveColumnById(this,"colorValue",i):void 0,S=s.maxStrokeWidth??s.strokeWidth;o.range=[Math.min(s.strokeWidth,S),S];const D=t0(p),v=new Map;i.dataSources.get(this.id)?.forEach((L,I)=>{const N=u[I],R=g[I]?.geometry??void 0,P=R!=null&&a!=null?Jt(R,a):void 0;N!=null&&P!=null&&v.set(N,P)});const x=[],k=[],A=[];(i.dataSources.get(this.id)??[]).forEach((L,I)=>{const N=u[I],R=f?.[I],P=m?.[I],_=y?.[I],T=v.get(N);T==null&&A.push(N);const O=this.getLabelDatum(L,_,T,D);O!=null&&k.push(O),x.push({series:this,itemId:n,datum:L,datumIndex:I,idValue:N,labelValue:_,colorValue:R,sizeValue:P,projectedGeometry:T,legendItemName:d,style:this.getItemStyle({datumIndex:I,datum:L,colorValue:R,sizeValue:P},!1)})});const b=10;if(A.length>b){const L=A.length-b;A.length=b,A.push(`(+${L} more)`)}return A.length>0&&Gh.warnOnce("some data items do not have matches in the provided topology",A),{itemId:e,nodeData:x,labelData:k}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,highlightDatumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let i=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:o}=this.properties,s=o!=null&&i?.datum==null&&o===i?.legendItemName;i!=null&&(i.series!==this&&!s||i.datum==null)&&(i=void 0);const a=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:a,datumSelection:e}),this.updateDatumStyles({datumSelection:e,isHighlight:!1}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:t}),this.updateDatumStyles({datumSelection:t,isHighlight:!0}),this.updateDatumNodes({datumSelection:t,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>$h(t.idValue))}getItemStyle({datumIndex:e=0,datum:t,colorValue:i,sizeValue:o},s){const{id:a,properties:n,colorScale:r,sizeScale:l}=this,{colorRange:c,itemStyler:p}=n,d=this.getHighlightStyle(s,e),u=Xh(d,n.getStyle());!s&&i!=null&&(u.stroke=this.isColorScaleValid()?r.convert(i):c?.[0]??n.stroke),o!=null&&(u.strokeWidth=l.convert(o,{clamp:!0}));let g;return p!=null&&(g=this.cachedDatumCallback($h(e,s?"highlight":"node"),()=>{const y=this.ctx.highlightManager?.getActiveHighlight(),m=this.getHighlightStateString(y,s,e);return this.callWithContext(p,{seriesId:a,datum:t,highlighted:s,highlightState:m,...u})})),g?Xh(u,g):u}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o,t)})}updateDatumNodes({datumSelection:e}){e.each((t,i)=>{const{projectedGeometry:o,style:s}=i;if(o==null){t.visible=!1,t.projectedGeometry=void 0;return}t.visible=!0,t.projectedGeometry=o,t.setProperties(s)})}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=Bh.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{properties:t}=this,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,{x:s,y:a,width:n,height:r,text:l},c)=>{const p=v0(this,void 0,t,t.label,!1,i),{color:d,fontStyle:u,fontWeight:g,fontSize:y,fontFamily:m}=p;o.visible=!0,o.x=s+n/2,o.y=a+r/2,o.text=l,o.fill=d,o.fontStyle=u,o.fontWeight=g,o.fontSize=y,o.fontFamily=m,o.textAlign="center",o.textBaseline="middle",o.fillOpacity=this.getHighlightStyle(!1,c).opacity??1,o.setBoxing(p)})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceSquared(e,t);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,o=i!=null?Ks(i):void 0,s=o!=null?Bs(o)?.point:void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:o}=this,{strokeWidth:s,strokeOpacity:a,lineDash:n}=o;let{stroke:r}=o;if(e!=null&&this.isColorScaleValid()){const c=t.resolveColumnById(this,"colorValue",i)[e];r=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:r,strokeWidth:s,strokeOpacity:a,lineDash:n}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:n,idKey:r,idName:l,colorKey:c,colorRange:p,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&p!=null){const u=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,series:this.getFormatterContext("color"),colorRange:p,colorDomain:u}]}else return e==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:n??a??l??r},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s,ctx:{formatManager:a}}=this,{idKey:n,idName:r,colorKey:l,colorName:c,sizeKey:p,sizeName:d,labelKey:u,labelName:g,title:y,legendItemName:m,tooltip:f}=s;if(!i||!o)return;const S=o.dataSources.get(this.id)?.[e],D=i.resolveColumnById(this,"idValue",o),v=p!=null?i.resolveColumnById(this,"sizeValue",o)[e]:void 0,x=l!=null?i.resolveColumnById(this,"colorValue",o)[e]:void 0,k=[];if(this.isLabelEnabled()&&u!=null&&u!==n){const M=i.resolveColumnById(this,"labelValue",o)[e],b=a.format(this.callWithContext.bind(this),{type:"category",value:M,datum:S,seriesId:t,legendItemName:m,key:u,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});k.push({label:g,fallbackLabel:u,value:b??M})}if(v!=null&&p!=null){const M=i.getDomain(this,"sizeValue","value",o),b=a.format(this.callWithContext.bind(this),{type:"number",value:v,datum:S,seriesId:t,legendItemName:m,key:p,source:"tooltip",property:"size",domain:M,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});k.push({label:d,fallbackLabel:p,value:b??String(v)})}if(x!=null&&l!=null){const M=i.getDomain(this,"colorValue","value",o),b=a.format(this.callWithContext.bind(this),{type:"number",value:x,datum:S,seriesId:t,legendItemName:m,key:l,source:"tooltip",property:"color",domain:M,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});k.push({label:c,fallbackLabel:l,value:b??String(x)})}const A=this.getItemStyle({datumIndex:e,datum:S,colorValue:x,sizeValue:v},!1);return this.formatTooltipWithContext(f,{heading:D[e],title:y??m,symbol:this.legendItemSymbol(e),data:k},{seriesId:t,datum:S,title:y,idKey:n,idName:r,colorKey:l,colorName:c,sizeKey:p,sizeName:d,labelKey:u,labelName:g,...A})}computeFocusBounds(e){const t=zh(this,e);return t?M0.toCanvas(this.contentGroup,t.getBBox()):void 0}hasItemStylers(){return this.properties.itemStyler!=null}};zs.className="MapLineSeries",zs.type="map-line";import{_ModuleSupport as I0}from"ag-charts-community";import{and as L0,arrayLength as N0,arrayOf as T0,color as R0,constant as C0,geoJson as P0,required as Yh,string as At,undocumented as _0}from"ag-charts-core";var{commonSeriesOptionsDefs:E0,mapLineSeriesThemeableOptionsDef:w0,without:O0}=I0,Uh={...O0(E0,["highlightStyle","highlight"]),...w0,type:Yh(C0("map-line")),idKey:Yh(At),sizeKey:At,colorKey:At,labelKey:At,idName:At,sizeName:At,colorName:At,labelName:At,topology:P0,topologyIdKey:At,legendItemName:At,title:At};Uh.colorRange=_0(L0(T0(R0),N0(1)));var tC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:e=>new zs(e),themeTemplate:{...To,series:{stroke:Et(Fs.SAFE_STROKE_FILL_OPERATION),colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},Et(Fs.SAFE_RANGE2_OPERATION)]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{...Fs.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:Et(Fs.multiSeriesHighlightStyle(!1))},tooltip:{range:"exact"}}},qh={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:Uh,create:e=>new zs(e)};import{_ModuleSupport as F0}from"ag-charts-community";import{Logger as B0}from"ag-charts-core";import{_ModuleSupport as G0}from"ag-charts-community";var{Property:ki,SeriesProperties:V0,makeSeriesTooltip:K0}=G0,Zt=class extends V0{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=K0()}};h([ki],Zt.prototype,"topology",2),h([ki],Zt.prototype,"stroke",2),h([ki],Zt.prototype,"strokeOpacity",2),h([ki],Zt.prototype,"strokeWidth",2),h([ki],Zt.prototype,"lineDash",2),h([ki],Zt.prototype,"lineDashOffset",2),h([ki],Zt.prototype,"tooltip",2);var{createDatumId:z0,Group:W0,Selection:$0,PointerEvents:jh}=F0,Ws=class extends Ro{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new Zt,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new W0({name:"itemGroup"})),this.datumSelection=$0.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=jh.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new Zi;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=jh.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const o=i.geometry;return o==null?t:Qi(o,t)},void 0),e==null&&B0.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i,properties:o}=this;if(t==null)return;const{stroke:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,strokeWidth:l}=o,c=[],p=[];return t.features.forEach((d,u)=>{const{geometry:g}=d,y=g!=null&&i!=null?Jt(g,i):void 0;y!=null&&c.push({series:this,itemId:u,datum:d,datumIndex:0,index:u,projectedGeometry:y,style:{stroke:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,strokeWidth:l}})}),{itemId:e,nodeData:c,labelData:p}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>z0(t.index))}updateDatumNodes(e){const{datumSelection:t}=e;t.each((i,o)=>{const{projectedGeometry:s}=o;if(s==null){i.visible=!1,i.projectedGeometry=void 0;return}i.visible=!0,i.projectedGeometry=s,i.setProperties(o.style)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}computeFocusBounds(e){}hasItemStylers(){return!1}};Ws.className="MapLineBackgroundSeries",Ws.type="map-line-background";import{_ModuleSupport as H0}from"ag-charts-community";import{constant as X0,geoJson as Y0,required as U0}from"ag-charts-core";var{mapLineBackgroundSeriesThemeableOptionsDef:q0}=H0,j0={...q0,type:U0(X0("map-line-background")),topology:Y0},rC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:e=>new Ws(e),themeTemplate:{...To,series:{stroke:{$path:["/1",{$mapPalette:"stroke"},{$mapPalette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},Jh={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:j0,create:e=>new Ws(e)};import{_ModuleSupport as eo}from"ag-charts-community";import{ValidationError as J0,validate as Z0}from"ag-charts-core";import{_ModuleSupport as Zh}from"ag-charts-community";import{Logger as Q0,cachedTextMeasurer as ek}from"ag-charts-core";var tk=void 0,ik=void 0;ik=tk;var ok=void 0,sk=void 0;sk=ok;var ak=void 0,nk=void 0;nk=ak;var rk=void 0,lk=void 0;lk=rk;import{insertListItemsSorted as ck}from"ag-charts-core";function Qh(e,t,i){const o=Di(e[0],void 0);if(o==null)return;const s=(o.lon0+o.lon1)/2,a=(o.lat0+o.lat1)/2,n=Math.abs(o.lon1-o.lon0),r=Math.abs(o.lat1-o.lat0),l=n0(e[0]),[c,p]=l,d=-Gs(e,c,p);let u;const g=(k,A)=>{const b=Math.max(A-d,0);return k-.5*b},y=(k,A,M)=>{const{distance:b,maxDistance:L}=i(e,k,A,M),I=Math.hypot(c-k,p-A),N=Math.min(Math.max(c,k-M/2),k+M/2),R=Math.min(Math.max(p,A-M/2),A+M/2),P=Math.hypot(c-N,p-R),_=g(b,I),T=g(L,P);return{distance:b,maxDistance:L,value:_,maxValue:T,x:k,y:A,stride:M}},m=(k,A,M,b)=>{const L=y(A,M,b);L.maxDistance>=0&&k.push(L)},f=Math.min(n,r)/2;let S={value:y(s,a,f),next:null};for(;S!=null;){const k=S.value,{distance:A,value:M,maxValue:b,x:L,y:I,stride:N}=k;if(S=S.next,A>0&&(u==null||M>u.value)&&(u=k),u!=null&&b-u.value<=t)continue;const R=N/2,P=[];m(P,L-R,I-R,R),m(P,L+R,I-R,R),m(P,L-R,I+R,R),m(P,L+R,I+R,R),P.sort(ep),S=ck(S,P,ep)}if(u==null)return;const{distance:D,x:v,y:x}=u;return{x:v,y:x,distance:D}}var ep=(e,t)=>t.maxValue-e.maxValue;function Bn(e,t){const i=Qh(e,t,(a,n,r,l)=>{const c=-Gs(a,n,r),p=c+l*Math.SQRT2;return{distance:c,maxDistance:p}});if(i==null)return;const{x:o,y:s}=i;return[o,s]}function tp(e,t){let i;switch(e.type){case"GeometryCollection":return e.geometries.flatMap(o=>tp(o,t));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const o=Vs(e);i=o!=null?Bn(o,t):void 0;break}case"Polygon":{const o=e.coordinates;i=o!=null?Bn(o,t):void 0;break}case"MultiLineString":{const o=Ks(e);i=o!=null?Bs(o)?.point:void 0;break}case"LineString":{const o=e.coordinates;i=Bs(o)?.point;break}}return i!=null?[i]:[]}import{_ModuleSupport as hk}from"ag-charts-community";var{BBox:pk}=hk;function ip(e){if(!e)return;const{range:t}=e,i=t[0][0],o=t[0][1],s=t[1][0]-i,a=t[1][1]-o,n=new pk(i,o,s,a);return{series:n,axis:n}}import{_ModuleSupport as dk}from"ag-charts-community";var{Property:ne,SeriesProperties:uk,makeSeriesTooltip:gk,Label:yk}=dk,op=class extends yk{constructor(){super(...arguments),this.placement="bottom"}};h([ne],op.prototype,"placement",2);var re=class extends uk{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new op,this.tooltip=gk()}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:o,stroke:s,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:o,opacity:1,stroke:s,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}}};h([ne],re.prototype,"topology",2),h([ne],re.prototype,"title",2),h([ne],re.prototype,"legendItemName",2),h([ne],re.prototype,"idKey",2),h([ne],re.prototype,"topologyIdKey",2),h([ne],re.prototype,"idName",2),h([ne],re.prototype,"latitudeKey",2),h([ne],re.prototype,"latitudeName",2),h([ne],re.prototype,"longitudeKey",2),h([ne],re.prototype,"longitudeName",2),h([ne],re.prototype,"labelKey",2),h([ne],re.prototype,"labelName",2),h([ne],re.prototype,"sizeKey",2),h([ne],re.prototype,"sizeName",2),h([ne],re.prototype,"colorKey",2),h([ne],re.prototype,"colorName",2),h([ne],re.prototype,"colorRange",2),h([ne],re.prototype,"shape",2),h([ne],re.prototype,"size",2),h([ne],re.prototype,"maxSize",2),h([ne],re.prototype,"sizeDomain",2),h([ne],re.prototype,"fill",2),h([ne],re.prototype,"fillOpacity",2),h([ne],re.prototype,"stroke",2),h([ne],re.prototype,"strokeWidth",2),h([ne],re.prototype,"strokeOpacity",2),h([ne],re.prototype,"lineDash",2),h([ne],re.prototype,"lineDashOffset",2),h([ne],re.prototype,"itemStyler",2),h([ne],re.prototype,"label",2),h([ne],re.prototype,"tooltip",2);var{fromToMotion:mk,StateMachine:fk,getMissCount:Sk,createDatumId:sp,SeriesNodePickMode:ap,valueProperty:Ai,computeMarkerFocusBounds:xk,ColorScale:bk,LinearScale:vk,Group:Dk,Selection:Gn,Text:kk,Marker:Vn,applyShapeStyle:Ak,getLabelStyles:Mk,LonLatBBox:Ik,mergeDefaults:np}=Zh,$s=class extends Ro{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[ap.EXACT_SHAPE_MATCH,ap.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new re,this._chartTopology=void 0,this.colorScale=new bk,this.sizeScale=new vk,this.markerGroup=this.contentGroup.appendChild(new Dk({name:"markerGroup"})),this.labelSelection=Gn.select(this.labelGroup,kk,!1),this.markerSelection=Gn.select(this.markerGroup,Vn,!1),this.highlightMarkerSelection=Gn.select(this.highlightGroup,Vn),this.animationState=new fk("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const e=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||e)}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[3,e],this.highlightGroup.zIndex=[4,e],!0}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:n,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:p,labelKey:d,sizeDomain:u,colorRange:g}=this.properties,y=new Map;i?.features.forEach(b=>{const L=b.properties?.[a];L!=null&&y.set(L,b)});const m=this.sizeScale.type,f=this.colorScale.type,S=this.scale?.type,D=r!=null&&l!=null,{dataModel:v,processedData:x}=await this.requestDataModel(e,t,{props:[...n!=null?[Ai(n,S,{id:"idValue",includeProperty:!1}),Ai(n,S,{id:"featureValue",includeProperty:!1,processor:()=>b=>y.get(b)})]:[],...D?[Ai(r,S,{id:"latValue"}),Ai(l,S,{id:"lonValue"})]:[],...d?[Ai(d,"category",{id:"labelValue"})]:[],...c?[Ai(c,m,{id:"sizeValue"})]:[],...p?[Ai(p,f,{id:"colorValue"})]:[]]}),k=n!=null?v.resolveColumnById(this,"featureValue",x):void 0,A=D?v.resolveColumnById(this,"latValue",x):void 0,M=D?v.resolveColumnById(this,"lonValue",x):void 0;if(this.topologyBounds=x.dataSources.get(this.id)?.reduce((b,L,I)=>{const R=k?.[I]?.geometry;if(R!=null&&(b=Qi(R,b)),A!=null&&M!=null){const P=M[I],_=A[I];b=Ik.extend(b,P,_,P,_)}return b},void 0),c!=null){const b=v.resolveProcessedDataIndexById(this,"sizeValue"),L=x.domain.values[b]??[];o.domain=u??L}if(g!=null&&this.isColorScaleValid()){const b=v.resolveProcessedDataIndexById(this,"colorValue");s.domain=x.domain.values[b],s.range=g,s.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=Sk(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(e,t,i,o,s,a){if(t==null)return;const{idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,sizeKey:u,sizeName:g,colorKey:y,colorName:m,labelKey:f,labelName:S,label:D,shape:v}=this.properties;if(f==null||!D.enabled)return;const{placement:x}=D,k=this.getLabelText(t,e,f,"label",[],D,{value:t,datum:e,idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,sizeKey:u,sizeName:g,colorKey:y,colorName:m,labelKey:f,labelName:S});if(k==null)return;const{width:A,height:M}=a.measureText(String(k)),b=Vn.anchor(v);return{point:{x:i,y:o,size:s},label:{width:A,height:M,text:k},anchor:b,placement:x}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:o,properties:s,scale:a}=this,{idKey:n,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:p,labelKey:d,label:u,legendItemName:g}=s;if(t==null||i==null||a==null)return;const y=r!=null&&l!=null,m=n!=null?t.resolveColumnById(this,"idValue",i):void 0,f=n!=null?t.resolveColumnById(this,"featureValue",i):void 0,S=y?t.resolveColumnById(this,"latValue",i):void 0,D=y?t.resolveColumnById(this,"lonValue",i):void 0,v=d!=null?t.resolveColumnById(this,"labelValue",i):void 0,x=c!=null?t.resolveColumnById(this,"sizeValue",i):void 0,k=p!=null?t.resolveColumnById(this,"colorValue",i):void 0,A=s.maxSize??s.size;o.range=[Math.min(s.size,A),A];const M=ek(u);let b;m!=null&&f!=null&&(b=new Map,i.dataSources.get(this.id)?.forEach((_,T)=>{const O=m[T],E=f[T]?.geometry??void 0,C=E!=null&&a!=null?Jt(E,a):void 0;O!=null&&C!=null&&b.set(O,C)}));const L=[],I=[],N=[];(i.dataSources.get(this.id)??[]).forEach((_,T)=>{const O=m?.[T],E=D?.[T],C=S?.[T],w=k?.[T],F=x?.[T],B=v?.[T],V=F!=null?o.convert(F,{clamp:!0}):s.size,G=O!=null?b?.get(O):void 0;if(O!=null&&Jt==null&&N.push(O),E!=null&&C!=null){const[K,W]=a.convert([E,C]),z=this.getLabelDatum(_,B,K,W,V,M);z&&I.push(z),L.push({series:this,itemId:r,datum:_,datumIndex:T,index:-1,idValue:O,lonValue:E,latValue:C,labelValue:B,sizeValue:F,colorValue:w,point:{x:K,y:W,size:V},midPoint:{x:K,y:W},legendItemName:g,style:this.getMarkerItemStyle({datumIndex:T,datum:_,colorValue:w,sizeValue:F},!1)})}else G!=null&&tp(G,1).forEach(([K,W],z)=>{const $=this.getLabelDatum(_,B,K,W,V,M);$&&I.push($),L.push({series:this,itemId:r,datum:_,datumIndex:T,index:z,idValue:O,lonValue:E,latValue:C,labelValue:B,sizeValue:F,colorValue:w,point:{x:K,y:W,size:V},midPoint:{x:K,y:W},legendItemName:g,style:this.getMarkerItemStyle({datumIndex:T,datum:_,colorValue:w,sizeValue:F},!1)})})});const P=10;if(N.length>P){const _=N.length-P;N.length=P,N.push(`(+${_} more)`)}return N.length>0&&Q0.warnOnce("some data items do not have matches in the provided topology",N),{itemId:e,nodeData:L,labelData:I}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:e}){const t=this.checkResize(e),i=this.checkScaleChange(),{markerSelection:o,highlightMarkerSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let a=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:n}=this.properties,r=n!=null&&a?.datum==null&&n===a?.legendItemName;a!=null&&(a.series!==this&&!r||a.datum==null)&&(a=void 0);const l=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:l,markerSelection:o}),this.updateMarkerNodes({markerSelection:o,isHighlight:!1,highlightedDatum:a}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:a!=null?[a]:[],markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!0,highlightedDatum:a}),(i||t)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=Zh.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{properties:t}=this,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,{x:s,y:a,width:n,height:r,text:l},c)=>{const p=Mk(this,void 0,t,t.label,!1,i),{color:d,fontStyle:u,fontWeight:g,fontSize:y,fontFamily:m}=p;o.visible=!0,o.x=s+n/2,o.y=a+r/2,o.text=l,o.fill=d,o.fontStyle=u,o.fontWeight=g,o.fontSize=y,o.fontFamily=m,o.textAlign="center",o.textBaseline="middle",o.fillOpacity=this.getHighlightStyle(!1,c).opacity??1,o.setBoxing(p)})}updateMarkerSelection(e){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,o=>sp(o.index,o.idValue,o.lonValue,o.latValue))}getMarkerItemStyle({datumIndex:e,datum:t,colorValue:i,sizeValue:o},s){const{id:a,properties:n,colorScale:r,sizeScale:l}=this,{colorRange:c,itemStyler:p}=n,d=this.getHighlightStyle(s,e),u=np(d,n.getStyle());!s&&i!=null&&(u.fill=this.isColorScaleValid()?r.convert(i):c?.[0]??u.fill),o!=null&&(u.size=l.convert(o,{clamp:!0}));let g=u;if(p!=null&&e!=null){const y=this.cachedDatumCallback(sp(e,s?"highlight":"node"),()=>{const m=this.ctx.highlightManager?.getActiveHighlight(),f=this.getHighlightStateString(m,s,e);return this.callWithContext(p,{seriesId:a,datum:t,highlighted:s,highlightState:f,...g})});y&&(g=np(y,u))}return g}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i,highlightedDatum:o}=e,s=ip(this.scale);t.each((a,n)=>{const{datum:r,point:l}=n,c=this.getMarkerItemStyle(n,i);a.shape=c.shape,a.size=c.size,Ak(a,c,s),a.x=l.x,a.y=l.y,a.scalingCenterX=l.x,a.scalingCenterY=l.y,a.zIndex=!i&&o!=null&&r===o.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t=y0();mk(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(e){const{x:t,y:i}=e;let o=1/0,s;return this.contextNodeData?.nodeData.forEach(a=>{const{x:n,y:r,size:l}=a.point,c=Math.max(Math.abs(n-t)-l,0),p=Math.max(Math.abs(r-i)-l,0),d=c*c+p*p;d<o&&(o=d,s=a)}),s!=null?{datum:s,distance:Math.sqrt(o)}:void 0}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:o}=this,{shape:s,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:p}=o;let{fill:d}=o;if(e!=null&&this.isColorScaleValid()){const g=t.resolveColumnById(this,"colorValue",i)[e];d=this.colorScale.convert(g)}return{marker:{shape:s,fill:d,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:p}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:n,idName:r,idKey:l,colorKey:c,colorRange:p,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&p!=null){const u=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,series:this.getFormatterContext("color"),colorRange:p,colorDomain:u}]}else return e==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:n??a??r??l??o},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s,ctx:{formatManager:a}}=this,{idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,colorKey:u,colorName:g,sizeKey:y,sizeName:m,labelKey:f,labelName:S,title:D,legendItemName:v,tooltip:x}=s;if(!i||!o)return;const k=o.dataSources.get(this.id)?.[e],A=y!=null?i.resolveColumnById(this,"sizeValue",o)[e]:void 0,M=u!=null?i.resolveColumnById(this,"colorValue",o)[e]:void 0,b=[];if(this.isLabelEnabled()&&f!=null&&f!==n){const N=i.resolveColumnById(this,"labelValue",o)[e],R=a.format(this.callWithContext.bind(this),{type:"category",value:N,datum:k,seriesId:t,legendItemName:v,key:f,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});b.push({label:S,fallbackLabel:f,value:R??N})}if(y!=null&&A!=null){const N=i.getDomain(this,"sizeValue","value",o),R=a.format(this.callWithContext.bind(this),{type:"number",value:A,datum:k,seriesId:t,legendItemName:v,key:y,source:"tooltip",property:"size",domain:N,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});b.push({label:m,fallbackLabel:y,value:R??String(A)})}if(u!=null&&M!=null){const N=i.getDomain(this,"colorValue","value",o),R=a.format(this.callWithContext.bind(this),{type:"number",value:M,datum:k,seriesId:t,legendItemName:v,key:u,source:"tooltip",property:"color",domain:N,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});b.push({label:g,fallbackLabel:u,value:R??String(M)})}let L;if(n!=null)L=i.resolveColumnById(this,"idValue",o)[e];else if(l!=null&&p!=null){const N=i.resolveColumnById(this,"latValue",o)[e],R=i.resolveColumnById(this,"lonValue",o)[e];L=`${Math.abs(N).toFixed(4)}\xB0 ${N>=0?"N":"S"}, ${Math.abs(R).toFixed(4)}\xB0 ${R>=0?"W":"E"}`}const I=this.getMarkerItemStyle({datumIndex:e,datum:k,colorValue:M,sizeValue:A},!1);return this.formatTooltipWithContext(x,{heading:L,title:D??v,symbol:this.legendItemSymbol(e),data:b},{seriesId:t,datum:k,title:D,idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,colorKey:u,colorName:g,sizeKey:y,sizeName:m,labelKey:f,labelName:S,...I})}getFormattedMarkerStyle(e){const t=this.getMarkerItemStyle(e,!1);return{size:t.size,shape:t.shape}}computeFocusBounds(e){return xk(this,e)}hasItemStylers(){return this.properties.itemStyler!=null}};$s.className="MapMarkerSeries",$s.type="map-marker";import{_ModuleSupport as Lk}from"ag-charts-community";import{constant as Nk,geoJson as Tk,required as Rk,string as Qe}from"ag-charts-core";var{commonSeriesOptionsDefs:Ck,mapMarkerSeriesThemeableOptionsDef:Pk,without:_k}=Lk,Ek={..._k(Ck,["highlightStyle","highlight"]),...Pk,type:Rk(Nk("map-marker")),idKey:Qe,latitudeKey:Qe,longitudeKey:Qe,sizeKey:Qe,colorKey:Qe,labelKey:Qe,idName:Qe,latitudeName:Qe,longitudeName:Qe,sizeName:Qe,colorName:Qe,labelName:Qe,topology:Tk,topologyIdKey:Qe,legendItemName:Qe,title:Qe},fC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:e=>new $s(e),themeTemplate:{...To,series:{shape:"circle",maxSize:30,fill:Et({$applySwitch:[{$path:"type"},{$mapPalette:"fill"},["gradient",eo.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",eo.FILL_IMAGE_DEFAULTS],["pattern",eo.FILL_PATTERN_DEFAULTS]]}),stroke:{$mapPalette:"stroke"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},Et(eo.SAFE_RANGE2_OPERATION)]},fillOpacity:.5,label:{...eo.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:Et(eo.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}},rp={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:Ek,create:e=>new $s(e),validate(e,t,i){const o=Z0(e,t,i),{cleared:s,invalid:a}=o;if(s?.idKey==null&&(s?.latitudeKey==null||s?.longitudeKey==null)){const n=l=>i?`${i}.${l}`:l,r=`Either \`${n("idKey")}\` or both \`${n("latitudeKey")}\` and \`${n("longitudeKey")}\` are required.`;a.push(new J0("required",r,null,i))}return o}};import{_ModuleSupport as to}from"ag-charts-community";import{_ModuleSupport as lp}from"ag-charts-community";import{Logger as cp,cachedTextMeasurer as wk,calcLineHeight as Ok}from"ag-charts-core";function Fk(e,{aspectRatio:t,precision:i}){const o=Qh(e,i,(l,c,p,d)=>{const u=Gk(l,c,p,t),g=u+2*d*t,y=u*Math.SQRT2,m=g*Math.SQRT2;return{distance:y,maxDistance:m}});if(o==null)return;const{x:s,y:a,distance:n}=o,r=n/Math.SQRT2;return{x:s,y:a,maxWidth:r}}function Bk(e,t,i,o,s){const[a,n]=e,[r,l]=t,c=1/s,p=r-a,d=l-n,[u,g]=n<=l?e:t,[y,m]=a<=r?e:t,[f,S]=n<=l?t:e,[D,v]=a<=r?t:e;let x=1/0;if(p!==0){const I=d/p;for(let N=0;N<=1;N+=1){const R=N===0?c:-c,P=(I*a-n-R*i+o)/(I-R);if(P>=y&&P<=D){const _=Math.abs(i-P)*2;x=Math.min(x,_)}}}else for(let I=0;I<=1;I+=1){const R=(I===0?c:-c)*(a-i)+o;if(R>=g&&R<=S){const _=Math.abs(o-R)*2*s;x=Math.min(x,_)}}const k=s,A=Math.abs((u-i)/(g-o)),M=Math.abs((f-i)/(S-o));if(S<o&&M<k){const N=Math.abs(o-S)*2*s;x=Math.min(x,N)}else if(g>o&&A<k){const N=Math.abs(o-g)*2*s;x=Math.min(x,N)}const b=Math.abs((m-o)/(y-i)),L=Math.abs((v-o)/(D-i));if(D<i&&L<c){const I=Math.abs(i-D)*2;x=Math.min(x,I)}else if(y>i&&b<c){const I=Math.abs(i-y)*2;x=Math.min(x,I)}return x}function Gk(e,t,i,o){let s=!1,a=1/0;for(const n of e){let r=n[n.length-1],[l,c]=r;for(const p of n){const[d,u]=p;u>i!=c>i&&t<(l-d)*(i-u)/(c-u)+d&&(s=!s);const g=Bk(r,p,t,i,o);a=Math.min(a,g),r=p,l=d,c=u}}return(s?1:-1)*a}function Hs(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function Vk(e,t,i,o,s,a){const n=s-a/2,r=s+a/2,[l,c]=t,[p,d]=i,u=p-l,g=d-c,[y,m]=l<=p?t:i,[f,S]=l<=p?i:t;if(u!==0){const D=g/u;for(let v=0;v<=1;v+=1){const k=((v===0?n:r)-c)/D+l;k>=y&&k<=f&&Hs(e,o,k)}}else Math.max(n,Math.min(c,d))<=Math.min(r,Math.max(c,d))&&Hs(e,o,l);return f<o&&S>=n&&S<=r?Hs(e,o,f):y>o&&m>=n&&m<=r&&Hs(e,o,y),e}function Kk(e,t,i,o){const s={minX:-1/0,maxX:1/0};for(const r of e){let l=r[r.length-1];for(const c of r)Vk(s,l,c,t,i,o),l=c}const{minX:a,maxX:n}=s;return Number.isFinite(a)&&Number.isFinite(n)?{x:t+(a+n)/2,width:n-a}:{x:t,width:0}}import{_ModuleSupport as zk}from"ag-charts-community";var{Property:ke,SeriesProperties:Wk,makeSeriesTooltip:$k}=zk,be=class extends Wk{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new So,this.tooltip=$k()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,opacity:1}}};h([ke],be.prototype,"topology",2),h([ke],be.prototype,"title",2),h([ke],be.prototype,"legendItemName",2),h([ke],be.prototype,"idKey",2),h([ke],be.prototype,"idName",2),h([ke],be.prototype,"topologyIdKey",2),h([ke],be.prototype,"labelKey",2),h([ke],be.prototype,"labelName",2),h([ke],be.prototype,"colorKey",2),h([ke],be.prototype,"colorName",2),h([ke],be.prototype,"colorRange",2),h([ke],be.prototype,"fill",2),h([ke],be.prototype,"fillOpacity",2),h([ke],be.prototype,"stroke",2),h([ke],be.prototype,"strokeOpacity",2),h([ke],be.prototype,"strokeWidth",2),h([ke],be.prototype,"lineDash",2),h([ke],be.prototype,"lineDashOffset",2),h([ke],be.prototype,"padding",2),h([ke],be.prototype,"itemStyler",2),h([ke],be.prototype,"label",2),h([ke],be.prototype,"tooltip",2);var{getMissCount:Hk,createDatumId:hp,SeriesNodePickMode:pp,valueProperty:Xs,ColorScale:Xk,Group:dp,Selection:Kn,Text:Yk,PointerEvents:Uk,applyShapeStyle:qk,getLabelStyles:jk,mergeDefaults:up}=lp,gp=lp.MercatorScale.fixedScale(),Ys=class extends Ro{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{color:["colorKey"],label:["labelKey"]},propertyNames:{color:["colorName"],label:["labelName"]},pickModes:[pp.EXACT_SHAPE_MATCH,pp.NEAREST_NODE]}),this.properties=new be,this._chartTopology=void 0,this.colorScale=new Xk,this.itemGroup=this.contentGroup.appendChild(new dp({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new dp({name:"itemLabelGroup"})),this.datumSelection=Kn.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Kn.select(this.itemLabelGroup,Yk),this.highlightDatumSelection=Kn.select(this.highlightGroup,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=Uk.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Zi;return e.renderMode=1,e.lineJoin="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,colorScale:o}=this,{topologyIdKey:s,idKey:a,colorKey:n,labelKey:r,colorRange:l}=this.properties,c=new Map;i?.features.forEach(m=>{const f=m.properties?.[s];f==null||!En(m.geometry,1)||c.set(f,m)});const p=this.colorScale.type,d=this.scale?.type,{dataModel:u,processedData:g}=await this.requestDataModel(e,t,{props:[Xs(a,d,{id:"idValue",includeProperty:!1}),Xs(a,d,{id:"featureValue",includeProperty:!1,processor:()=>m=>c.get(m)}),...r?[Xs(r,"category",{id:"labelValue"})]:[],...n?[Xs(n,p,{id:"colorValue"})]:[]]}),y=u.resolveColumnById(this,"featureValue",g);if(this.topologyBounds=y.reduce((m,f)=>{const S=f?.geometry;return S==null?m:Qi(S,m)},void 0),l!=null&&this.isColorScaleValid()){const m=u.resolveProcessedDataIndexById(this,"colorValue");o.domain=g.domain.values[m],o.range=l,o.update()}i==null&&cp.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=Hk(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelLayout(e,t,i,o,s){if(t==null||o==null)return;const{idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:p,padding:d,label:u}=this.properties;if(c==null||!u.enabled)return;const g=this.getLabelText(t,e,c,"label",[],u,{value:t,datum:e,idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:p});if(g==null)return;const y=i.measureText(String(g)),m=g.split(`
`).length,f=(y.width+2*d)/(m*Ok(u.fontSize)+2*d);if(s?.geometry===o&&s?.labelText===g&&s?.aspectRatio===f)return s;const S=Jt(o,gp),D=Vs(S);if(D==null)return;const v=Fk(D,{aspectRatio:f,precision:.001});if(v==null)return;const{x,y:k,maxWidth:A}=v;return{geometry:o,labelText:g,aspectRatio:f,x,y:k,maxWidth:A,fixedPolygon:D}}getLabelDatum(e,t){const{scale:i}=this;if(i==null)return;const{padding:o,label:s}=this.properties,{labelText:a,aspectRatio:n,x:r,y:l,maxWidth:c,fixedPolygon:p}=e,d={width:Math.ceil(c*t),height:Math.ceil(c*t/n),meta:r},u=mo(a,s,{padding:o},(x,k)=>{if(!k)return d;const A=Kk(p,r,l,x/t);return{width:A.width*t,height:x,meta:A.x}});if(u==null)return;const[{text:g,fontSize:y,lineHeight:m,width:f},S]=u,D=f<d.width?r:S,v=this.scale.convert(gp.invert([D,l]));return{x:v[0],y:v[1],text:g,fontSize:y,lineHeight:m}}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:o,scale:s,previousLabelLayouts:a}=this,{idKey:n,colorKey:r,labelKey:l,label:c,legendItemName:p}=o;if(t==null||i==null)return;const d=s!=null?(s.range[1][0]-s.range[0][0])/s.bounds.width:NaN,u=t.resolveColumnById(this,"idValue",i),g=t.resolveColumnById(this,"featureValue",i),y=l!=null?t.resolveColumnById(this,"labelValue",i):void 0,m=r!=null?t.resolveColumnById(this,"colorValue",i):void 0,f=wk(c),S=new Map;this.previousLabelLayouts=S;const D=[],v=[],x=[];(i.dataSources.get(this.id)??[]).forEach((M,b)=>{const L=u[b],I=m?.[b],N=y?.[b],R=g[b]?.geometry??void 0;R==null&&x.push(L);const P=this.getLabelLayout(M,N,f,R,a?.get(L));P!=null&&S.set(L,P);const _=P!=null&&s!=null?this.getLabelDatum(P,d):void 0;_!=null&&v.push(_);const T=R!=null&&s!=null?Jt(R,s):void 0;D.push({series:this,itemId:n,datum:M,datumIndex:b,idValue:L,colorValue:I,labelValue:N,projectedGeometry:T,legendItemName:p,style:this.getItemStyle({datum:M,datumIndex:b,colorValue:I},!1)})});const A=10;if(x.length>A){const M=x.length-A;x.length=A,x.push(`(+${M} more)`)}return x.length>0&&cp.warnOnce("some data items do not have matches in the provided topology",x),{itemId:e,nodeData:D,labelData:v}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,labelSelection:t,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let o=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:s}=this.properties,a=s!=null&&o?.datum==null&&s===o?.legendItemName;o!=null&&(o.series!==this&&!a||o.datum==null)&&(o=void 0);const n=this.contextNodeData?.nodeData??[],r=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:e}),this.updateDatumStyles({datumSelection:e,isHighlight:!1}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:t}),this.updateLabelNodes({labelSelection:t}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:o!=null?[o]:[],datumSelection:i}),this.updateDatumStyles({datumSelection:i,isHighlight:!0}),this.updateDatumNodes({datumSelection:i})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>hp(t.idValue))}getItemStyle({datumIndex:e,datum:t,colorValue:i},o){const{id:s,properties:a,colorScale:n}=this,{colorRange:r,itemStyler:l}=a,c=this.getHighlightStyle(o,e),p=up(c,a.getStyle());!o&&i!=null&&(p.fill=this.isColorScaleValid()?n.convert(i):r?.[0]??p.fill);let d=p;if(l!=null&&e!=null){const u=this.cachedDatumCallback(hp(e,o?"highlight":"node"),()=>{const g=this.ctx.highlightManager?.getActiveHighlight(),y=this.getHighlightStateString(g,o,e);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(l,{seriesId:s,datum:t,highlighted:o,highlightState:y,...d}))});u&&(d=up(u,d))}return d}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o,t)})}updateDatumNodes({datumSelection:e}){const t=ip(this.scale);e.each((i,o)=>{const{projectedGeometry:s}=o;if(s==null){i.visible=!1,i.projectedGeometry=void 0;return}i.visible=!0,i.projectedGeometry=s,qk(i,o.style,t)})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{properties:t}=this,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((o,{x:s,y:a,text:n,fontSize:r,lineHeight:l},c)=>{const p=jk(this,void 0,t,t.label,!1,i),{color:d,fontStyle:u,fontWeight:g,fontFamily:y}=p;o.visible=!0,o.x=s,o.y=a,o.text=n,o.fill=d,o.fontStyle=u,o.fontWeight=g,o.fontSize=r,o.lineHeight=l,o.fontFamily=y,o.textAlign="center",o.textBaseline="middle",o.fillOpacity=this.getHighlightStyle(!1,c).opacity??1,o.setBoxing(p)})}resetAnimation(){}pickNodeClosestDatum({x:e,y:t}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceSquared(e,t);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,o=i!=null?Vs(i):void 0,s=o!=null?Bn(o,2):void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:o}=this,{fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c}=o;let{fill:p}=o;if(e!=null&&this.isColorScaleValid()){const u=t.resolveColumnById(this,"colorValue",i)[e];p=this.colorScale.convert(u)}return{marker:{fill:p,fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:n,idKey:r,idName:l,colorKey:c,colorRange:p,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&p!=null){const u=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,series:this.getFormatterContext("color"),colorRange:p,colorDomain:u}]}else return e==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:n??a??l??r},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s,ctx:{formatManager:a}}=this,{idKey:n,idName:r,colorKey:l,colorName:c,labelKey:p,labelName:d,legendItemName:u,title:g,tooltip:y}=s;if(!i||!o)return;const m=o.dataSources.get(this.id)?.[e],f=i.resolveColumnById(this,"idValue",o)[e],S=l!=null?i.resolveColumnById(this,"colorValue",o)[e]:void 0,D=[];if(this.isLabelEnabled()&&p!=null&&p!==n){const x=i.resolveColumnById(this,"labelValue",o)[e],k=a.format(this.callWithContext.bind(this),{type:"category",value:x,datum:m,seriesId:t,legendItemName:u,key:p,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});D.push({label:d,fallbackLabel:p,value:k??x})}if(S!=null){const x=i.getDomain(this,"colorValue","value",o),k=a.format(this.callWithContext.bind(this),{type:"number",value:S,datum:m,seriesId:t,legendItemName:u,key:l,source:"tooltip",property:"color",domain:x,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});D.push({label:c,fallbackLabel:l,value:k??String(S)})}const v=this.getItemStyle({datum:m,datumIndex:e,colorValue:S},!1);return this.formatTooltipWithContext(y,{heading:f,title:g??u,symbol:this.legendItemSymbol(e),data:D},{seriesId:t,datum:m,title:g,idKey:n,idName:r,colorKey:l,colorName:c,labelKey:p,labelName:d,...v})}computeFocusBounds(e){return zh(this,e)}hasItemStylers(){return this.properties.itemStyler!=null}};Ys.className="MapShapeSeries",Ys.type="map-shape";import{_ModuleSupport as Jk}from"ag-charts-community";import{constant as Zk,geoJson as Qk,required as yp,string as $t}from"ag-charts-core";var{commonSeriesOptionsDefs:eA,mapShapeSeriesThemeableOptionsDef:tA,without:iA}=Jk,oA={...iA(eA,["highlightStyle","highlight"]),...tA,type:yp(Zk("map-shape")),idKey:yp($t),colorKey:$t,labelKey:$t,idName:$t,colorName:$t,labelName:$t,topology:Qk,topologyIdKey:$t,legendItemName:$t,title:$t},AC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:e=>new Ys(e),themeTemplate:{...To,series:{fill:Et({$applySwitch:[{$path:"type"},{$mapPalette:"fill"},["gradient",to.FILL_GRADIENT_LINEAR_DEFAULTS],["image",to.FILL_IMAGE_DEFAULTS],["pattern",to.FILL_PATTERN_DEFAULTS]]}),stroke:{$ref:"chartBackgroundColor"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},Et(to.SAFE_RANGE2_OPERATION)]},fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{...to.LABEL_BOXING_DEFAULTS,color:{$ref:"chartBackgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"},highlight:Et(to.multiSeriesHighlightStyle(!0))},tooltip:{range:"exact"}}},mp={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:oA,create:e=>new Ys(e)};import{_ModuleSupport as zn}from"ag-charts-community";import{_ModuleSupport as sA}from"ag-charts-community";import{Logger as aA}from"ag-charts-core";import{_ModuleSupport as nA}from"ag-charts-community";var{Property:Ht,SeriesProperties:rA,makeSeriesTooltip:lA}=nA,wt=class extends rA{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=lA()}};h([Ht],wt.prototype,"topology",2),h([Ht],wt.prototype,"fill",2),h([Ht],wt.prototype,"fillOpacity",2),h([Ht],wt.prototype,"stroke",2),h([Ht],wt.prototype,"strokeOpacity",2),h([Ht],wt.prototype,"strokeWidth",2),h([Ht],wt.prototype,"lineDash",2),h([Ht],wt.prototype,"lineDashOffset",2),h([Ht],wt.prototype,"tooltip",2);var{createDatumId:cA,Selection:hA,Group:pA,PointerEvents:fp}=sA,Us=class extends Ro{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new wt,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new pA({name:"itemGroup"})),this.datumSelection=hA.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=fp.None}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new Zi;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=fp.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const o=i.geometry;return o==null?t:Qi(o,t)},void 0),e==null&&aA.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i,properties:o}=this;if(t==null)return;const{fill:s,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:p}=o,d=[],u=[];return t.features.forEach((g,y)=>{const{geometry:m}=g,f=m!=null&&i!=null?Jt(m,i):void 0;f!=null&&d.push({series:this,itemId:y,datum:g,datumIndex:0,index:y,projectedGeometry:f,style:{fill:s,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:p}})}),{itemId:e,nodeData:d,labelData:u}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>cA(t.index))}updateDatumNodes(e){const{datumSelection:t}=e;t.each((i,o)=>{const{projectedGeometry:s}=o;if(s==null){i.visible=!1,i.projectedGeometry=void 0;return}i.visible=!0,i.projectedGeometry=s,i.setProperties(o.style)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}pickFocus(){}computeFocusBounds(e){}hasItemStylers(){return!1}};Us.className="MapShapeBackgroundSeries",Us.type="map-shape-background";import{_ModuleSupport as dA}from"ag-charts-community";import{constant as uA,geoJson as gA,required as yA}from"ag-charts-core";var{commonSeriesOptionsDefs:mA,mapShapeBackgroundSeriesThemeableOptionsDef:fA}=dA,SA={...fA,...mA,type:yA(uA("map-shape-background")),topology:gA},CC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:e=>new Us(e),themeTemplate:{...To,series:{fill:Et({$applySwitch:[{$path:"type"},{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},["gradient",zn.FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS],["image",zn.FILL_IMAGE_DEFAULTS],["pattern",zn.FILL_PATTERN_HIERARCHY_DEFAULTS]]}),stroke:{$ref:"chartBackgroundColor"},strokeWidth:1}}},Sp={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:SA,create:e=>new Us(e)};import{_ModuleSupport as xA}from"ag-charts-community";import{_ModuleSupport as bA}from"ag-charts-community";import{_ModuleSupport as qs}from"ag-charts-community";import{isDefined as vA}from"ag-charts-core";var{DEFAULT_POLAR_DIRECTION_KEYS:DA,DEFAULT_POLAR_DIRECTION_NAMES:kA,ChartAxisDirection:Ot,PolarAxis:AA,diff:MA,fixNumericExtent:IA,groupAccumulativeValueProperty:xp,keyProperty:LA,normaliseGroupTo:NA,resetLabelFn:TA,seriesLabelFadeInAnimation:RA,seriesLabelFadeOutAnimation:CA,valueProperty:PA,animationValidation:_A,createDatumId:bp,SeriesNodePickMode:vp,normalizeAngle360:Dp,CategoryScale:EA,motion:kp,applyShapeStyle:wA,isGradientFill:OA,updateLabelNode:FA,mergeDefaults:Ap,getItemStyles:Mp}=qs,BA=class extends qs.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},Ip=class extends qs.PolarSeries{constructor(e,{animationResetFns:t}){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:DA,propertyNames:kA,canHaveAxes:!0,pickModes:[vp.NEAREST_NODE,vp.EXACT_SHAPE_MATCH],animationResetFns:{...t,label:TA}}),this.NodeEvent=BA,this.groupScale=new EA,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Ot.Angle)return t.getDomain(this,"angleValue","key",i);{const o=t.getDomain(this,"radiusValue-end","value",i),s=Number.isFinite(o[1]-o[0])?[o[0]>0?0:o[0],o[1]<0?0:o[1]]:[];return IA(s)}}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:o}=this.properties,s=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),n=`${a}-trailing`,r=[];vA(o)&&r.push(NA([a,n],Math.abs(o))),s&&this.processedData&&r.push(MA(this.id,this.processedData)),s&&r.push(_A());const l=this.visible?{}:{forceValue:0},c=this.axes[Ot.Radius]?.scale.type,p=this.axes[Ot.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[LA(t,p,{id:"angleValue"}),PA(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...xp(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},c),...xp(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:n,separateNegative:!0,...l},c),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return e!==o.r||t!==o.cx||i!==o.cy?(this.circleCache={r:e,cx:t,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Ot.Radius]?.isReversed()}maybeRefreshNodeData(){!this.didCircleChange()&&!this.nodeDataRefresh||(this.contextNodeData=this.createNodeData(),this.nodeData=this.contextNodeData?.nodeData??[],this.nodeDataRefresh=!1)}getAxisInnerRadius(){const e=this.axes[Ot.Radius];return e instanceof AA?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t,groupScale:i}=this;if(!t||!e||e.type!=="grouped")return;const o=this.axes[Ot.Angle],s=this.axes[Ot.Radius],a=o?.scale,n=s?.scale;if(!a||!n)return;const r=t.resolveKeysById(this,"angleValue",e),l=t.resolveColumnById(this,"radiusValue-start",e),c=t.resolveColumnById(this,"radiusValue-end",e),p=t.resolveColumnById(this,"radiusValue-raw",e),d=t.resolveProcessedDataIndexById(this,"radiusValue-range");let u=0,g=0;o instanceof ni&&(u=o.groupPaddingInner,g=o.paddingInner);const m=(a.bandwidth??0)*(1-g),{index:f,visibleGroupCount:S}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:S}).map((E,C)=>String(C)),i.range=[-m/2,m/2],i.paddingInner=S>1?u:0;const D=this.isRadiusAxisReversed(),v=D?this.radius:this.getAxisInnerRadius(),x=D?this.getAxisInnerRadius():this.radius,k=x+v,{angleKey:A,radiusKey:M,angleName:b,radiusName:L,label:I}=this.properties,N=this.getSeriesDomain(Ot.Radius),R=(E,C,w,F)=>{const B=this.getLabelText(C,E,M,"radius",N,I,{value:C,datum:E,angleKey:A,radiusKey:M,angleName:b,radiusName:L});if(B)return{x:w,y:F,text:B,textAlign:"center",textBaseline:"middle"}},P=[],_={itemId:M,nodeData:P,labelData:P,styles:Mp(this.getItemStyle.bind(this))};if(!this.visible)return _;const{dataSources:T}=e,O=T.get(this.id)??[];for(const{datumIndex:E,group:C}of t.forEachGroupDatum(this,e)){const w=O[E],F=r[E];if(F==null)return;const B=p[E],V=B>=0&&!Object.is(B,-0),G=l[E],K=c[E],W=C.aggregation[d][V?1:0]??0,z=V===D;if(G===void 0||K===void 0)return;let $,Y;if(O.length===1)$=-.5*Math.PI,Y=1.5*Math.PI;else{const de=a.convert(F);$=Dp(de+i.convert(String(f))),Y=Dp($+i.bandwidth)}const oe=$+i.bandwidth/2,ae=k-n.convert(G),q=k-n.convert(K),j=(ae+q)/2,Z=k-n.convert(0),he=k-n.convert(W),ie=Math.cos(oe)*j,J=Math.sin(oe)*j,pe=this.properties.label.enabled?R(w,B,ie,J):void 0,ee=this.getColumnWidth($,Y);P.push({series:this,datum:w,datumIndex:E,point:{x:ie,y:J,size:0},midPoint:{x:ie,y:J},label:pe,angleValue:F,radiusValue:B,negative:z,innerRadius:ae,outerRadius:q,stackInnerRadius:Z,stackOuterRadius:he,startAngle:$,endAngle:Y,midAngle:oe,axisInnerRadius:v,axisOuterRadius:x,columnWidth:ee,index:E})}return{itemId:M,nodeData:P,labelData:P,styles:Mp(this.getItemStyle.bind(this))}}getColumnWidth(e,t){return NaN}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemStyle(e,t,i){const{id:o,properties:s}=this,{angleKey:a,radiusKey:n,itemStyler:r}=s,l=this.getHighlightStyle(t,e?.datumIndex,i);let p=Ap(l,s.getStyle());if(r!=null&&e!=null){const d=this.cachedDatumCallback(bp(this.getDatumId(e),t?"highlight":"node"),()=>{const u=this.ctx.highlightManager?.getActiveHighlight(),g=this.getHighlightStateString(u,t,e.datumIndex);return this.callWithContext(r,{seriesId:o,datum:e.datum,highlighted:t,highlightState:g,angleKey:a,radiusKey:n,...p})});d&&(p=Ap(d,p))}return p}updateSectorSelection(e,t){const{contextNodeData:i}=this;if(!i)return;const o=this.ctx.highlightManager.getActiveHighlight();let s=[];if(t){const p=this.ctx.highlightManager?.getActiveHighlight();p?.datum&&p.series===this&&s.push(p)}else s=this.nodeData;const a=this.isRadiusAxisReversed(),n=a?this.radius:this.getAxisInnerRadius(),r=a?this.getAxisInnerRadius():this.radius,l=this.getShapeFillBBox(),c=this.hasItemStylers();e.update(s,void 0,p=>this.getDatumId(p)).each((p,d)=>{const{midPoint:u}=d;c&&(d.style=this.getItemStyle(d,t));const g=d.style??i.styles[this.getHighlightState(o,t,d.datumIndex)],y=g.fill,f=OA(y)&&y.bounds==="item"?{centerX:u?.x??0,centerY:u?.y??0}:{centerX:0,centerY:0,innerRadius:n,outerRadius:r};this.updateItemPath(p,d,t),wA(p,g,l,f),p.cornerRadius=g.cornerRadius??0,p.lineJoin="round"})}updateLabels(){const e=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.update(this.nodeData).each((t,i)=>{FA(this,t,this.properties,this.properties.label,i.label,!1,e),t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1})}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();kp.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),RA(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();kp.fromToMotion(this.id,"datums",t,[e],i),CA(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:p}=a,d=s[Ot.Angle],u=s[Ot.Radius],g=this.nodeData?.[e];if(!i||!o||!d||!u||!g)return;const y=o.dataSources.get(this.id)?.[e],m=i.resolveKeysById(this,"angleValue",o)[e],f=i.resolveColumnById(this,"radiusValue-raw",o)[e];if(m==null)return;const S=this.getItemStyle(g,!1);return this.formatTooltipWithContext(p,{heading:this.getAxisValueText(d,"tooltip",m,y,n,void 0),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(u,"tooltip",f,y,l,void 0)}]},{seriesId:t,datum:y,title:r,angleKey:n,angleName:r,radiusKey:l,radiusName:c,...S})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n}=this.properties,r={fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n};return qs.isGradientFill(r.fill)&&(r.fill={...r.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:r}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{radiusKey:o,radiusName:s,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:o,seriesId:t,enabled:i,label:{text:s??o},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return bp(e.angleValue)}computeLabelsBBox(){return null}};import{_ModuleSupport as GA}from"ag-charts-community";var{SeriesProperties:VA,makeSeriesTooltip:KA,Property:Ve,Label:zA}=GA,Ce=class extends VA{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new zA,this.tooltip=KA()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,cornerRadius:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,cornerRadius:r,opacity:1}}};h([Ve],Ce.prototype,"angleKey",2),h([Ve],Ce.prototype,"angleName",2),h([Ve],Ce.prototype,"radiusKey",2),h([Ve],Ce.prototype,"radiusName",2),h([Ve],Ce.prototype,"fill",2),h([Ve],Ce.prototype,"fillOpacity",2),h([Ve],Ce.prototype,"stroke",2),h([Ve],Ce.prototype,"strokeWidth",2),h([Ve],Ce.prototype,"strokeOpacity",2),h([Ve],Ce.prototype,"lineDash",2),h([Ve],Ce.prototype,"lineDashOffset",2),h([Ve],Ce.prototype,"cornerRadius",2),h([Ve],Ce.prototype,"itemStyler",2),h([Ve],Ce.prototype,"rotation",2),h([Ve],Ce.prototype,"stackGroup",2),h([Ve],Ce.prototype,"normalizedTo",2),h([Ve],Ce.prototype,"label",2),h([Ve],Ce.prototype,"tooltip",2);import{_ModuleSupport as WA}from"ag-charts-community";import{_ModuleSupport as $A}from"ag-charts-community";var{motion:HA}=$A;function Lp(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(n,r,l)=>{t.forEach(c=>{const p=e[c];let d=(l==="removed"||l==="updated"?n:r)[c],u=(l==="removed"?n:r)[c];isNaN(u)&&(u=n.previousDatum?.[c]??NaN);const g=d-u;Math.abs(g)>Math.PI&&(d-=Math.sign(g)*2*Math.PI),p.set(r,{from:d,to:u})})},o=(n,r)=>({startAngle:e.startAngle.get(n)[r],endAngle:e.endAngle.get(n)[r]});return{calculate:i,from:n=>o(n,"from"),to:n=>o(n,"to")}}function Np(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function XA(e){const t=Lp();return{toFn:(s,a,n)=>{const{startAngle:r,endAngle:l}=t.to(a);let c,p,d,u,g;return n==="removed"?(c=s.innerRadius,p=s.innerRadius,d=s.columnWidth,u=s.axisInnerRadius,g=s.axisOuterRadius):(c=isNaN(a.innerRadius)?e:a.innerRadius,p=isNaN(a.outerRadius)?e:a.outerRadius,d=isNaN(a.columnWidth)?s.columnWidth:a.columnWidth,u=a.axisInnerRadius,g=a.axisOuterRadius),{innerRadius:c,outerRadius:p,columnWidth:d,axisInnerRadius:u,axisOuterRadius:g,startAngle:r,endAngle:l}},fromFn:(s,a,n)=>{n=Np(s,a,n),t.calculate(s,a,n);const{startAngle:r,endAngle:l}=t.from(a);let c,p,d,u,g;n==="removed"||n==="updated"?(c=s.innerRadius,p=s.outerRadius,d=s.columnWidth,u=s.axisInnerRadius,g=s.axisOuterRadius):(c=e,p=e,d=a.columnWidth,u=a.axisInnerRadius,g=a.axisOuterRadius);const y=HA.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:p,columnWidth:d,axisInnerRadius:u,axisOuterRadius:g,startAngle:r,endAngle:l,phase:y}}}}function YA(e,{innerRadius:t,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:n,endAngle:r}){return{innerRadius:t,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:n,endAngle:r}}var{SectorBox:js,motion:UA}=WA;function Wn(e){const{negative:t,innerRadius:i,outerRadius:o,stackInnerRadius:s,stackOuterRadius:a}=e;return{innerRadius:t?a:s,outerRadius:t?s:a,clipInnerRadius:t?o:i,clipOuterRadius:t?i:o}}function qA(e){const t=Lp();return{toFn:(s,a,n)=>{const{startAngle:r,endAngle:l}=t.to(a);let c,p,d;if(n==="removed")c=e,p=e,d=new js(r,l,c,p);else{let u,g;({innerRadius:c,outerRadius:p,clipInnerRadius:u,clipOuterRadius:g}=Wn(a)),isNaN(c)&&(c=e),isNaN(p)&&(p=e),isNaN(u)&&(u=e),isNaN(g)&&(g=e),d=new js(r,l,u,g)}return{innerRadius:c,outerRadius:p,startAngle:r,endAngle:l,clipSector:d}},fromFn:(s,a,n)=>{n=Np(s,a,n),t.calculate(s,a,n);const{startAngle:r,endAngle:l}=t.from(a);let c,p,d;n==="removed"||n==="updated"?(c=s.innerRadius,p=s.outerRadius,d=s.clipSector):(c=e,p=e),d??(d=new js(r,l,c,p));const u=UA.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:p,startAngle:r,endAngle:l,clipSector:d,phase:u}}}}function jA(e,t){const{startAngle:i,endAngle:o}=t,{innerRadius:s,outerRadius:a,clipInnerRadius:n,clipOuterRadius:r}=Wn(t),l=new js(i,o,n,r);return{innerRadius:s,outerRadius:a,startAngle:i,endAngle:o,clipSector:l}}var{Sector:JA,SectorBox:ZA,PolarZIndexMap:$n}=bA,Js=class extends Ip{constructor(e){super(e,{animationResetFns:{item:jA}}),this.properties=new Ce}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,$n.FOREGROUND,e],this.highlightGroup.zIndex=[0,$n.HIGHLIGHT,e],this.labelGroup.zIndex=[0,$n.LABEL,e],!0}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new JA}updateItemPath(e,t,i){const{negative:o}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=o?0:this.properties.cornerRadius,e.endOuterCornerRadius=o?0:this.properties.cornerRadius,e.startInnerCornerRadius=o?this.properties.cornerRadius:0,e.endInnerCornerRadius=o?this.properties.cornerRadius:0,i){const{startAngle:s,endAngle:a}=t,{innerRadius:n,outerRadius:r,clipInnerRadius:l,clipOuterRadius:c}=Wn(t);e.innerRadius=n,e.outerRadius=r,e.startAngle=s,e.endAngle=a,e.clipSector=new ZA(s,a,l,c)}}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return qA(e)}hasItemStylers(){return this.properties.itemStyler!=null}};Js.className="NightingaleSeries",Js.type="nightingale";import{_ModuleSupport as QA}from"ag-charts-community";import{boolean as Tp,constant as eM,number as tM,required as Hn,string as Po}from"ag-charts-core";var{commonSeriesOptionsDefs:iM,nightingaleSeriesThemeableOptionsDef:oM}=QA,sM={...iM,...oM,type:Hn(eM("nightingale")),angleKey:Hn(Po),radiusKey:Hn(Po),angleName:Po,radiusName:Po,grouped:Tp,stacked:Tp,stackGroup:Po,normalizedTo:tM};import{_ModuleSupport as Xn}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:Rp,POLAR_AXIS_SHAPE:Cp},FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:aM,FILL_IMAGE_DEFAULTS:nM,FILL_PATTERN_DEFAULTS:rM}=Xn,lM={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",aM],["image",nM],["pattern",rM]]},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$palette:"stroke"}]},strokeWidth:1,label:{...Xn.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:Xn.multiSeriesHighlightStyle()},axes:{[Rp.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:Cp.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Rp.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:Cp.CIRCLE}}}},{ThemeConstants:{POLAR_AXIS_TYPE:Pp}}=xA,zC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:e=>new Js(e),defaultAxes:[{type:Pp.ANGLE_CATEGORY},{type:Pp.RADIUS_NUMBER}],themeTemplate:lM,stackable:!0,groupable:!0,stackedByDefault:!0},_p={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:sM,create:e=>new Js(e)};import{_ModuleSupport as Ep}from"ag-charts-community";import{cachedTextMeasurer as cM,calcLineHeight as hM}from"ag-charts-core";import{_ModuleSupport as pM}from"ag-charts-community";var{SeriesProperties:dM,makeSeriesTooltip:uM,Property:Pe,Label:wp,DropShadow:gM}=pM,yM=class extends wp{},Yn=class extends wp{constructor(){super(...arguments),this.spacing=0}};h([Pe],Yn.prototype,"spacing",2),h([Pe],Yn.prototype,"placement",2);var we=class extends dM{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new gM().set({enabled:!1}),this.label=new yM,this.stageLabel=new Yn,this.tooltip=uM()}getStyle(e=0){const{fills:t,strokes:i,fillOpacity:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this;return{fill:t[e%t.length],fillOpacity:o,stroke:i[e%i.length],strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,opacity:1}}};h([Pe],we.prototype,"stageKey",2),h([Pe],we.prototype,"valueKey",2),h([Pe],we.prototype,"fills",2),h([Pe],we.prototype,"fillOpacity",2),h([Pe],we.prototype,"strokes",2),h([Pe],we.prototype,"strokeWidth",2),h([Pe],we.prototype,"strokeOpacity",2),h([Pe],we.prototype,"lineDash",2),h([Pe],we.prototype,"lineDashOffset",2),h([Pe],we.prototype,"direction",2),h([Pe],we.prototype,"reverse",2),h([Pe],we.prototype,"spacing",2),h([Pe],we.prototype,"aspectRatio",2),h([Pe],we.prototype,"itemStyler",2),h([Pe],we.prototype,"shadow",2),h([Pe],we.prototype,"label",2),h([Pe],we.prototype,"stageLabel",2),h([Pe],we.prototype,"tooltip",2);function Op(e,{x:t,y:i,top:o,right:s,bottom:a,left:n}){e.x0=t-o/2,e.x1=t+o/2,e.x2=t+a/2,e.x3=t-a/2,e.y0=i-n/2,e.y1=i-s/2,e.y2=i+s/2,e.y3=i+n/2}function mM(e){return{fromFn:(s,a)=>{const{x:n,y:r}=a;let{top:l,right:c,bottom:p,left:d}=a;return e==="vertical"?(l=0,p=0):(d=0,c=0),{x:n,y:r,top:l,right:c,bottom:p,left:d}},toFn:(s,a)=>{const{x:n,y:r,top:l,right:c,bottom:p,left:d}=a;return{x:n,y:r,top:l,right:c,bottom:p,left:d}},applyFn:Op}}var{StateMachine:fM,valueProperty:Fp,SeriesNodePickMode:Bp,createDatumId:SM,BBox:Un,Group:qn,Selection:Zs,Text:Gp,PointerEvents:Vp,applyShapeStyle:xM,mergeDefaults:Kp,fromToMotion:bM,seriesLabelFadeInAnimation:vM,getLabelStyles:DM}=Ep,jn=class extends Ep.DataModelSeries{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[Bp.EXACT_SHAPE_MATCH,Bp.NEAREST_NODE]}),this.properties=new we,this.itemGroup=this.contentGroup.appendChild(new qn({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new qn({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new qn({name:"stageLabelGroup"})),this.datumSelection=Zs.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Zs.select(this.itemLabelGroup,Gp),this.stageLabelSelection=Zs.select(this.stageLabelGroup,Gp),this.highlightDatumSelection=Zs.select(this.highlightGroup,()=>this.nodeFactory()),this.animationState=new fM("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=Vp.None,this.stageLabelGroup.pointerEvents=Vp.None}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)))}nodeFactory(){return new Pt}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}async processData(e){if(this.data==null)return;const{id:t,visible:i,ctx:{legendManager:o}}=this,{stageKey:s,valueKey:a}=this.properties,n="category",r="number",l=(p,d,u)=>i&&o.getItemEnabled({seriesId:t,itemId:u}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(e,this.data,{props:[Fp(s,n,{id:"xValue"}),Fp(a,r,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:o,visible:s,ctx:{legendManager:a}}=this,{stageKey:n,valueKey:r,direction:l,reverse:c=l==="horizontal",spacing:p,aspectRatio:d,label:u,stageLabel:g}=o;if(t==null||i==null)return;const y=l==="horizontal",m=t.resolveColumnById(this,"xValue",i),f=t.resolveColumnById(this,"yValue",i),S=t.getDomain(this,"xValue","value",i),D=t.getDomain(this,"yValue","value",i),v=cM(g);let x,k;y?(x="center",k=g.placement==="before"?"bottom":"top"):(x=g.placement==="after"?"left":"right",k="middle");const A=g.enabled?[]:void 0;let M=0,b=0,L=0;const I=i.dataSources.get(this.id)??[];I.forEach((V,G)=>{const K=m[G],W=f[G],z=s&&a.getItemEnabled({seriesId:e,itemId:G});if(L+=W,A==null)return;const $=this.getLabelText(K,V,n,"x",S,this.properties.stageLabel,{datum:V,value:W,stageKey:n,valueKey:r}),{width:Y}=v.measureText($),oe=$.split(`
`).length*hM(u.fontSize);M=Math.max(M,Y),b=Math.max(b,oe),A.push({x:NaN,y:NaN,text:$,textAlign:x,textBaseline:k,visible:z})});const N=this._nodeDataDependencies?.seriesRectWidth??0,R=this._nodeDataDependencies?.seriesRectHeight??0,P=p*(i.input.count-1);let _;if(y){const V=b+g.spacing;_=new Un(0,g.placement==="before"?V:0,N,R-V)}else{const V=M+g.spacing;_=new Un(g.placement==="after"?0:V,0,N-V,R)}if(d!=null&&d!==0){const V=l==="horizontal"?1/d:d,G=Math.min(_.width,_.height*V),K=G/V;_=new Un(_.x+(_.width-G)/2,_.y+(_.height-K)/2,G,K)}let T,O;y?O=g.placement==="before"?_.y-g.spacing:_.y+_.height+g.spacing:T=g.placement==="after"?_.x+_.width+g.spacing:_.x-g.spacing;const E=_.width-(y?P:0),C=_.height-(y?0:P);if(E<0||C<0)return;const w=[],F=[];let B=0;return I.forEach((V,G)=>{const K=m[G],W=f[G],z=s&&a.getItemEnabled({seriesId:e,itemId:G}),$=B+W,Y=(B+$)/(2*L),oe=($-B)/L,ae=y?E*Y+p*G:E*.5,q=y?C*.5:C*Y+p*G,j=_.x+ae,Z=_.y+q;if(A!=null){const le=A[G];le.x=T??j,le.y=O??Z}let he,ie,J,pe;if(y){const le=E*oe;he=le,J=le;const ue=(ae+le/2)*(C/_.width),Ae=(ae-le/2)*(C/_.width);ie=c?_.height-ue:ue,pe=c?_.height-Ae:Ae}else{const le=C*oe;ie=le,pe=le;const ue=(q-le/2)*(E/_.height),Ae=(q+le/2)*(E/_.height);he=c?_.width-ue:ue,J=c?_.width-Ae:Ae}const ee=this.getLabelText(W,V,r,"y",D,u,{datum:V,value:W,stageKey:n,valueKey:r}),de={x:j,y:Z,text:ee,textAlign:"center",textBaseline:"middle",visible:z};F.push(de),w.push({series:this,itemId:r,datum:V,datumIndex:G,index:G,xValue:K,yValue:W,x:j,y:Z,top:he,right:ie,bottom:J,left:pe,label:de,enabled:z,midPoint:{x:j,y:Z},style:this.getItemStyle({datumIndex:G,datum:V},!1)}),B=$}),{itemId:e,nodeData:w,labelData:F,stageLabelData:A,bounds:_}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:e}){this.checkResize(e);const{datumSelection:t,labelSelection:i,stageLabelSelection:o,highlightDatumSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const n=this.contextNodeData?.nodeData??[],r=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:t}),this.updateDatumStyles({datumSelection:t,isHighlight:!1}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:o}),this.updateLabelNodes({labelSelection:o,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:s}),this.updateDatumStyles({datumSelection:s,isHighlight:!0}),this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData)}getItemStyle({datumIndex:e,datum:t},i){const{id:o,properties:s}=this,{stageKey:a,valueKey:n,itemStyler:r}=s,l=this.getHighlightStyle(i,e);let p=Kp(l,s.getStyle(e));if(r!=null&&e!=null){const d=this.ctx.highlightManager?.getActiveHighlight(),u=this.cachedDatumCallback(SM(e,i?"highlight":"node"),()=>{const g=this.getHighlightStateString(d,i,e);return this.callWithContext(r,{seriesId:o,datum:t,stageKey:a,valueKey:n,highlighted:i,highlightState:g,...p})});u&&(p=Kp(u,p))}return p}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getItemStyle(o,t)})}updateDatumNodes({datumSelection:e}){const{properties:t}=this,{shadow:i}=t,o=this.contextNodeData?.bounds,s=o?{series:o,axis:o}:void 0;e.each((a,n)=>{xM(a,n.style,s),Op(a,n),a.fillShadow=i})}updateLabelSelection(e){return e.labelSelection.update(this.properties.label.enabled?e.labelData:[])}updateStageLabelSelection(e){return e.stageLabelSelection.update(e.stageLabelData)}updateLabelNodes(e){const t=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((i,o,s)=>{const{visible:a,x:n,y:r,text:l,textAlign:c,textBaseline:p}=o,d=DM(this,void 0,this.properties,e.labelProperties,!1,t),{color:u,fontSize:g,fontStyle:y,fontWeight:m,fontFamily:f}=d;i.visible=a,i.x=n,i.y=r,i.text=l,i.fill=u,i.fillOpacity=this.getHighlightStyle(!1,s).opacity??1,i.fontStyle=y,i.fontWeight=m,i.fontSize=g,i.fontFamily=f,i.textAlign=c,i.textBaseline=p,i.setBoxing(d)})}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(t!==void 0){for(const i of this.datumSelection)if(i.datum===t)return i.node}}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,properties:s}=this,{stageKey:a,valueKey:n,tooltip:r}=s;if(!i||!o)return;const l=o.dataSources.get(this.id)?.[e],c=i.resolveColumnById(this,"xValue",o)[e],p=i.resolveColumnById(this,"yValue",o)[e];if(c==null)return;const d=this.getLabelText(c,l,a,"x",i.getDomain(this,"xValue","value",o),this.properties.stageLabel,{datum:l,value:c,stageKey:a,valueKey:n}),u=this.getLabelText(p,l,n,"y",i.getDomain(this,"yValue","value",o),this.properties.stageLabel,{datum:l,value:p,stageKey:a,valueKey:n}),g=this.getItemStyle({datumIndex:e,datum:l},!1);return this.formatTooltipWithContext(r,{symbol:this.legendItemSymbol(e),data:[{label:d,value:u}]},{seriesId:t,datum:l,title:void 0,stageKey:a,valueKey:n,...g})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceSquared(e,t);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}legendItemSymbol(e){const{fills:t,strokes:i,strokeWidth:o,fillOpacity:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this.properties,l=t[e]??"black",c=i[e]??"black";return{marker:{fill:l,fillOpacity:s,stroke:c,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r}}}getLegendData(e){const{processedData:t,dataModel:i,id:o,ctx:{legendManager:s},visible:a}=this;if(!i||!t||e!=="category")return[];const{showInLegend:n}=this.properties,r=[],l=i.resolveColumnById(this,"xValue",t);return(t.dataSources.get(this.id)??[]).forEach((p,d)=>{const u=l[d];r.push({legendType:"category",id:o,itemId:d,seriesId:o,enabled:a&&s.getItemEnabled({seriesId:o,itemId:d}),label:{text:u},symbol:this.legendItemSymbol(d),hideInLegend:!n})}),r}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:e,labelSelection:t,properties:i}=this,o=mM(i.direction);bM(this.id,"nodes",this.ctx.animationManager,[e],o),vM(this,"labels",this.ctx.animationManager,t)}hasItemStylers(){return this.properties.itemStyler!=null}};jn.className="PyramidSeries",jn.type="pyramid";import{_ModuleSupport as kM}from"ag-charts-community";import{constant as AM,required as Jn,string as zp}from"ag-charts-core";var{commonSeriesOptionsDefs:MM,pyramidSeriesThemeableOptionsDef:IM}=kM,LM={...IM,...MM,type:Jn(AM("pyramid")),stageKey:Jn(zp),valueKey:Jn(zp)};import{_ModuleSupport as Mi}from"ag-charts-community";var{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:NM}}=Mi,qC={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacing:2,fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",Mi.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",Mi.FILL_PATTERN_DEFAULTS],["image",Mi.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},label:{...Mi.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},stageLabel:{...Mi.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:NM,xOffset:3,yOffset:3,blur:5},highlight:Mi.singleSeriesHighlightStyle()}},Wp={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:LM,create:e=>new jn(e)};import{_ModuleSupport as TM}from"ag-charts-community";import{_ModuleSupport as ut}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:RM}}=ut,$p={series:{stroke:{$palette:"stroke"},label:{...ut.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",ut.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",ut.FILL_IMAGE_DEFAULTS],["pattern",ut.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",1,0]}},highlight:ut.multiSeriesHighlightStyle(),tooltip:{range:{$path:["/tooltip/range","nearest"]}}},axes:{[RM.ANGLE_CATEGORY]:{label:{spacing:10}}}},CM=ut.mergeDefaults({series:{stroke:ut.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},$p),PM=ut.mergeDefaults({series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",ut.FILL_GRADIENT_LINEAR_DEFAULTS],["image",ut.FILL_IMAGE_DEFAULTS],["pattern",ut.FILL_PATTERN_DEFAULTS]]},fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},$p);import{_ModuleSupport as Hp}from"ag-charts-community";import{_ModuleSupport as Zn}from"ag-charts-community";import{isFiniteNumber as Xp,isNumberEqual as Yp}from"ag-charts-core";import{_ModuleSupport as _M}from"ag-charts-community";var{Label:EM,SeriesMarker:wM,SeriesProperties:OM,makeSeriesTooltip:FM,Property:et}=_M,He=class extends OM{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new wM,this.label=new EM,this.tooltip=FM(),this.connectMissingData=!1}};h([et],He.prototype,"angleKey",2),h([et],He.prototype,"radiusKey",2),h([et],He.prototype,"angleName",2),h([et],He.prototype,"radiusName",2),h([et],He.prototype,"stroke",2),h([et],He.prototype,"strokeWidth",2),h([et],He.prototype,"strokeOpacity",2),h([et],He.prototype,"lineDash",2),h([et],He.prototype,"lineDashOffset",2),h([et],He.prototype,"rotation",2),h([et],He.prototype,"styler",2),h([et],He.prototype,"marker",2),h([et],He.prototype,"label",2),h([et],He.prototype,"tooltip",2),h([et],He.prototype,"connectMissingData",2);var{DEFAULT_POLAR_DIRECTION_KEYS:BM,DEFAULT_POLAR_DIRECTION_NAMES:GM,ChartAxisDirection:gt,PolarAxis:VM,SeriesNodePickMode:Up,valueProperty:qp,fixNumericExtent:KM,seriesLabelFadeInAnimation:zM,markerFadeInAnimation:WM,resetMarkerFn:$M,animationValidation:HM,computeMarkerFocusBounds:XM,extent:YM,BBox:UM,Group:qM,Path:jM,PointerEvents:JM,Selection:Qn,Text:ZM,Marker:QM,mergeDefaults:eI,updateLabelNode:tI,getMarkerStyles:iI}=Zn,oI=class extends Zn.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},er=class extends Zn.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:BM,propertyNames:GM,pickModes:[Up.NEAREST_NODE,Up.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:$M},clipFocusBox:!1}),this.properties=new He,this.NodeEvent=oI,this.lineGroup=this.contentGroup.appendChild(new qM({name:"radar-line"})),this.lineSelection=Qn.select(this.lineGroup,jM),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new QM}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===gt.Angle)return t.getDomain(this,"angleValue","value",i);{const o=t.getDomain(this,"radiusValue","value",i),s=YM(o.length===0?o:[0].concat(o));return KM(s)}}async processData(e){const{angleKey:t,radiusKey:i}=this.properties,o=[];this.ctx.animationManager.isSkipped()||o.push(HM());const s=this.axes[gt.Radius]?.scale.type,a=this.axes[gt.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[qp(t,a,{id:"angleValue"}),qp(i,s,{id:"radiusValue",invalidValue:void 0}),...o]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return e===o.r&&t===o.cx&&i===o.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[gt.Radius];return e instanceof VM?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){!this.didCircleChange()&&!this.nodeDataRefresh||(this.contextNodeData=this.createNodeData(),this.nodeData=this.contextNodeData?.nodeData??[],this.nodeDataRefresh=!1)}createNodeData(){const{processedData:e,dataModel:t}=this;if(!e||!t)return;const{angleKey:i,radiusKey:o,angleName:s,radiusName:a,marker:n,label:r,stroke:l,strokeWidth:c,strokeOpacity:p}=this.properties,d=this.axes[gt.Angle]?.scale,u=this.axes[gt.Radius]?.scale;if(!d||!u)return;const g=t.resolveColumnById(this,"angleValue",e),y=t.resolveColumnById(this,"radiusValue",e),m=this.getAxisInnerRadius(),f=this.getSeriesDomain(gt.Radius),D=(e.dataSources.get(this.id)??[]).map((v,x)=>{const k=g[x],A=y[x],M=d.convert(k),b=this.radius+m-u.convert(A),L=Math.cos(M),I=Math.sin(M),N=L*b,R=I*b;let P;if(r.enabled){const _=this.getLabelText(A,v,o,"radius",f,r,{value:A,datum:v,angleKey:i,radiusKey:o,angleName:s,radiusName:a});if(_){let T="right";Yp(L,0)?T="center":L>0&&(T="left");let O="bottom";Yp(I,0)?O="middle":I>0&&(O="top"),P={x:N+L*n.size,y:R+I*n.size,text:_,textAlign:T,textBaseline:O}}}return{series:this,datum:v,datumIndex:x,index:x,point:{x:N,y:R,size:n.size},midPoint:{x:N,y:R},label:P,angleValue:k,radiusValue:A,missing:!Xp(M)||!Xp(b)}});return{itemId:o,nodeData:D,labelData:D,styles:iI(this,n,{stroke:l,strokeWidth:c,strokeOpacity:p})}}update({seriesRect:e}){const t=this.checkResize(e),i=!this.ctx.animationManager.isSkipped(),{series:o}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&o===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateHighlightSelection(),this.updatePathNodes(),this.hasItemStylers()&&(this.updateDatumStyles(this.itemSelection,!1),this.updateDatumStyles(this.highlightSelection,!0)),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){const{marker:e}=this.properties;e.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Qn.select(this.itemGroup,()=>this.nodeFactory(),!1));const t=this.visible&&e.shape&&e.enabled?this.nodeData:[];this.itemSelection.update(t)}updateHighlightSelection(){const{marker:e}=this.properties;e.isDirty()&&(this.highlightSelection.clear(),this.highlightSelection.cleanup(),this.highlightSelection=Qn.select(this.highlightGroup,()=>this.nodeFactory(),!1));const t=this.ctx.highlightManager?.getActiveHighlight(),i=this.visible&&e.shape&&e.enabled&&t?.datum?[{...t}]:[];this.highlightSelection.update(i)}getMarkerFill(e){return e?.fill??this.properties.marker.fill}getDatumStylerProperties(e){const{id:t,properties:i}=this,{angleKey:o,radiusKey:s}=i;return{seriesId:t,datum:e,angleKey:o,radiusKey:s}}updateDatumStyles(e,t){const{marker:i,stroke:o,strokeWidth:s,strokeOpacity:a}=this.properties;e.each((n,r)=>{r.style=this.getMarkerStyle(i,r,this.getDatumStylerProperties(r.datum),{isHighlight:t},void 0,{stroke:o,strokeWidth:s,strokeOpacity:a})})}updateMarkers(e,t){const i=this.getShapeFillBBox(),{contextNodeData:o}=this;if(!o)return;const s=this.ctx.highlightManager.getActiveHighlight();e.each((a,n)=>{const r=n.style??o.styles[this.getHighlightState(s,t,n.datumIndex)];this.applyMarkerStyle(r,a,n.point,i)})}updateLabels(){const{properties:e}=this,t=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.update(this.nodeData).each((i,o)=>{o.label&&(i.fillOpacity=this.getHighlightStyle(!1,o.datumIndex).opacity??1,tI(this,i,e,e.label,o.label,!1,t))})}makeStylerParams(e,t){throw new Error("not implemented")}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:p,marker:d}=a,u=s[gt.Angle],g=s[gt.Radius];if(!i||!o||!u||!g)return;const y=o.dataSources.get(this.id)?.[e],m=i.resolveColumnById(this,"angleValue",o)[e],f=i.resolveColumnById(this,"radiusValue",o)[e];if(m==null)return;const S=this.getMarkerStyle(d,{datum:y,datumIndex:e},this.getDatumStylerProperties(y),{isHighlight:!1});return this.formatTooltipWithContext(p,{heading:this.getAxisValueText(u,"tooltip",m,y,n,void 0),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(g,"tooltip",f,y,l,void 0)}]},{seriesId:t,datum:y,title:r,angleKey:n,radiusKey:l,angleName:r,radiusName:c,...S})}legendItemSymbol(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:o,marker:s}=this.properties;return{marker:{shape:s.shape,enabled:s.enabled||t<=0,fill:this.getMarkerFill()??s.stroke??e??"rgba(0, 0, 0, 0)",stroke:s.stroke??e??"rgba(0, 0, 0, 0)",fillOpacity:s.fillOpacity,strokeOpacity:s.strokeOpacity,strokeWidth:s.strokeWidth,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset},line:{stroke:e,strokeOpacity:i,strokeWidth:t,lineDash:o}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:o}=this,{radiusKey:s,radiusName:a,showInLegend:n}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:o&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:a??s},symbol:this.legendItemSymbol(),hideInLegend:!n}]}pickNodeClosestDatum(e){const{nodeData:t,centerX:i,centerY:o}=this,{x:s,y:a}=e,n=this.radius;if(Math.sqrt((s-i)**2+(a-o)**2)>n+this.properties.marker.size)return;let l=1/0,c;for(const p of t){const{point:{x:d=NaN,y:u=NaN}={}}=p;if(isNaN(d)||isNaN(u))continue;const g=Math.sqrt((e.x-d-i)**2+(e.y-u-o)**2);g<l&&(l=g,c=p)}if(c){const p=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:p}}}computeLabelsBBox(){const{label:e}=this.properties;this.maybeRefreshNodeData();const t=[],i=new ZM;return this.nodeData.forEach(o=>{if(!e.enabled||!o.label)return;i.text=o.label.text,i.x=o.label.x,i.y=o.label.y,i.setFont(e),i.setAlign(o.label);const s=i.getBBox();t.push(s)}),t.length===0?null:UM.merge(t)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){this.updatePathNodes()}updatePathNodes(){const e=this.getLineNode();if(!e)return;const{strokeWidth:t,stroke:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,opacity:n}=eI(this.getHighlightStyle(),this.properties);e.setProperties({fill:void 0,lineJoin:"round",lineCap:"round",pointerEvents:JM.None,opacity:n,stroke:i,strokeWidth:t,strokeOpacity:o,lineDash:s,lineDashOffset:a})}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(e.length===0)return[];const o=this.axes[gt.Radius],a=this.axes[gt.Angle]?.isReversed(),r=o?.isReversed()&&!a?[...e].reverse():e,l=[];let c=!1,p;return r.forEach((d,u)=>{let{x:g,y}=d.point;const m=isNaN(g)||isNaN(y);m||(p??(p=d)),m&&!i&&(g=0,y=0);const f=u===0||!t&&!i&&(m||c);l.push({x:g,y,moveTo:f}),c=m}),p!==void 0&&l.push({x:p.point.x,y:p.point.y,moveTo:!1}),l}animateSinglePath(e,t,i){const{path:o}=e;o.clear(!0);const s=this.getAxisInnerRadius(),a=this.axes[gt.Radius],r=a?.isReversed()?this.radius+s-a?.scale.convert(0):s;t.forEach(l=>{const{x:c,y:p,arc:d,radius:u=0,startAngle:g=0,endAngle:y=0,moveTo:m}=l,f=Math.atan2(p,c),S=r*Math.cos(f),D=r*Math.sin(f),v=i,x=S*(1-v)+c*v,k=D*(1-v)+p*v;d?o.arc(c,p,u,g,y):m?o.moveTo(x,k):o.lineTo(x,k)}),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:o=>this.animatePaths(o),onStop:()=>this.animatePaths(1)}),WM(this,i,"added",e),zM(this,"labels",i,t)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.properties.strokeWidth,e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear(!0);for(const{x:o,y:s,moveTo:a}of i)a?t.moveTo(o,s):t.lineTo(o,s);e.checkPathDirty()}}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,e,{angleKey:t,radiusKey:i},{isHighlight:!0})}computeFocusBounds(e){return XM(this,e)}};er.className="RadarSeries";import{_ModuleSupport as sI}from"ag-charts-community";var{Property:jp}=sI,tr=class extends He{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};h([jp],tr.prototype,"fill",2),h([jp],tr.prototype,"fillOpacity",2);var{Group:aI,Path:nI,PointerEvents:rI,Selection:lI,ChartAxisDirection:Jp,applyShapeStyle:Zp,mergeDefaults:cI}=Hp,Qs=class extends er{constructor(e){super(e),this.properties=new tr,this.areaGroup=this.contentGroup.appendChild(new aI({name:"radar-area"})),this.areaSelection=lI.select(this.areaGroup,nI),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(e){return e?.fill??this.properties.marker.fill??this.properties.fill}updatePathNodes(){super.updatePathNodes();const{fill:e,fillOpacity:t,opacity:i}=cI(this.getHighlightStyle(),this.properties),o=this.getAreaNode();o&&(Zp(o,{fill:e,fillOpacity:t,stroke:void 0},this.getShapeFillBBox()),o.setProperties({lineJoin:"round",pointerEvents:rI.None,opacity:i}))}animatePaths(e){super.animatePaths(e);const t=this.getAreaNode();t&&this.animateSinglePath(t,this.getAreaPoints(),e)}getAreaPoints(){const e=this.getLinePoints(),t=n=>{const r=this.axes[n];return r instanceof Hp.PolarAxis?r:void 0},i=t(Jp.Radius),o=t(Jp.Angle);if(!i?.isReversed())return e;const a=o?.getAxisLinePoints()?.points??[];return e.concat(...a)}hasItemStylers(){return this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints(),o=this.getShapeFillBBox();Zp(e,{fill:this.properties.fill,stroke:void 0,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset},o),e.lineJoin=e.lineCap="round",t.clear(!0),i.forEach(({x:s,y:a,moveTo:n,arc:r,radius:l=0,startAngle:c=0,endAngle:p=0})=>{r?t.arc(s,a,l,c,p):n?t.moveTo(s,a):t.lineTo(s,a)}),t.closePath(),e.checkPathDirty()}}};Qs.className="RadarAreaSeries",Qs.type="radar-area";import{_ModuleSupport as hI}from"ag-charts-community";import{constant as pI,required as ir,string as ea}from"ag-charts-core";var{commonSeriesOptionsDefs:dI,radarAreaSeriesThemeableOptionsDef:uI}=hI,gI={...dI,...uI,type:ir(pI("radar-area")),angleKey:ir(ea),radiusKey:ir(ea),angleName:ea,radiusName:ea},{ThemeConstants:{POLAR_AXIS_TYPE:Qp}}=TM,aP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:e=>new Qs(e),defaultAxes:[{type:Qp.ANGLE_CATEGORY},{type:Qp.RADIUS_NUMBER}],themeTemplate:PM},ed={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:gI,create:e=>new Qs(e)};import{_ModuleSupport as yI}from"ag-charts-community";var ta=class extends er{hasItemStylers(){return this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};ta.className="RadarLineSeries",ta.type="radar-line";import{_ModuleSupport as mI}from"ag-charts-community";import{constant as fI,required as or,string as ia}from"ag-charts-core";var{commonSeriesOptionsDefs:SI,radarLineSeriesThemeableOptionsDef:xI}=mI,bI={...SI,...xI,type:or(fI("radar-line")),angleKey:or(ia),radiusKey:or(ia),angleName:ia,radiusName:ia},{POLAR_AXIS_TYPE:td}=yI.ThemeConstants,cP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:e=>new ta(e),defaultAxes:[{type:td.ANGLE_CATEGORY},{type:td.RADIUS_NUMBER}],themeTemplate:CM},id={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:bI,create:e=>new ta(e)};import{_ModuleSupport as vI}from"ag-charts-community";import{_ModuleSupport as oa}from"ag-charts-community";import{isDefined as DI}from"ag-charts-core";function kI(e){return typeof e?.datum=="object"?e.datum:null}import{_ModuleSupport as AI}from"ag-charts-community";var{SeriesProperties:MI,makeSeriesTooltip:II,Property:Ke,Label:LI}=AI,Oe=class extends MI{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new LI,this.tooltip=II()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,cornerRadius:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,cornerRadius:r,opacity:1}}};h([Ke],Oe.prototype,"angleKey",2),h([Ke],Oe.prototype,"radiusKey",2),h([Ke],Oe.prototype,"angleName",2),h([Ke],Oe.prototype,"radiusName",2),h([Ke],Oe.prototype,"fill",2),h([Ke],Oe.prototype,"fillOpacity",2),h([Ke],Oe.prototype,"stroke",2),h([Ke],Oe.prototype,"strokeWidth",2),h([Ke],Oe.prototype,"strokeOpacity",2),h([Ke],Oe.prototype,"lineDash",2),h([Ke],Oe.prototype,"lineDashOffset",2),h([Ke],Oe.prototype,"cornerRadius",2),h([Ke],Oe.prototype,"itemStyler",2),h([Ke],Oe.prototype,"rotation",2),h([Ke],Oe.prototype,"stackGroup",2),h([Ke],Oe.prototype,"normalizedTo",2),h([Ke],Oe.prototype,"label",2),h([Ke],Oe.prototype,"tooltip",2);import{_ModuleSupport as NI}from"ag-charts-community";var{SectorBox:od,motion:TI}=NI;function RI(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function sd(e){return{toFn:(o,s,a)=>{let n,r,l,c,p;return a==="removed"?(n=e,r=e,l=s.innerRadius,c=s.outerRadius,p=new od(n,r,l,c)):(n=s.startAngle,r=s.endAngle,l=isNaN(s.innerRadius)?o.innerRadius:s.innerRadius,c=isNaN(s.outerRadius)?o.outerRadius:s.outerRadius,p=s.clipSector),{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:p}},fromFn:(o,s,a)=>{a=RI(o,s,a);let n,r,l,c,p;a==="removed"||a==="updated"?(n=o.startAngle,r=o.endAngle,l=o.innerRadius,c=o.outerRadius,p=o.clipSector):(n=e,r=e,l=s.innerRadius,c=s.outerRadius),p??(p=new od(n,r,l,c));const d=TI.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:p,phase:d}}}}function CI(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{DEFAULT_POLAR_DIRECTION_KEYS:PI,DEFAULT_POLAR_DIRECTION_NAMES:_I,ChartAxisDirection:Ft,PolarAxis:EI,diff:wI,groupAccumulativeValueProperty:ad,keyProperty:OI,normaliseGroupTo:FI,valueProperty:BI,fixNumericExtent:GI,resetLabelFn:VI,seriesLabelFadeInAnimation:KI,seriesLabelFadeOutAnimation:zI,animationValidation:WI,angleBetween:$I,createDatumId:nd,CategoryScale:HI,Sector:XI,SectorBox:YI,motion:rd,isGradientFill:UI,applyShapeStyle:qI,updateLabelNode:jI,mergeDefaults:ld,getItemStyles:JI}=oa,ZI=class extends oa.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},sa=class extends oa.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"radiusValue",propertyKeys:PI,propertyNames:_I,canHaveAxes:!0,animationResetFns:{item:CI,label:VI}}),this.properties=new Oe,this.NodeEvent=ZI,this.groupScale=new HI,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new XI}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Ft.Angle){const o=t.getDomain(this,"angleValue-end","value",i),s=[o[0]>0?0:o[0],o[1]<0?0:o[1]];return GI(s)}else return t.getDomain(this,"radiusValue","key",i)}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:o}=this.properties,s=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),n=`${a}-trailing`,r=[];DI(o)&&r.push(FI([a,n],Math.abs(o))),s&&(this.processedData&&r.push(wI(this.id,this.processedData)),r.push(WI()));const l=this.visible?{}:{forceValue:0},c=this.axes[Ft.Radius]?.scale.type,p=this.axes[Ft.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[OI(i,c,{id:"radiusValue"}),BI(t,p,{id:"angleValue-raw",invalidValue:null,...l}),...ad(t,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},p),...ad(t,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:n,separateNegative:!0,...l},p),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return e===o.r&&t===o.cx&&i===o.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){!this.didCircleChange()&&!this.nodeDataRefresh||(this.contextNodeData=this.createNodeData(),this.nodeData=this.contextNodeData?.nodeData??[],this.nodeDataRefresh=!1)}getAxisInnerRadius(){const e=this.axes[Ft.Radius];return e instanceof EI?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t}=this;if(!t||!e||e.type!=="grouped")return;const i=this.axes[Ft.Angle],o=this.axes[Ft.Radius],s=i?.scale,a=o?.scale;if(!s||!a)return;const n=t.resolveKeysById(this,"radiusValue",e),r=t.resolveColumnById(this,"angleValue-start",e),l=t.resolveColumnById(this,"angleValue-end",e),c=t.resolveColumnById(this,"angleValue-raw",e),p=t.resolveProcessedDataIndexById(this,"angleValue-range");let d=0;o instanceof ri&&(d=o.groupPaddingInner);const{groupScale:u}=this,{index:g,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);u.domain=Array.from({length:y}).map((O,E)=>String(E)),u.range=[0,Math.abs(a.bandwidth??0)],u.paddingInner=y>1?d:0;const m=u.bandwidth>=1?u.bandwidth:u.rawBandwidth,f=i.isReversed(),S=o.isReversed(),D=S?this.radius:this.getAxisInnerRadius(),x=(S?this.getAxisInnerRadius():this.radius)+D,k=this.getSeriesDomain(Ft.Angle),{angleKey:A,radiusKey:M,angleName:b,radiusName:L,label:I}=this.properties,N=(O,E,C,w)=>{const F=this.getLabelText(E,O,A,"angle",k,I,{value:E,datum:O,angleKey:A,radiusKey:M,angleName:b,radiusName:L});if(F)return{x:C,y:w,text:F,textAlign:"center",textBaseline:"middle"}},R=[],P={itemId:M,nodeData:R,labelData:R,styles:JI(this.getItemStyle.bind(this))};if(!this.visible)return P;const{dataSources:_}=e,T=_.get(this.id)??[];for(const{datumIndex:O,group:E}of t.forEachGroupDatum(this,e)){const C=T[O],w=n[O];if(w==null)return;const F=c[O],B=r[O],V=l[O],G=F>=0&&!Object.is(F,-0),K=E.aggregation[p][G?1:0],W=G===f;let z=s.convert(B,{clamp:!0}),$=s.convert(V,{clamp:!0}),Y=s.convert(0,{clamp:!0}),oe=s.convert(K,{clamp:!0});W&&([Y,oe]=[oe,Y],[z,$]=[$,z]);const q=x-a.convert(w)+u.convert(String(g)),j=q+m,Z=(q+j)/2,he=z+$I(z,$)/2,ie=Math.cos(he)*Z,J=Math.sin(he)*Z,pe=this.properties.label.enabled?N(C,F,ie,J):void 0,ee=new YI(z,$,q,j);R.push({series:this,datum:C,datumIndex:O,point:{x:ie,y:J,size:0},midPoint:{x:ie,y:J},label:pe,angleValue:F,radiusValue:w,innerRadius:q,outerRadius:j,startAngle:Y,endAngle:oe,clipSector:ee,reversed:W,index:O})}return P}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemStyle(e,t,i){const{id:o,properties:s}=this,{angleKey:a,radiusKey:n,itemStyler:r}=s,l=this.getHighlightStyle(t,e?.datumIndex,i);let p=ld(l,s.getStyle());if(r!=null&&e!=null){const d=this.cachedDatumCallback(nd(this.getDatumId(e),t?"highlight":"node"),()=>{const u=this.ctx.highlightManager?.getActiveHighlight(),g=this.getHighlightStateString(u,t,e.datumIndex);return this.callWithContext(r,{seriesId:o,datum:e.datum,highlighted:t,highlightState:g,angleKey:a,radiusKey:n,...p})});d&&(p=ld(d,p))}return p}updateSectorSelection(e,t){let i=[];if(t){const r=this.ctx.highlightManager?.getActiveHighlight();r?.datum&&r.series===this&&i.push(r)}else i=this.nodeData;const{contextNodeData:o}=this;if(!o)return;const s=this.ctx.highlightManager.getActiveHighlight(),a=this.getShapeFillBBox(),n=this.hasItemStylers();e.update(i,void 0,r=>this.getDatumId(r)).each((r,l)=>{const c=kI(l);if(c==null)return;n&&(l.style=this.getItemStyle(l,t));const p=l.style??o.styles[this.getHighlightState(s,t,l.datumIndex)],d=p.cornerRadius,u=p.fill,g=oa.isGradientFill(u)&&u.bounds!=="item"?{centerX:0,centerY:0}:void 0;qI(r,p,a,g),r.lineJoin="round",r.inset=r.stroke!=null?r.strokeWidth/2:0,r.startInnerCornerRadius=c.reversed?d:0,r.startOuterCornerRadius=c.reversed?d:0,r.endInnerCornerRadius=c.reversed?0:d,r.endOuterCornerRadius=c.reversed?0:d,t&&(r.startAngle=l.startAngle,r.endAngle=l.endAngle,r.clipSector=l.clipSector,r.innerRadius=l.innerRadius,r.outerRadius=l.outerRadius)})}updateLabels(){const{properties:e}=this,t=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.update(this.nodeData).each((i,o)=>{jI(this,i,e,e.label,o.label,!1,t),i.fillOpacity=this.getHighlightStyle(!1,o.datumIndex).opacity??1})}getBarTransitionFunctions(){const e=this.axes[Ft.Angle]?.scale;let t=0;if(!e)return sd(t);const i=Math.min(e.domain[0],e.domain[1]),o=Math.max(e.domain[0],e.domain[1]);return i<=0&&o>=0&&(t=e.convert(0)),sd(t)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();rd.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),KI(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();rd.fromToMotion(this.id,"datums",t,[e],i),zI(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:p}=a,d=s[Ft.Angle],u=s[Ft.Radius],g=this.nodeData?.[e];if(!i||!o||!d||!u||!g)return;const y=o.dataSources.get(this.id)?.[e],m=i.resolveKeysById(this,"radiusValue",o)[e],f=i.resolveColumnById(this,"angleValue-raw",o)[e];if(m==null)return;const S=this.getItemStyle(g,!1);return this.formatTooltipWithContext(p,{heading:this.getAxisValueText(u,"tooltip",m,y,l,void 0),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:n,value:this.getAxisValueText(d,"tooltip",f,y,n,void 0)}]},{seriesId:t,datum:y,title:r,angleKey:n,angleName:r,radiusKey:l,radiusName:c,...S})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n}=this.properties,r={fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n};return UI(r.fill)&&(r.fill={...r.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:r}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{angleKey:o,angleName:s,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:o,seriesId:t,enabled:i,label:{text:s??o},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return nd(e.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}hasItemStylers(){return this.properties.itemStyler!=null}};sa.className="RadialBarSeries",sa.type="radial-bar";import{_ModuleSupport as QI}from"ag-charts-community";import{boolean as cd,constant as e2,number as t2,required as sr,string as _o}from"ag-charts-core";var{commonSeriesOptionsDefs:i2,radialBarSeriesThemeableOptionsDef:o2}=QI,s2={...i2,...o2,type:sr(e2("radial-bar")),angleKey:sr(_o),radiusKey:sr(_o),angleName:_o,radiusName:_o,grouped:cd,stacked:cd,stackGroup:_o,normalizedTo:t2};import{_ModuleSupport as ar}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:a2},FILL_GRADIENT_CONIC_SERIES_DEFAULTS:n2,FILL_IMAGE_DEFAULTS:r2,FILL_PATTERN_DEFAULTS:l2}=ar,c2={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",n2],["image",r2],["pattern",l2]]},stroke:{$palette:"stroke"},strokeWidth:{$isUserOption:["./stroke",1,0]},label:{...ar.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},highlight:ar.multiSeriesHighlightStyle()},axes:{[a2.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:hd}=vI.ThemeConstants,SP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:e=>new sa(e),defaultAxes:[{type:hd.ANGLE_NUMBER},{type:hd.RADIUS_CATEGORY}],themeTemplate:c2,stackable:!0,groupable:!0},pd={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:s2,create:e=>new sa(e)};import{_ModuleSupport as h2}from"ag-charts-community";import{_ModuleSupport as p2}from"ag-charts-community";import{_ModuleSupport as d2}from"ag-charts-community";var{Property:dd}=d2,nr=class extends Ce{};h([dd],nr.prototype,"columnWidthRatio",2),h([dd],nr.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:u2,PolarAxis:g2,RadialColumnShape:y2,getRadialColumnWidth:m2}=p2,aa=class extends Ip{constructor(e){super(e,{animationResetFns:{item:YA}}),this.properties=new nr}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new y2}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return XA(e)}isRadiusAxisCircle(){const e=this.axes[u2.Radius];return e instanceof g2?e.shape==="circle":!1}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:o=.5}=this.properties;return m2(e,t,this.radius,i,o)}hasItemStylers(){return this.properties.itemStyler!=null}};aa.className="RadialColumnSeries",aa.type="radial-column";import{_ModuleSupport as f2}from"ag-charts-community";import{boolean as ud,constant as S2,number as x2,required as rr,string as Eo}from"ag-charts-core";var{commonSeriesOptionsDefs:b2,radialColumnSeriesThemeableOptionsDef:v2}=f2,D2={...b2,...v2,type:rr(S2("radial-column")),angleKey:rr(Eo),radiusKey:rr(Eo),angleName:Eo,radiusName:Eo,grouped:ud,stacked:ud,stackGroup:Eo,normalizedTo:x2};import{_ModuleSupport as lr}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:gd,POLAR_AXIS_SHAPE:yd},FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:k2,FILL_IMAGE_DEFAULTS:A2,FILL_PATTERN_DEFAULTS:M2}=lr,I2={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",k2],["image",A2],["pattern",M2]]},stroke:{$palette:"stroke"},columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:{$isUserOption:["./stroke",1,0]},label:{...lr.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:lr.multiSeriesHighlightStyle()},axes:{[gd.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:yd.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[gd.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:yd.CIRCLE},innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:md}=h2.ThemeConstants,MP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:e=>new aa(e),defaultAxes:[{type:md.ANGLE_CATEGORY},{type:md.RADIUS_NUMBER}],themeTemplate:I2,stackable:!0,groupable:!0},fd={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:D2,create:e=>new aa(e)};import{_ModuleSupport as io}from"ag-charts-community";import{_ModuleSupport as Ii}from"ag-charts-community";import{cachedTextMeasurer as L2}from"ag-charts-core";import{_ModuleSupport as N2}from"ag-charts-community";var{SvgPath:T2,Rotatable:R2,Translatable:C2,Scalable:P2}=N2,cr=class extends R2(P2(C2(T2))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};cr.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";import{_ModuleSupport as na}from"ag-charts-community";var{getColorStops:_2,normalizeAngle360:E2,normalizeAngle360Inclusive:w2,toDegrees:O2}=na,{BaseProperties:wo,makeSeriesTooltip:F2,SeriesProperties:B2,PropertiesArray:hr,AxisLabel:G2,Property:H,Label:V2}=na,Sd=class extends V2{};h([H],Sd.prototype,"spacing",2);var Xe=class extends wo{constructor(){super(...arguments),this.label=new Sd}getStyle(){const{fill:e="black",fillOpacity:t=1,stroke:i="black",strokeWidth:o=0,strokeOpacity:s=1,lineDash:a=[0],lineDashOffset:n=0}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}}};h([H],Xe.prototype,"text",2),h([H],Xe.prototype,"value",2),h([H],Xe.prototype,"shape",2),h([H],Xe.prototype,"placement",2),h([H],Xe.prototype,"spacing",2),h([H],Xe.prototype,"size",2),h([H],Xe.prototype,"rotation",2),h([H],Xe.prototype,"fill",2),h([H],Xe.prototype,"fillOpacity",2),h([H],Xe.prototype,"stroke",2),h([H],Xe.prototype,"strokeWidth",2),h([H],Xe.prototype,"strokeOpacity",2),h([H],Xe.prototype,"lineDash",2),h([H],Xe.prototype,"lineDashOffset",2),h([H],Xe.prototype,"label",2);var Mt=class extends wo{constructor(){super(...arguments),this.enabled=!0,this.fills=new hr(na.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t){const{enabled:i,fill:o,fills:s,fillMode:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:p,lineDashOffset:d}=this;return{fill:i?o??vd(s,a,e,t):"none",fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:p,lineDashOffset:d}}};h([H],Mt.prototype,"enabled",2),h([H],Mt.prototype,"fills",2),h([H],Mt.prototype,"fillMode",2),h([H],Mt.prototype,"fill",2),h([H],Mt.prototype,"fillOpacity",2),h([H],Mt.prototype,"stroke",2),h([H],Mt.prototype,"strokeWidth",2),h([H],Mt.prototype,"strokeOpacity",2),h([H],Mt.prototype,"lineDash",2),h([H],Mt.prototype,"lineDashOffset",2);var Oo=class extends wo{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};h([H],Oo.prototype,"values",2),h([H],Oo.prototype,"step",2),h([H],Oo.prototype,"minSpacing",2),h([H],Oo.prototype,"maxSpacing",2);var K2=class extends G2{},tt=class extends wo{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new hr(na.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Oo,this.label=new K2}getStyle(e,t,i){const{fill:o,fills:s,defaultFill:a,fillMode:n,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:d,lineDashOffset:u}=this;return{fill:o??(e&&s.length===0?a:void 0)??vd(s,n,t,i),fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:d,lineDashOffset:u}}};h([H],tt.prototype,"min",2),h([H],tt.prototype,"max",2),h([H],tt.prototype,"fills",2),h([H],tt.prototype,"fillMode",2),h([H],tt.prototype,"fill",2),h([H],tt.prototype,"fillOpacity",2),h([H],tt.prototype,"stroke",2),h([H],tt.prototype,"strokeWidth",2),h([H],tt.prototype,"strokeOpacity",2),h([H],tt.prototype,"lineDash",2),h([H],tt.prototype,"lineDashOffset",2),h([H],tt.prototype,"defaultFill",2),h([H],tt.prototype,"interval",2),h([H],tt.prototype,"label",2);var It=class extends wo{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([H],It.prototype,"enabled",2),h([H],It.prototype,"radiusRatio",2),h([H],It.prototype,"spacing",2),h([H],It.prototype,"fill",2),h([H],It.prototype,"fillOpacity",2),h([H],It.prototype,"stroke",2),h([H],It.prototype,"strokeWidth",2),h([H],It.prototype,"strokeOpacity",2),h([H],It.prototype,"lineDash",2),h([H],It.prototype,"lineDashOffset",2);var xd=class extends Rt{};h([H],xd.prototype,"text",2);var bd=class extends So{};h([H],bd.prototype,"text",2);var Le=class extends B2{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new Io,this.defaultColorRange=[],this.targets=new hr(Xe),this.defaultTarget=new Xe,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new tt,this.bar=new Mt,this.needle=new It,this.label=new xd,this.secondaryLabel=new bd,this.tooltip=F2()}};h([H],Le.prototype,"value",2),h([H],Le.prototype,"startAngle",2),h([H],Le.prototype,"endAngle",2),h([H],Le.prototype,"segmentation",2),h([H],Le.prototype,"defaultColorRange",2),h([H],Le.prototype,"targets",2),h([H],Le.prototype,"defaultTarget",2),h([H],Le.prototype,"outerRadiusRatio",2),h([H],Le.prototype,"innerRadiusRatio",2),h([H],Le.prototype,"outerRadius",2),h([H],Le.prototype,"innerRadius",2),h([H],Le.prototype,"cornerRadius",2),h([H],Le.prototype,"cornerMode",2),h([H],Le.prototype,"spacing",2),h([H],Le.prototype,"scale",2),h([H],Le.prototype,"bar",2),h([H],Le.prototype,"needle",2),h([H],Le.prototype,"label",2),h([H],Le.prototype,"secondaryLabel",2),h([H],Le.prototype,"tooltip",2);function vd(e,t,i,o){const{domain:s,range:a}=o,[n,r]=a,l=E2((n+r)/2+Math.PI),c=w2(r-n);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:_2(e,i,s,t).map(({color:d,stop:u})=>(u=Math.min(Math.max(u,0),1),u=(n+c*u-l)/(2*Math.PI),u=(u%1+1)%1,{stop:u,color:d})),bounds:"series",rotation:O2(l)+90}}import{_ModuleSupport as z2}from"ag-charts-community";var{SectorBox:pr}=z2;function W2(e){const{startAngle:t,endAngle:i,clipStartAngle:o,clipEndAngle:s,innerRadius:a,outerRadius:n}=e;if(!(o==null||s==null))return new pr(Math.max(o,t),Math.min(s,i),a,n)}function Dd(e,t,i){return Math.max(e,i.startAngle)<=Math.min(t,i.endAngle)}function dr(e){return e.clipStartAngle!=null&&e.clipEndAngle!=null}function ur(e,t){const{clipStartAngle:i,clipEndAngle:o,innerRadius:s,outerRadius:a}=e;return new pr(i,t?i:o,s,a)}function kd(e,t){const i=e?"initial":"update";return{node:{fromFn(a,n){const r=a.previousDatum;let{startAngle:l,endAngle:c}=r??n;const p=r!=null&&dr(r)?ur(r,e):void 0,d=dr(n)?ur(n,e):void 0;let u;return p!=null&&d!=null?u=p:p==null&&d!=null?(u=d,l=n.startAngle,c=n.endAngle):p!=null&&d==null?(u=void 0,l=n.startAngle,c=n.endAngle):e&&(c=l),{startAngle:l,endAngle:c,clipSector:u,phase:i}},toFn(a,n){const{startAngle:r,endAngle:l}=n;let c;return dr(n)&&(c=ur(n,!1)),{startAngle:r,endAngle:l,clipSector:c}},applyFn(a,n){const{startAngle:r,endAngle:l}=n;let{clipSector:c}=n;c!=null&&(c=new pr(Math.max(r,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const p=c==null||Dd(r,l,c);a.startAngle=r,a.endAngle=l,a.clipSector=c,a.visible=p}},needle:{fromFn(a){let{angle:n}=a.previousDatum??a.datum;return e&&(n=t),{rotation:n,phase:i}},toFn(a,n){const{angle:r}=n;return{rotation:r}}}}}function gr(e,t){const{startAngle:i,endAngle:o}=t,s=W2(t),a=s==null||Dd(i,o,s);return{startAngle:i,endAngle:o,clipSector:s,visible:a}}function Ad(e,t){const{angle:i}=t;return{rotation:i}}var $2={top:0,middle:.5,bottom:1};function H2(e,t,i,o,s,a){const{padding:n,textAlign:r,verticalAlign:l}=o;let c,p;if(i.each((k,A)=>{A.label==="primary"?c=A:A.label==="secondary"&&(p=A)}),c==null)return;const d=Mo(e.id,t,c,a?.label);if(d==null)return;const u=p!=null?Mo(e.id,t,p,a?.secondaryLabel):void 0,g={padding:n},y=r==="center"?2:1,m=l==="middle"?2:1,f=k=>({width:Math.sqrt(Math.max(s**2-(k/m)**2,0))*y,height:Math.min(k,m*s),meta:null});let S,D,v;if(p!=null&&u!=null){const k=Hl(d,c,u,p,g,f);S=k?.label,D=k?.secondaryLabel,v=k?.height??0}else{const k=mo(d,c,g,f);S=k?.[0],D=void 0,v=k?.[0].height??0}const x=v*$2[l];i.each((k,A)=>{let M;if(A.label==="primary"?M=S:A.label==="secondary"&&(M=D),M==null){k.visible=!1;return}k.visible=!0,k.text=M.text,k.fontSize=M.fontSize,k.lineHeight=M.lineHeight,k.textAlign=r,k.textBaseline="middle";const b=A.label==="primary"?M.height/2:v-M.height/2;k.y=A.centerY+b-x,k.x=A.centerX})}var{fromToMotion:Fo,resetMotion:Md,SeriesNodePickMode:Id,StateMachine:X2,createDatumId:yr,normalizeAngle360:Y2,normalizeAngle360Inclusive:Ld,isBetweenAngles:ra,sectorBox:U2,toRadians:la,BBox:q2,Group:Qt,PointerEvents:ca,Selection:ei,Sector:j2,SectorBox:J2,Text:Nd,Marker:Z2,tickFormat:Q2,applyShapeStyle:ha,mergeDefaults:eL}=Ii,tL={inside:90,middle:0,outside:-90},iL=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],oL=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],pa=class extends Ii.Series{constructor(e){super({moduleCtx:e,pickModes:[Id.EXACT_SHAPE_MATCH,Id.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new Le,this.scale=new wr,this.scaleGroup=this.contentGroup.appendChild(new Qt({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Qt({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new Qt({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Qt({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Qt({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Qt({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Qt({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Qt({name:"tickGroup"})),this.scaleSelection=ei.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=ei.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=ei.select(this.itemNeedleGroup,cr),this.targetSelection=ei.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=ei.select(this.itemTargetLabelGroup,Nd),this.labelSelection=ei.select(this.itemLabelGroup,Nd),this.highlightTargetSelection=ei.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=ei.select(this.tickGroup,Ii.TransformableText),this.datumUnion=new bh,this.animationState=new X2("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=ca.None,this.tickGroup.pointerEvents=ca.None,this.itemNeedleGroup.pointerEvents=ca.None,this.itemLabelGroup.pointerEvents=ca.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new j2}markerFactory(){const e=new Z2;return e.size=1,e}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){const{min:t,max:i}=this.properties.scale;return Dh(e,{min:t,max:i})}layoutScale(){const{scale:e,properties:t}=this,{seriesRectWidth:i,seriesRectHeight:o}=this.nodeDataDependencies,{scale:s,outerRadius:a}=this.properties,{min:n,max:r,label:l,interval:c}=s,p=la(t.startAngle-90),d=la(t.endAngle-90),g=Ld(d-p)>Math.PI,y=g||ra(1.5*Math.PI,p,d),m=g||ra(0*Math.PI,p,d),f=g||ra(.5*Math.PI,p,d),S=g||ra(1*Math.PI,p,d);let D;S&&!m?D="right":!S&&m?D="left":D="center";let v;y&&!f?v="bottom":!y&&f?v="top":v="middle";const x=U2({startAngle:p,endAngle:d,innerRadius:0,outerRadius:.5}),k=-(x.x+x.width/2)*2,A=-(x.y+x.height/2)*2,M=Math.min(i/x.width,o/x.height);e.domain=[n,r],e.range=[p,d],e.arcLength=M/2;const{maxSpacing:b,minSpacing:L}=c,{arcLength:I}=e,N=b?Math.floor(I/b):1,R=L?Math.floor(I/L):1/0,P=Math.floor(4/Math.PI*Math.abs(e.range[0]-e.range[1])),_=Math.max(N,Math.min(R,P)),T=c.values??e.ticks({nice:!1,interval:c.step,minTickCount:N,maxTickCount:R,tickCount:_})?.ticks??[],O=Q2(T,typeof l.format=="string"?l.format:void 0),E=L2(l),C=T.map((K,W)=>{let z;if(l.formatter&&(z=An(this.ctx,l.formatter,{value:K,index:W,domain:e.domain,boundSeries:void 0})),z??(z=O?.(K)),z==null)return;const{width:$,height:Y}=E.measureText(z);return{index:W,value:K,text:z,width:$,height:Y}}).filter(K=>K!=null),w=C.reduce((K,W)=>Math.max(K,W.width),0),F=C.reduce((K,W)=>Math.max(K,W.height),0),B=l.enabled?Math.max(w,F)+l.spacing:0,V=Math.max(.5*M-B,0),G=a??V;return this.centerX=i/2+k*G,this.centerY=o/2+A*G,this.radius=G,this.textAlign=D,this.verticalAlign=v,C}getShapeFillBBox(){const{centerX:e,centerY:t,radius:i}=this,o=new q2(e-i,t-i,2*i,2*i);return{series:o,axis:o}}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:o=t.text,value:s=t.value??0,shape:a=t.shape??"triangle",rotation:n=t.rotation??0,placement:r=t.placement??"middle",spacing:l=t.spacing??0,size:c=t.size??0}=i,{enabled:p=t.label.enabled,color:d=t.label.color??"black",fontStyle:u=t.label.fontStyle??"normal",fontWeight:g=t.label.fontWeight??"normal",fontSize:y=t.label.fontSize,fontFamily:m=t.label.fontFamily,spacing:f=t.label.spacing??0}=i.label;return{text:o,value:s,shape:a,placement:r,spacing:l,size:c,rotation:n,label:{enabled:p,color:d,fontStyle:u,fontWeight:g,fontSize:y,fontFamily:m,spacing:f},style:i.getStyle()}})}getTargetRadius(e){const{radius:t,properties:i}=this,{innerRadiusRatio:o,outerRadiusRatio:s}=i,{placement:a,spacing:n,size:r}=e,l=t*s,c=t*o;switch(a){case"inside":return Math.max(c-n-r/2,0);case"outside":return l+n+r/2;default:return(c+l)/2}}getTargetLabel(e){const{scale:t}=this,{value:i,size:o,placement:s,label:a}=e,{spacing:n,color:r,fontStyle:l,fontWeight:c,fontSize:p,fontFamily:d}=a,u=void 0,g=t.convert(i),y=Y2(g)/(Math.PI/2)|0,m=o/2+n;let f,S,D,v;switch(s){case"outside":({textAlign:f,textBaseline:S}=iL[y]),D=m*Math.cos(g),v=m*Math.sin(g);break;case"inside":({textAlign:f,textBaseline:S}=oL[y]),D=-m*Math.cos(g),v=-m*Math.sin(g);break;default:f="center",S="bottom",D=0,v=-m;break}return{offsetX:D,offsetY:v,fill:r,textAlign:f,textBaseline:S,fontStyle:l,fontWeight:c,fontSize:p,fontFamily:d,lineHeight:u}}createNodeData(){const e=this.layoutScale(),{id:t,scale:i,properties:o,radius:s,centerX:a,centerY:n}=this,{value:r,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:p,cornerRadius:d,cornerMode:u,needle:g,bar:y,scale:m,label:f,secondaryLabel:S}=o,{outerRadius:D=s*c,innerRadius:v=s*l,defaultColorRange:x}=o,k=this.getTargets(),A=[],M=[],b=[],L=[],I=[],N=u==="item",R=i.convert(i.domain[0]),P=i.convert(r),_=Math.ceil(Ld(P-R)*s);let T=p.enabled?p.interval.getSegments(i,_):void 0;const O=y.getStyle(x,i),E=m.getStyle(y.enabled,x,i);if(T==null&&N){const C=Math.min(...i.domain),w=Math.max(...i.domain),F={value:r,segmentStart:C,segmentEnd:w},V=Math.min(d,(D-v)/2)/((v+D)/2);A.push({series:this,itemId:"value",datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:v,startAngle:R-V,endAngle:P+V,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,style:O}),I.push({series:this,itemId:"scale",datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:v,startAngle:i.range[0]-V,endAngle:i.range[1]+V,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,style:E})}else{T??(T=i.domain);for(let C=0;C<T.length-1;C++){const w=T[C],F=T[C+1],B={value:r,segmentStart:w,segmentEnd:F},V=C===0,G=C===T.length-2,K=i.convert(w),W=i.convert(F);A.push({series:this,itemId:`value-${C}`,datum:B,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:v,startAngle:K,endAngle:W,clipStartAngle:R,clipEndAngle:P,startCornerRadius:N||V?d:0,endCornerRadius:N||G?d:0,style:O}),I.push({series:this,itemId:`scale-${C}`,datum:B,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:v,startAngle:K,endAngle:W,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:N||V?d:0,endCornerRadius:N||G?d:0,style:E})}}if(!g.enabled&&f.enabled){const{text:C,color:w,fontSize:F,minimumFontSize:B,fontStyle:V,fontWeight:G,fontFamily:K,lineHeight:W,formatter:z=$=>this.formatLabel($.value)}=f;L.push({label:"primary",centerX:a,centerY:n,text:C,value:r,fill:w,fontSize:F,minimumFontSize:B,fontStyle:V,fontWeight:G,fontFamily:K,lineHeight:W,formatter:z})}if(!g.enabled&&S.enabled){const{text:C,color:w,fontSize:F,minimumFontSize:B,fontStyle:V,fontWeight:G,fontFamily:K,lineHeight:W,formatter:z}=S;L.push({label:"secondary",centerX:a,centerY:n,text:C,value:r,fill:w,fontSize:F,minimumFontSize:B,fontStyle:V,fontWeight:G,fontFamily:K,lineHeight:W,formatter:z})}if(g.enabled){let C=g.radiusRatio!=null?s*g.radiusRatio:v;C=Math.max(C-g.spacing,0);const w=i.convert(r);b.push({centerX:a,centerY:n,radius:C,angle:w,series:this})}for(let C=0;C<k.length;C+=1){const w=k[C],{value:F,text:B,size:V,shape:G,style:K}=w;if(F<Math.min(...i.domain)||F>Math.max(...i.domain))continue;const W=this.getTargetRadius(w),z=i.convert(F),$=la(w.rotation+tL[w.placement]);M.push({series:this,itemId:`target-${C}`,midPoint:{x:W*Math.cos(z)+a,y:W*Math.sin(z)+n},datum:{value:F},datumIndex:{type:1,index:C},type:1,value:F,text:B,centerX:a,centerY:n,shape:G,radius:W,angle:z,rotation:$,size:V,label:this.getTargetLabel(w),style:K})}return{itemId:t,nodeData:A,needleData:b,targetData:M,labelData:L,scaleData:I,tickData:e}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,needleSelection:o,targetSelection:s,targetLabelSelection:a,scaleSelection:n,highlightTargetSelection:r,tickSelection:l}=this,c=this.checkResize(e);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const p=this.contextNodeData?.nodeData??[],d=this.contextNodeData?.labelData??[],u=this.contextNodeData?.needleData??[],g=this.contextNodeData?.targetData??[],y=this.contextNodeData?.scaleData??[],m=this.contextNodeData?.tickData??[],f=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:y,scaleSelection:n}),this.updateScaleNodes({scaleSelection:n}),this.needleSelection=this.updateNeedleSelection({needleData:u,needleSelection:o}),this.updateNeedleNodes({needleSelection:o}),this.targetSelection=this.updateTargetSelection({targetData:g,targetSelection:s}),this.updateTargetStyles({targetSelection:s,isHighlight:!1}),this.updateTargetNodes({targetSelection:s}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:g,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:p,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:d,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:f!=null?[f]:[],targetSelection:r}),this.updateTargetStyles({targetSelection:r,isHighlight:!0}),this.updateTargetNodes({targetSelection:r}),this.tickSelection=this.updateTickSelection({tickData:m,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>yr(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:o}=this,{segmentation:s}=o,a=s.spacing??0,n=i.animationManager.isSkipped(),r=this.getShapeFillBBox();t.each((l,c)=>{const{centerX:p,centerY:d,innerRadius:u,outerRadius:g,startCornerRadius:y,endCornerRadius:m}=c;l.centerX=p,l.centerY=d,l.innerRadius=u,l.outerRadius=g,l.pointerEvents=this.properties.bar.enabled?Ii.PointerEvents.All:Ii.PointerEvents.None,ha(l,c.style,r),l.startOuterCornerRadius=y,l.startInnerCornerRadius=y,l.endOuterCornerRadius=m,l.endInnerCornerRadius=m,l.radialEdgeInset=(a+l.strokeWidth)/2,l.concentricEdgeInset=l.strokeWidth/2,(n||l.previousDatum==null)&&l.setProperties(gr(l,c))}),this.datumUnion.update(t,this.itemGroup,Ii.Sector,(l,c,p)=>{l.clipSector??(l.clipSector=new J2(NaN,NaN,NaN,NaN)),l.centerX=c.centerX,l.centerY=c.centerY,l.outerRadius=l.clipSector.outerRadius=c.outerRadius,l.innerRadius=l.clipSector.innerRadius=c.innerRadius,l.startAngle=l.clipSector.startAngle=c.startAngle,l.startInnerCornerRadius=c.startInnerCornerRadius,l.startOuterCornerRadius=c.startOuterCornerRadius,l.endAngle=p.endAngle,l.clipSector.endAngle=p.clipSector?.endAngle??p.endAngle,l.endInnerCornerRadius=p.endInnerCornerRadius,l.endOuterCornerRadius=p.endOuterCornerRadius,l.pointerEvents=Ii.PointerEvents.None})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>yr(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{segmentation:i}=this.properties,o=i.spacing??0,s=this.getShapeFillBBox();t.each((a,n)=>{const{centerX:r,centerY:l,innerRadius:c,outerRadius:p,startCornerRadius:d,endCornerRadius:u}=n;a.centerX=r,a.centerY=l,a.innerRadius=c,a.outerRadius=p,ha(a,n.style,s),a.startOuterCornerRadius=d,a.startInnerCornerRadius=d,a.endOuterCornerRadius=u,a.endInnerCornerRadius=u,a.radialEdgeInset=(o+a.strokeWidth)/2,a.concentricEdgeInset=a.strokeWidth/2,a.setProperties(gr(a,n))})}updateNeedleSelection(e){return e.needleSelection.update(e.needleData,void 0,()=>yr(0))}updateNeedleNodes(e){const{needleSelection:t}=e,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:n,lineDash:r,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();t.each((p,d)=>{const{centerX:u,centerY:g,radius:y}=d,m=y*2;p.d=cr.defaultPathData,ha(p,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:n/m,lineDash:r.map(f=>f/m),lineDashOffset:l/m}),p.translationX=u,p.translationY=g,p.scalingX=m,p.scalingY=m,c&&p.setProperties(Ad(p,d))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetStyles({targetSelection:e,isHighlight:t}){e.each((i,o)=>{o.style=this.getTargetStyle(t,o)})}updateTargetNodes({targetSelection:e}){e.each((t,i)=>{const{centerX:o,centerY:s,angle:a,radius:n,shape:r,size:l,rotation:c}=i;ha(t,i.style),t.size=l,t.shape=r==="line"?kh:r,t.translationX=o+n*Math.cos(a),t.translationY=s+n*Math.sin(a),t.rotation=a+c})}getTargetStyle(e,{datumIndex:t,style:i}){const o=this.getHighlightStyle(e,t);return eL(o,{...i,opacity:1})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,o)=>{const{centerX:s,centerY:a,radius:n,angle:r,text:l}=o,{offsetX:c,offsetY:p,fill:d,fontStyle:u,fontWeight:g,fontSize:y,fontFamily:m,textAlign:f,textBaseline:S}=o.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=s+n*Math.cos(r)+c,i.y=a+n*Math.sin(r)+p,i.text=l,i.fill=d,i.fontStyle=u,i.fontWeight=g,i.fontSize=y,i.fontFamily=m,i.textAlign=f,i.textBaseline=S})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>t.label)}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((o,s)=>{o.fill=s.fill,o.fontStyle=s.fontStyle,o.fontWeight=s.fontWeight,o.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.index)}updateTickNodes(e){const{scale:t,radius:i,centerX:o,centerY:s,properties:a}=this,{enabled:n,color:r,fontFamily:l,fontSize:c,fontStyle:p,fontWeight:d,spacing:u}=a.scale.label,g=la(a.scale.label.rotation??0);e.tickSelection.each((y,m)=>{if(!n){y.visible=!1;return}y.visible=!0,y.text=m.text,y.fill=r,y.fontFamily=l,y.fontSize=c,y.fontStyle=p,y.fontWeight=d,y.textAlign="center",y.textBaseline="middle";const f=t.convert(m.value),{width:S,height:D}=m,v=Math.abs(i*Math.cos(f)),x=Math.abs(i*Math.sin(f)),k=Math.min(Math.max(Math.abs(i/Math.tan(f)),v-S/2),v+S/2),A=Math.min(Math.max(Math.abs(i*Math.tan(f)),x-D/2),x+D/2),M=Math.hypot(k,A),b=o+(M+u)*Math.cos(f),L=s+(M+u)*Math.sin(f);y.x=b,y.y=L,y.rotationCenterX=b,y.rotationCenterY=L,y.rotation=g})}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,radius:i,textAlign:o,verticalAlign:s}=this,{spacing:a,innerRadiusRatio:n}=this.properties;H2(this,this.ctx,t,{padding:a,textAlign:o,verticalAlign:s},i*n,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Md([this.datumSelection],gr),Md([this.needleSelection],Ad),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i,o,s,a;if(this.labelSelection.each((n,r)=>{n.opacity=1,r.label==="primary"?(i=n.previousDatum?.value??e.from??r.value,o=r.value):r.label==="secondary"&&(s=n.previousDatum?.value??e.from??r.value,a=r.value)}),!this.labelsHaveExplicitText())if(o==null||a==null)this.formatLabelText();else if(i===o&&s===a)this.formatLabelText({label:o,secondaryLabel:a});else{const n=`${this.id}_labels`;t.animate({id:n,groupId:"label",from:{label:i,secondaryLabel:s},to:{label:o,secondaryLabel:a},phase:e.phase??"update",onUpdate:r=>this.formatLabelText(r),onStop:()=>this.formatLabelText({label:o,secondaryLabel:a})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=kd(!0,this.scale.range[0]);Fo(this.id,"node",e,[this.datumSelection],t,(o,s)=>s.itemId),Fo(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),Fo(this.id,"label",e,[this.labelSelection],vh,(o,s)=>s.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=kd(!1,this.scale.range[0]);Fo(this.id,"node",e,[this.datumSelection],t,(o,s)=>s.itemId),Fo(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}dataCount(){return NaN}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:o}=i;let s,a,n;if(e.type===0?(s=i.value,a=i.label.text,n=this.ctx.localeManager.t("ariaLabelGaugeValue")):({value:s,text:a}=i.targets[e.index],n=this.ctx.localeManager.t("ariaLabelGaugeTarget")),s!=null)return this.formatTooltipWithContext(o,{data:[{label:a,fallbackLabel:n,value:this.formatLabel(s)}]},{seriesId:t,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(e){return Mh(this,e)}pickFocus(e){return Ih(this,e)}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),this.labelSelection.each((i,o)=>{const s=Mo(this.id,this.ctx,o);s!=null&&t.push(s)}),t.join(". ")}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return!1}};pa.className="RadialGaugeSeries",pa.type="radial-gauge";var{FONT_SIZE_RATIO:sL}=io,PP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"radial-gauge",moduleFactory:e=>new pa(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},io.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",io.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{...io.LABEL_BOXING_DEFAULTS,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{...io.LABEL_BOXING_DEFAULTS,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:sL.LARGE},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}},tooltip:{range:{$path:["/tooltip/range",10]}}}}},Td={type:"series",name:"radial-gauge",chartType:"standalone",enterprise:!0,options:io.radialGaugeSeriesOptionsDef,create:e=>new pa(e)};import{_ModuleSupport as oo}from"ag-charts-community";import{_ModuleSupport as aL}from"ag-charts-community";import{Logger as nL,cachedTextMeasurer as rL,calcLineHeight as lL,wrapText as Rd}from"ag-charts-core";function Cd(e){e.nodes.sort((t,i)=>Math.round((t.datum.y-i.datum.y)*100)/100||-(t.datum.size-i.datum.size))}function cL({nodes:e,size:t},{seriesRectHeight:i,nodeSpacing:o,sizeScale:s}){const a=i*t*s;let n=(i-(a+o*(e.length-1)))/2;e.forEach(({datum:r})=>{const l=i*r.size*s;r.y=n,r.height=l,n+=l+o})}function hL(e,t){const{nodes:i}=e,{seriesRectHeight:o,nodeSpacing:s}=t;Cd(e);let a=0,n=0;for(const{datum:c}of i){const p=Math.max(n-c.y,0);c.y+=p,a+=p,n=c.y+c.height+s}if(n-s<o)return a>0;let l=o;for(let c=i.length-1;c>=0;c-=1){const{datum:p}=i[c],d=p.y+p.height,u=Math.min(l-d,0);p.y+=u,a+=u,l=p.y-s}return!0}function mr(e,t,i,o,s,a,n,r){const l=(i-e)/(o-t),c=(n-s)/(r-a),p=((a-t)*(l*c)+e*c-s*l)/(c-l);return e<i?p>e&&p<Math.min(i,n):p<e&&p>Math.max(i,n)}function Pd(e,t){let i=!1;const o=e.nodes.filter(a=>t(a).length===1);let s=!0;for(let a=0;s&&a<o.length;a+=1){s=!1;for(let n=0;n<o.length-1;n+=1){const{datum:r}=o[n],l=t(o[n])[0].node.datum,{datum:c}=o[n+1],p=t(o[n+1])[0].node.datum;if(!(mr(r.x,r.y,l.x,l.y,c.x,c.y,p.x,p.y)||mr(r.x,r.y+r.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,p.x,p.y+p.height/2)||mr(r.x,r.y+r.height,l.x,l.y+l.height,c.x,c.y+c.height,p.x,p.y+p.height)))continue;const u=o[n];o[n]=o[n+1],o[n+1]=u;const g=r.y;r.y=c.y+c.height-r.height,c.y=g,i=!0,s=!0}}return i}function pL(e){let t=!1;return Cd(e),t=Pd(e,i=>i.linksBefore)||t,t=Pd(e,i=>i.linksAfter)||t,t}function dL(e){if(e.length===0)return;let t=0,i=0;for(const{node:{datum:o}}of e)t+=o.y*o.size,i+=o.size;return t/i}function _d(e,t,i,o){return e.nodes.forEach(({datum:s,linksBefore:a,linksAfter:n})=>{const r=o===1?a:n,l=o===1?n:a,c=dL(r);if(c!=null){const p=l.length!==0?i:1;s.y=s.y+(c-s.y)*p}}),hL(e,t)}function Ed(e,t,i){let o=!1;for(const s of e)o=_d(s,t,i,1)||o;return o}function uL(e,t,i){let o=!1;for(let s=e.length-1;s>=0;s-=1)o=_d(e[s],t,i,-1)||o;return o}function wd(e){let t=!1;for(let i=e.length-1;i>=0;i-=1)t=pL(e[i])||t;return t}function gL(e,t){e.forEach(o=>{cL(o,t)});let i=!1;for(let o=0;o<6;o+=1){const s=Ed(e,t,1);i=uL(e,t,.5);const a=wd(e);if(!s&&!i&&!a)break}i&&(Ed(e,t,1),wd(e))}import{_ModuleSupport as yL}from"ag-charts-community";var{BBox:mL,Path:fL,SceneChangeDetection:so,splitBezier2D:SL}=yL;function da(e,t,i,o,s,a,n,r,l,c){let p,d;if(s!==i&&l!==n){const A=-(o-t)/(s-i),M=-(r-a)/(l-n);p=(n-i+A*t-M*a)/(A-M),d=A*(p-t)+i}else if(s===i&&l!==n)p=t,d=-(r-a)/(l-n)*(p-r)+l;else if(s!==i&&l===n)p=r,d=-(o-t)/(s-i)*(p-t)+i;else throw new Error("Offsetting flat bezier curve");const u=Math.hypot(i-d,t-p),g=(u+c)/u,y=Math.hypot(l-d,r-p),m=(y+c)/y,f=p+(o-p)*g,S=d+(s-d)*g,D=p+(a-p)*m,v=d+(n-d)*m,x=p+(r-p)*m,k=d+(l-d)*m;e.cubicCurveTo(f,S,D,v,x,k)}var Li=class extends fL{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2)-e,i=Math.min(this.y1,this.y2),o=Math.max(this.y1,this.y2)-i+this.height;return new mL(e,i,t,o)}updatePath(){const{path:e,inset:t}=this;e.clear();const i=this.x1+t,o=this.x2-t,s=this.y1+t,a=this.y2+t,n=this.height-2*t;if(n<0||i>o)return;const r=i,l=s+n/2,c=(i+o)/2,p=s+n/2,d=(i+o)/2,u=a+n/2,g=o,y=a+n/2;if(e.moveTo(r,l-n/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)e.cubicCurveTo(c,p-n/2,d,u-n/2,g,y-n/2),e.lineTo(g,y+n/2),e.cubicCurveTo(d,u+n/2,c,p+n/2,r,l+n/2);else{const[m,f]=SL(r,l,c,p,d,u,g,y,.5),S=(a>s?1:-1)*n/2;da(e,m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y,S),da(e,f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y,-S),e.lineTo(g,y+n/2),da(e,f[3].x,f[3].y,f[2].x,f[2].y,f[1].x,f[1].y,f[0].x,f[0].y,S),da(e,m[3].x,m[3].y,m[2].x,m[2].y,m[1].x,m[1].y,m[0].x,m[0].y,-S)}e.closePath()}};h([so()],Li.prototype,"x1",2),h([so()],Li.prototype,"x2",2),h([so()],Li.prototype,"y1",2),h([so()],Li.prototype,"y2",2),h([so()],Li.prototype,"height",2),h([so()],Li.prototype,"inset",2);import{_ModuleSupport as xL}from"ag-charts-community";var{BaseProperties:Od,FillGradientDefaults:bL,FillPatternDefaults:vL,FillImageDefaults:DL,makeSeriesTooltip:kL,SeriesProperties:AL,Property:Q,Label:ML}=xL,Fd=class extends ML{constructor(){super(...arguments),this.spacing=1}};h([Q],Fd.prototype,"spacing",2);var Xt=class extends Od{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([Q],Xt.prototype,"fill",2),h([Q],Xt.prototype,"fillOpacity",2),h([Q],Xt.prototype,"stroke",2),h([Q],Xt.prototype,"strokeOpacity",2),h([Q],Xt.prototype,"strokeWidth",2),h([Q],Xt.prototype,"lineDash",2),h([Q],Xt.prototype,"lineDashOffset",2),h([Q],Xt.prototype,"itemStyler",2);var yt=class extends Od{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([Q],yt.prototype,"spacing",2),h([Q],yt.prototype,"width",2),h([Q],yt.prototype,"alignment",2),h([Q],yt.prototype,"fill",2),h([Q],yt.prototype,"fillOpacity",2),h([Q],yt.prototype,"stroke",2),h([Q],yt.prototype,"strokeOpacity",2),h([Q],yt.prototype,"strokeWidth",2),h([Q],yt.prototype,"lineDash",2),h([Q],yt.prototype,"lineDashOffset",2),h([Q],yt.prototype,"itemStyler",2);var Ne=class extends AL{constructor(){super(),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new bL,this.fillPatternDefaults=new vL,this.fillImageDefaults=new DL,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new Fd,this.link=new Xt,this.node=new yt,this.tooltip=kL(),this.highlightStyle.deprecated=!1}getStyle(e,t,i,o){const{fillOpacity:s,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l,fill:c=t[o%t.length],stroke:p=i[o%t.length]}=e?this.link:this.node;return{fill:c,fillOpacity:s,stroke:p,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}}};h([Q],Ne.prototype,"nodes",2),h([Q],Ne.prototype,"fromKey",2),h([Q],Ne.prototype,"toKey",2),h([Q],Ne.prototype,"idKey",2),h([Q],Ne.prototype,"idName",2),h([Q],Ne.prototype,"labelKey",2),h([Q],Ne.prototype,"labelName",2),h([Q],Ne.prototype,"sizeKey",2),h([Q],Ne.prototype,"sizeName",2),h([Q],Ne.prototype,"fillGradientDefaults",2),h([Q],Ne.prototype,"fillPatternDefaults",2),h([Q],Ne.prototype,"fillImageDefaults",2),h([Q],Ne.prototype,"defaultColorRange",2),h([Q],Ne.prototype,"defaultPatternFills",2),h([Q],Ne.prototype,"fills",2),h([Q],Ne.prototype,"strokes",2),h([Q],Ne.prototype,"label",2),h([Q],Ne.prototype,"link",2),h([Q],Ne.prototype,"node",2),h([Q],Ne.prototype,"tooltip",2);var{Transformable:IL,applyShapeStyle:Bd,SeriesNodePickMode:Gd,createDatumId:ua,getShapeStyle:Vd,getLabelStyles:LL,Rect:Kd,BBox:zd,mergeDefaults:ga}=aL,ya=class extends Hc{constructor(e){super({moduleCtx:e,pickModes:[Gd.NEAREST_NODE,Gd.EXACT_SHAPE_MATCH]}),this.properties=new Ne}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Li}nodeFactory(){return new Kd}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:o,toKey:s,sizeKey:a,labelKey:n,label:{spacing:r},node:{spacing:l,width:c,alignment:p}}=this.properties,{nodeGraph:d,links:u,maxPathLength:g}=this.getNodeGraph(b=>({...b,x:NaN,y:NaN,width:c,height:NaN}),b=>({...b,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),y=d,m=this.isLabelEnabled()?(t-c)*(1-g/(g+1)):0,f=(t-c-2*m)/(g-1),S=[];for(let b=0;b<g;b+=1){const L=m+b*f;S.push({index:b,size:0,nodes:[],x:L})}y.forEach(b=>{const{datum:L,linksBefore:I,linksAfter:N,maxPathLengthBefore:R,maxPathLengthAfter:P}=b,_=Math.max(I.reduce((C,{link:w})=>C+w.size,0),N.reduce((C,{link:w})=>C+w.size,0));if(I.length===0&&N.length===0||_===0){b.columnIndex=-1;return}let T;switch(p){case"left":T=S[R];break;case"right":T=S[g-1-P];break;case"center":{if(I.length!==0)T=S[R];else if(N.length!==0){const C=N.reduce((w,F)=>Math.min(w,F.node.maxPathLengthBefore),g)-1;T=S[C]}else T=S[0];break}case"justify":{T=N.length===0?S[g-1]:S[R];break}}L.x=T.x,L.size=_;const{label:O}=this.properties,E=O.enabled?this.getLabelText(L.label,L.datum,n,"label",[],this.properties.label,{datum:L.datum,value:L.label,fromKey:o,toKey:s,sizeKey:a,size:_}):void 0;L.label=E,T.nodes.push(b),T.size+=_,b.columnIndex=T.index}),y.forEach(b=>{let L=1/0,I=0;b.linksAfter.forEach(N=>{const R=N.node,{columnIndex:P}=R;P<L?(L=P,I=R.datum.size):P===L&&(I=Math.max(I,R.datum.size))}),b.closestColumnIndex=L,b.maxSizeOfClosestNodesAfter=I});const D=S.reduce((b,{size:L,nodes:I})=>{const N=(1-(I.length-1)*(l/i))/L;return Math.min(b,N)},1/0);for(let b=S.length-1;b>=0;b-=1)S[b].nodes.sort((I,N)=>I.closestColumnIndex-N.closestColumnIndex||I.maxSizeOfClosestNodesAfter-N.maxSizeOfClosestNodesAfter||I.datum.size-N.datum.size);gL(S,{seriesRectHeight:i,nodeSpacing:l,sizeScale:D});let v=!1;if(y.forEach(({datum:b,linksBefore:L,linksAfter:I})=>{v||(v=b.height<0);const N=b.y+b.height,R=T=>T.sort((O,E)=>{const C=O.node.datum,w=E.node.datum,F=C.y+C.height,B=w.y+w.height,V=Math.atan2(C.y-b.y,Math.abs(C.x-b.x))-Math.atan2(w.y-b.y,Math.abs(w.x-b.x)),G=Math.atan2(F-N,Math.abs(C.x-b.x))-Math.atan2(B-N,Math.abs(w.x-b.x));return V+G});let P=b.y;R(L).forEach(({link:T})=>{T.y2=P,P+=T.size*i*D});let _=b.y;R(I).forEach(({link:T})=>{T.y1=_,_+=T.size*i*D})}),v){nL.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const x=[],k=[],{fontSize:A}=this.properties.label,M=rL(this.properties.label);return S.forEach((b,L)=>{const I=L===0,N=L===S.length-1;let R=-1/0;b.nodes.sort((P,_)=>P.datum.y-_.datum.y),b.nodes.forEach(({datum:P})=>{if(P.midPoint={x:P.x+P.width/2,y:P.y+P.height/2},x.push(P),P.label==null)return;const _=I?P.x-r:P.x+P.width+r,T=P.y+P.height/2;let O;if(!I&&!N){const F=lL(A),B=T-F,V=T+F;let G=t;y.forEach(({datum:W})=>{W.x>P.x&&Math.max(W.y,B)<=Math.min(W.y+W.height,V)&&(G=Math.min(G,W.x-r))});const K=G-P.x-2*r;O=Rd(P.label,{maxWidth:K,maxHeight:P.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(O==null||O===""){const F=I||N?r:r*2;O=Rd(P.label,{maxWidth:f-F,maxHeight:P.height,font:this.properties.label,textWrap:"never"})}if(O==="")return;const{height:E}=M.measureText(O),C=T-E/2,w=T+E/2;C>=R&&(k.push({x:_,y:T,leading:I,text:O,size:P.size}),R=w)})}),u.forEach(b=>{const{fromNode:L,toNode:I,size:N}=b;b.height=i*N*D,b.x1=L.x+c,b.x2=I.x,b.midPoint={x:(b.x1+b.x2)/2,y:(b.y1+b.y2)/2+b.height/2},x.push(b)}),{itemId:e,nodeData:x,labelData:k}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const t=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((i,o)=>{const{x:s,y:a,leading:n,text:r}=o,c=LL(this,void 0,o,this.properties.label,!1,t),{color:p,fontStyle:d,fontWeight:u,fontSize:g,fontFamily:y}=c;i.visible=!0,i.x=s,i.y=a,i.text=r,i.fill=p,i.fontStyle=d,i.fontWeight=u,i.fontSize=g,i.fontFamily=y,i.textAlign=n?"right":"left",i.textBaseline="middle",i.setBoxing(c)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ua(t.type,t.id))}getNodeStyle({datumIndex:e,datum:t,size:i=0,label:o},s,a){const{id:n,properties:r}=this,{fills:l,strokes:c,defaultColorRange:p,defaultPatternFills:d,fillGradientDefaults:u,fillPatternDefaults:g,fillImageDefaults:y}=r,{itemStyler:m}=r.node,f=p[s%p.length].map(A=>({color:A})),S=d[s%d.length],D=this.getHighlightStyle(a,e),v=ga(D,r.getStyle(!1,l,c,s)),x=r.node.fill!=null;let k=Vd(v,x?u:{...u.toJson(),colorStops:f},x?g:{...g.toJson(),fill:S,stroke:S},y);if(m!=null&&e!=null){const A=this.cachedDatumCallback(ua(e.index,"node",a?"highlight":"node"),()=>{const M=this.ctx.highlightManager?.getActiveHighlight(),b=this.getHighlightStateString(M,a,e);return this.callWithContext(m,{seriesId:n,datum:t,highlighted:a,highlightState:b,...k,size:i,label:o})});A&&(k=ga(A,k,{...u.toJson(),colorStops:f},{...g.toJson(),fill:S,stroke:S},y))}return k.opacity=1,k}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,o=this.getShapeFillBBox();t.each((s,a)=>{const{datumIndex:n}=a,r=this.getNodeStyle(a,n.index,i);s.x=a.x,s.y=a.y,s.width=Math.max(a.width,0),s.height=Math.max(a.height,0),Bd(s,r,o)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=new zd(0,0,e,t);return{series:i,axis:i}}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ua(t.type,t.index,t.fromNode.id,t.toNode.id))}getLinkStyle({datumIndex:e,datum:t},i,o){const{id:s,properties:a}=this,{fills:n,strokes:r,defaultColorRange:l,defaultPatternFills:c,fillGradientDefaults:p,fillPatternDefaults:d,fillImageDefaults:u}=a,{itemStyler:g}=a.link,y=l[i.index%l.length].map(x=>({color:x})),m=c[i.index%c.length],f=this.getHighlightStyle(o,e),S=ga(f,a.getStyle(!0,n,r,i.index)),D=a.link.fill!=null;let v=Vd(S,D?p:{...p.toJson(),colorStops:y},D?d:{...d.toJson(),fill:m,stroke:m},u);if(g!=null&&e!=null){const x=this.cachedDatumCallback(ua(e.index,"link",o?"highlight":"node"),()=>{const k=this.ctx.highlightManager?.getActiveHighlight(),A=this.getHighlightStateString(k,o,e);return this.callWithContext(g,{seriesId:s,datum:t,highlighted:o,highlightState:A,...v})});x&&(v=ga(x,v,{...p.toJson(),colorStops:y},{...d.toJson(),fill:m,stroke:m},u))}return v.opacity=1,v}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,o=this.getShapeFillBBox();t.each((s,a)=>{const n=a.fromNode.datumIndex,r=this.getLinkStyle(a,n,i);s.x1=a.x1,s.y1=a.y1,s.x2=a.x2,s.y2=a.y2,s.height=a.height,Bd(s,r,o),s.inset=s.strokeWidth/2})}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:o,properties:s,ctx:{formatManager:a}}=this,{fromKey:n,toKey:r,sizeKey:l,sizeName:c,tooltip:p}=s,d=this.contextNodeData?.nodeData.find(D=>D.datumIndex.type===e.type&&D.datumIndex.index===e.index);if(d==null)return;const u=d.type===0?d.fromNode.index:d.index,g=d.type===0?`${d.fromNode.label} - ${d.toNode.label}`:d.label,y=e.type===0?i?.dataSources.get(this.id)?.[e.index]:o?.dataSources.get(this.id)?.[e.index],m=d.size;let f;if(d.type===0){const D=d.fromNode.datumIndex;f=this.getLinkStyle({datumIndex:e,datum:y},D,!1)}else f=this.getNodeStyle({datumIndex:e,datum:y},e.index,!1);const S=[];if(l!=null){const D=a.format(this.callWithContext.bind(this),{type:"number",value:m,datum:y,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});S.push({label:c,fallbackLabel:l,value:D??String(m)})}return this.formatTooltipWithContext(p,{title:g,symbol:this.legendItemSymbol(d.type,u,f),data:S},{seriesId:t,datum:y,title:g,fromKey:n,toKey:r,sizeKey:l,sizeName:c,size:m,...f})}computeFocusBounds(e){if(e instanceof Kd){const{x:t,y:i,width:o,height:s}=e,a=new zd(t,i,o,s);return IL.toCanvas(this.contentGroup,a)}return e}hasItemStylers(){return this.properties.node.itemStyler!=null||this.properties.link.itemStyler!=null}};ya.className="SankeySeries",ya.type="sankey";import{_ModuleSupport as NL}from"ag-charts-community";import{arrayOf as fr,color as Wd,constant as TL,fillGradientDefaults as RL,fillImageDefaults as CL,fillPatternDefaults as PL,required as Sr,string as ma,undocumented as Bo}from"ag-charts-core";var{commonSeriesOptionsDefs:_L,sankeySeriesThemeableOptionsDef:EL}=NL,ao={...EL,..._L,type:Sr(TL("sankey")),fromKey:Sr(ma),toKey:Sr(ma),sizeKey:ma,sizeName:ma};ao.fillGradientDefaults=Bo(RL),ao.fillPatternDefaults=Bo(PL),ao.fillImageDefaults=Bo(CL),ao.defaultColorRange=Bo(fr(fr(Wd))),ao.defaultPatternFills=Bo(fr(Wd));var VP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],solo:!0,identifier:"sankey",moduleFactory:e=>new ya(e),themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:oo.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:oo.FILL_PATTERN_DEFAULTS,fillImageDefaults:oo.FILL_IMAGE_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:oo.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},highlight:{...oo.singleSeriesHighlightStyle()},label:{...oo.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:20,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]}}},legend:{enabled:!1,toggleSeries:!1}}},$d={type:"series",name:"sankey",chartType:"standalone",enterprise:!0,options:ao,create:e=>new ya(e)};import{_ModuleSupport as Ni}from"ag-charts-community";import{_ModuleSupport as Go}from"ag-charts-community";import{_ModuleSupport as wL}from"ag-charts-community";var{HierarchySeriesProperties:OL,HighlightStyle:FL,makeSeriesTooltip:BL,Property:Te}=wL,ti=class extends FL{constructor(){super(!1),this.label=new Rt,this.secondaryLabel=new Rt}};h([Te],ti.prototype,"fill",2),h([Te],ti.prototype,"fillOpacity",2),h([Te],ti.prototype,"stroke",2),h([Te],ti.prototype,"strokeWidth",2),h([Te],ti.prototype,"strokeOpacity",2),h([Te],ti.prototype,"label",2),h([Te],ti.prototype,"secondaryLabel",2);var it=class extends OL{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new ti,this.label=new Rt,this.secondaryLabel=new So,this.tooltip=BL()}getStyle(e){const{fills:t,strokes:i,fillOpacity:o,strokeWidth:s,strokeOpacity:a}=this;return{fill:t[e%t.length],fillOpacity:o,stroke:i[e%i.length],strokeWidth:s,strokeOpacity:a,opacity:1}}};h([Te],it.prototype,"sizeName",2),h([Te],it.prototype,"labelKey",2),h([Te],it.prototype,"secondaryLabelKey",2),h([Te],it.prototype,"fillOpacity",2),h([Te],it.prototype,"strokeWidth",2),h([Te],it.prototype,"strokeOpacity",2),h([Te],it.prototype,"cornerRadius",2),h([Te],it.prototype,"sectorSpacing",2),h([Te],it.prototype,"padding",2),h([Te],it.prototype,"itemStyler",2),h([Te],it.prototype,"highlightStyle",2),h([Te],it.prototype,"label",2),h([Te],it.prototype,"secondaryLabel",2),h([Te],it.prototype,"tooltip",2);var{fromToMotion:GL,normalizeAngle360:VL,createDatumId:KL,PointerEvents:zL,Sector:Hd,Group:fa,ScalableGroup:WL,Selection:xr,TransformableText:br,BBox:Xd,applyShapeStyle:$L,mergeDefaults:Yd,formatValue:Ud,getLabelStyles:HL}=Go,XL=class extends Go.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function qd(e,t=0,i=2*Math.PI/e.sumSize){for(const o of e.children){const s=t+o.sumSize*i;o.startAngle=t,o.endAngle=s,qd(o,t,i),t=s}}var Sa=class extends Go.HierarchySeries{constructor(e){super(e),this.NodeClass=XL,this.properties=new it,this.scalingGroup=this.contentGroup.appendChild(new WL),this.sectorGroup=this.scalingGroup.appendChild(new fa),this.sectorLabelGroup=this.scalingGroup.appendChild(new fa),this.highlightSectorGroup=this.scalingGroup.appendChild(new fa),this.datumSelection=xr.select(this.sectorGroup,Hd),this.labelSelection=xr.select(this.sectorLabelGroup,fa),this.highlightSelection=xr.select(this.highlightSectorGroup,Hd),this.sectorLabelGroup.pointerEvents=zL.None}processData(){super.processData(),qd(this.rootNode)}updateSelections(){const e=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(e!=null?[e]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const o=Array.from(this.rootNode),s=a=>{a.append([new br({tag:0}),new br({tag:1})])};this.datumSelection.update(o,void 0,a=>this.getDatumId(a)),this.labelSelection.update(o,s,a=>this.getDatumId(a))}getItemStyle(e,t){const{id:i,properties:o,colorScale:s}=this,{itemStyler:a}=o,n=e.datumIndex?.[0]??0,r=t?o.highlightStyle:void 0,l=Yd(r,o.getStyle(n));!t&&e.colorValue!=null&&(l.fill=s.convert(e.colorValue));let c=l;if(a!=null&&e!=null){const p=this.ctx.highlightManager?.getActiveHighlight(),d=this.cachedDatumCallback(KL(this.getDatumId(e),t?"highlight":"node"),()=>{const u=this.getHighlightStateString(p,t,e.datumIndex);return this.callWithContext(a,{seriesId:i,datum:e.datum,depth:e.depth??0,highlighted:t,highlightState:u,...c})});d&&(c=Yd(d,c))}return c}updateNodes(){const{chart:e,data:t,maxDepth:i}=this;if(e==null||t==null)return;const{width:o,height:s}=e.seriesRect,{sectorSpacing:a=0,padding:n=0,cornerRadius:r,childrenKey:l,colorKey:c,colorName:p,labelKey:d,secondaryLabelKey:u,sizeKey:g,sizeName:y}=this.properties;this.contentGroup.translationX=o/2,this.contentGroup.translationY=s/2;const m=a*.5,f=Math.min(o,s)/2,S=f/(i+1),D=-Math.PI/2,v={series:new Xd(-f,-f,2*f,2*f),axis:new Xd(-f,-f,2*f,2*f)};this.rootNode?.walk(M=>{const{startAngle:b,endAngle:L}=M;if(M.depth!=null){const I=(b+L)/2+D,N=(M.depth+.5)*S;M.midPoint.x=Math.cos(I)*N,M.midPoint.y=Math.sin(I)*N}}),this.rootNode?.walk(M=>{const{datum:b,depth:L,startAngle:I,endAngle:N,parent:R,sumSize:P}=M;M.label=void 0,M.secondaryLabel=void 0,M.contentHeight=0;let _;if(b!=null&&L!=null&&d!=null){const ee=b[d];_=this.getLabelText(ee,b,d,"label",[],this.properties.label,{depth:L,datum:b,childrenKey:l,colorKey:c,colorName:p,labelKey:d,secondaryLabelKey:u,sizeKey:g,sizeName:y,value:ee})}_===""&&(_=void 0);let T;if(b!=null&&L!=null&&u!=null){const ee=b[u];T=this.getLabelText(ee,b,u,"secondaryLabel",[],this.properties.secondaryLabel,{depth:L,datum:b,childrenKey:l,colorKey:c,colorName:p,labelKey:d,secondaryLabelKey:u,sizeKey:g,sizeName:y,value:ee})}if(T===""&&(T=void 0),L==null)return;const O=L*S+m,E=(L+1)*S-m,C=O>m?m/O:m,w=E>m?m/E:m,F=I+C,V=N+C-F,G=I+w,W=N+w-G,z=ee=>{if(L===0&&R?.sumSize===P)return{width:2*Math.sqrt(E**2-(ee*.5)**2),height:ee,meta:0};const le=ee,ue=2*Math.sqrt(E**2-(O+le)**2),Ae=V<Math.PI?2*O*Math.tan(V*.5):1/0,st=Math.min(ue,Ae),ai=Math.PI/4;let ft,Nt;return L===0?(ft=ee,Nt=Math.sqrt(E**2-(ft/2)**2)-ee/(2*Math.tan(W*.5))):VL(V)<ai?(ft=2*O*Math.tan(V*.5),Nt=Math.sqrt(E**2-(ft/2)**2)-O):(Nt=0,ft=0),st>=Nt?{width:st,height:le,meta:1}:{width:Nt,height:ft,meta:2}},$=Ua(_,this.properties.label,T,this.properties.secondaryLabel,{padding:n},z);if($==null)return;const{width:Y,height:oe,meta:ae,label:q,secondaryLabel:j}=$,Z=D+(I+N)/2,he=Math.sin(Z)>=0,ie=Math.cos(Z)>=0,J=(he?3:12)&(ie?6:9);let pe;switch(ae){case 0:pe=0;break;case 1:{const de=E-(S-oe)*.58,le=Math.sqrt((E-n)**2-(Y/2)**2);pe=Math.min(de,le);break}case 2:if(L===0){const ee=oe/(2*Math.tan(V*.5))+Y*.5,de=Math.sqrt(E**2-(oe*.5)**2)-Y*.5;pe=(ee+de)*.5}else pe=(O+E)*.5;break}if(q!=null){const{fontStyle:ee="normal",fontFamily:de,fontWeight:le="normal",color:ue="black"}=this.properties.label;M.label={...q,fontStyle:ee,fontFamily:de,fontWeight:le,color:ue,labelPlacement:ae,circleQuarter:J,radius:pe,theta:Z}}if(j!=null){const{fontStyle:ee="normal",fontFamily:de,fontWeight:le="normal",color:ue="black"}=this.properties.secondaryLabel;M.secondaryLabel={...j,fontStyle:ee,fontFamily:de,fontWeight:le,color:ue,labelPlacement:ae,circleQuarter:J,radius:pe,theta:Z}}M.contentHeight=$.height});const x=(M,b,L)=>{const{depth:I,startAngle:N,endAngle:R}=M;if(I==null){b.visible=!1;return}b.visible=!0;const P=this.getItemStyle(M,L),_=P.fill,T=P.strokeWidth,O=Go.isGradientFill(_)&&_.bounds!=="item"?v:void 0;$L(b,P,O),b.centerX=0,b.centerY=0,b.innerRadius=I*S,b.outerRadius=(I+1)*S,b.startAngle=N+D,b.endAngle=R+D,b.inset=m+T*.5,b.cornerRadius=r};this.datumSelection.each((M,b)=>{x(b,M,!1)}),this.highlightSelection.each((M,b)=>{x(b,M,!0)});const k=(M,b,L,I)=>{const{depth:N,contentHeight:R}=M,P=L===0,_=P?M.label:M.secondaryLabel;if(N==null||_==null){b.visible=!1;return}const{labelPlacement:T,circleQuarter:O,radius:E,theta:C}=_;let w;I&&(w=(P?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color);const F={childrenKey:this.properties.childrenKey,colorKey:this.properties.colorKey,colorName:this.properties.colorName??this.properties.colorKey,depth:M.depth??NaN,labelKey:this.properties.labelKey,secondaryLabelKey:this.properties.secondaryLabelKey,sizeKey:this.properties.sizeKey,sizeName:this.properties.sizeName??this.properties.sizeKey},B=P?this.properties.label:this.properties.secondaryLabel,V=this.ctx.highlightManager?.getActiveHighlight(),G=HL(this,M,F,B,I,V);switch(b.text=_.text,b.fontSize=_.fontSize,b.lineHeight=_.lineHeight,b.fontStyle=_.fontStyle,b.fontFamily=_.fontFamily,b.fontWeight=_.fontWeight,b.fill=w??_.color,b.fillOpacity=this.getHighlightStyle(I,M.datumIndex)?.opacity??1,b.setBoxing(G),T){case 0:b.textAlign="center",b.textBaseline="top",b.translationX=0,b.translationY=(P?0:R-_.height)-R*.5,b.rotation=0;break;case 1:{const K=(O&3)!==0,W=P===!K?E:E-(R-_.height);b.textAlign="center",b.textBaseline=K?"bottom":"top",b.translationX=Math.cos(C)*W,b.translationY=Math.sin(C)*W,b.rotation=K?C-Math.PI*.5:C+Math.PI*.5;break}case 2:{const K=(O&6)!==0,W=P===!K?(R-_.height)*.5:(_.height-R)*.5;b.textAlign="center",b.textBaseline="middle",b.translationX=Math.cos(C)*E+Math.cos(C+Math.PI/2)*W,b.translationY=Math.sin(C)*E+Math.sin(C+Math.PI/2)*W,b.rotation=K?C:C+Math.PI;break}}b.visible=!0},A=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(br).forEach(M=>{const b=M.closestDatum();k(b,M,M.tag,b===A)})}getTooltipContent(e){const{id:t,properties:i,ctx:o}=this,{labelKey:s,secondaryLabelKey:a,childrenKey:n,sizeKey:r,sizeName:l,colorKey:c,colorName:p,tooltip:d}=i,{formatManager:u}=o,g=e.reduce((A,M)=>A?.children[M],this.rootNode);if(g==null)return;const{datum:y,depth:m}=g;if(y==null||m==null)return;const f=[],S=r!=null?y[r]:void 0;if(S!=null){const A=[0,this.rootNode?.sumSize??0],M=u.format(this.callWithContext.bind(this),{type:"number",value:S,datum:y,seriesId:t,legendItemName:void 0,key:r,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:A,fractionDigits:void 0});f.push({label:l,fallbackLabel:r,value:M??Ud(S)})}const D=c!=null?y[c]:void 0;if(D!=null){const{colorDomain:A}=this,M=u.format(this.callWithContext.bind(this),{type:"number",value:D,datum:y,seriesId:t,legendItemName:void 0,key:c,source:"tooltip",property:"color",boundSeries:this.getFormatterContext("color"),domain:A,fractionDigits:void 0});f.push({label:p,fallbackLabel:c,value:M??Ud(D)})}const v=this.getItemStyle({...g,colorValue:D??g.colorValue},!1),k={shape:"square",fill:v.fill,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0};return Go.isGradientFill(k.fill)&&(k.fill={...k.fill,gradient:"linear",rotation:0,reverse:!1}),this.formatTooltipWithContext(d,{title:s!=null?y[s]:void 0,symbol:{marker:k},data:f},{seriesId:t,datum:y,title:void 0,depth:m,labelKey:s,secondaryLabelKey:a,childrenKey:n,sizeKey:r,sizeName:l,colorKey:c,colorName:p,...v})}createNodeData(){}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}animateEmptyUpdateReady(){GL(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(e){return e}hasItemStylers(){return this.properties.itemStyler!=null}};Sa.className="SunburstSeries",Sa.type="sunburst";import{_ModuleSupport as YL}from"ag-charts-community";import{constant as UL,required as qL,string as Ti}from"ag-charts-core";var{commonSeriesOptionsDefs:jL,sunburstSeriesThemeableOptionsDef:JL,without:ZL}=YL,QL={...JL,...ZL(jL,["highlightStyle","highlight","showInLegend"]),type:qL(UL("sunburst")),labelKey:Ti,secondaryLabelKey:Ti,childrenKey:Ti,sizeKey:Ti,colorKey:Ti,sizeName:Ti,colorName:Ti},{BASE_FONT_SIZE:jd,FONT_SIZE_RATIO:Jd}=Ni,XP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"sunburst",moduleFactory:e=>new Sa(e),solo:!0,themeTemplate:{series:{fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",Ni.FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS],["pattern",Ni.FILL_PATTERN_DEFAULTS],["image",Ni.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},colorRange:{$palette:"divergingColors"},strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{...Ni.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:Jd.LARGE},minimumFontSize:{$rem:9/jd},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{...Ni.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:Jd.SMALLEST},minimumFontSize:{$rem:7/jd},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0,...Ni.LEGEND_CONTAINER_THEME}}},Zd={type:"series",name:"sunburst",chartType:"standalone",enterprise:!0,options:QL,create:e=>new Sa(e)};import{_ModuleSupport as ii}from"ag-charts-community";import{_ModuleSupport as Vo}from"ag-charts-community";import{cachedTextMeasurer as eN,calcLineHeight as tN,isNumberEqual as iN,wrapText as oN}from"ag-charts-core";import{_ModuleSupport as sN}from"ag-charts-community";var{BaseProperties:xa,HierarchySeriesProperties:aN,HighlightStyle:nN,makeSeriesTooltip:rN,Property:U,Label:lN}=sN,Qd=class extends lN{constructor(){super(...arguments),this.spacing=0}};h([U],Qd.prototype,"spacing",2);var mt=class extends xa{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new Qd}};h([U],mt.prototype,"fill",2),h([U],mt.prototype,"fillOpacity",2),h([U],mt.prototype,"stroke",2),h([U],mt.prototype,"strokeWidth",2),h([U],mt.prototype,"strokeOpacity",2),h([U],mt.prototype,"cornerRadius",2),h([U],mt.prototype,"textAlign",2),h([U],mt.prototype,"gap",2),h([U],mt.prototype,"padding",2),h([U],mt.prototype,"interactive",2),h([U],mt.prototype,"label",2);var ht=class extends xa{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Rt,this.secondaryLabel=new So}};h([U],ht.prototype,"fill",2),h([U],ht.prototype,"fillOpacity",2),h([U],ht.prototype,"stroke",2),h([U],ht.prototype,"strokeWidth",2),h([U],ht.prototype,"strokeOpacity",2),h([U],ht.prototype,"cornerRadius",2),h([U],ht.prototype,"textAlign",2),h([U],ht.prototype,"verticalAlign",2),h([U],ht.prototype,"gap",2),h([U],ht.prototype,"padding",2),h([U],ht.prototype,"label",2),h([U],ht.prototype,"secondaryLabel",2);var Ri=class extends xa{constructor(){super(...arguments),this.label=new Rt}};h([U],Ri.prototype,"fill",2),h([U],Ri.prototype,"fillOpacity",2),h([U],Ri.prototype,"stroke",2),h([U],Ri.prototype,"strokeWidth",2),h([U],Ri.prototype,"strokeOpacity",2),h([U],Ri.prototype,"label",2);var oi=class extends xa{constructor(){super(...arguments),this.label=new Rt,this.secondaryLabel=new So}};h([U],oi.prototype,"fill",2),h([U],oi.prototype,"fillOpacity",2),h([U],oi.prototype,"stroke",2),h([U],oi.prototype,"strokeWidth",2),h([U],oi.prototype,"strokeOpacity",2),h([U],oi.prototype,"label",2),h([U],oi.prototype,"secondaryLabel",2);var vr=class extends nN{constructor(){super(!1),this.group=new Ri,this.tile=new oi}getStyle(e){return e?this.tile:this.group}};h([U],vr.prototype,"group",2),h([U],vr.prototype,"tile",2);var Lt=class extends aN{constructor(){super(...arguments),this.highlightStyle=new vr,this.tooltip=rN(),this.group=new mt,this.tile=new ht,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}getStyle(e,t,i,o){const{fillOpacity:s,strokeWidth:a,strokeOpacity:n,fill:r=e?t[o%t.length]:t[Math.min(o,t.length)],stroke:l=e?i[o%t.length]:i[Math.min(o,i.length)]}=e?this.tile:this.group;return{fill:r,fillOpacity:s,stroke:l,strokeWidth:a,strokeOpacity:n,opacity:1}}};h([U],Lt.prototype,"sizeName",2),h([U],Lt.prototype,"labelKey",2),h([U],Lt.prototype,"secondaryLabelKey",2),h([U],Lt.prototype,"itemStyler",2),h([U],Lt.prototype,"highlightStyle",2),h([U],Lt.prototype,"tooltip",2),h([U],Lt.prototype,"group",2),h([U],Lt.prototype,"tile",2),h([U],Lt.prototype,"undocumentedGroupFills",2),h([U],Lt.prototype,"undocumentedGroupStrokes",2);var{createDatumId:cN,Rect:eu,Group:tu,BBox:no,Selection:Dr,Text:kr,Transformable:hN,applyShapeStyle:pN,getLabelStyles:dN,mergeDefaults:iu,formatValue:ou}=Vo,uN=class extends Vo.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}};function si(e){return e.children.length>0?e.sumSize-e.sizeValue:e.sizeValue}var su={left:0,center:.5,right:1},gN={top:0,middle:.5,bottom:1},JP=class extends Vo.Group{distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}},ba=class extends Vo.HierarchySeries{constructor(){super(...arguments),this.NodeClass=uN,this.properties=new Lt,this.rectGroup=this.contentGroup.appendChild(new tu),this.datumSelection=Dr.select(this.rectGroup,eu),this.labelSelection=Dr.select(this.labelGroup,tu),this.highlightSelection=Dr.select(this.rectGroup,eu)}groupTitleHeight(e,t){const{labelValue:i}=e,{label:o}=this.properties.group,s=3;if(i!=null){if(o.fontSize>t.width/s||o.fontSize>t.height/s)return;{const{height:a}=eN(o).measureLines(i);return Math.max(a,o.fontSize)}}}getNodePadding(e,t){if(e.parent==null)return{top:0,right:0,bottom:0,left:0};if(e.children.length===0){const{padding:n}=this.properties.tile;return{top:n,right:n,bottom:n,left:n}}const{label:{spacing:i},padding:o}=this.properties.group,s=this.groupTitleHeight(e,t),a=s!=null?s+i:0;return{top:o+a,right:o,bottom:o,left:o}}sortChildren({children:e}){const t=Array.from(e,(o,s)=>s).filter(o=>si(e[o])>0).sort((o,s)=>si(e[s])-si(e[o]));return{sortedChildrenIndices:t,childAt:o=>{const s=t[o];return e[s]}}}squarify(e,t){const{datum:i,children:o}=e;if(t.width<=0||t.height<=0){e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN;return}const s=i!=null?this.getNodePadding(e,t):{top:0,right:0,bottom:0,left:0};e.parent==null?(e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN):(e.bbox=t,e.padding=s,e.midPoint.x=t.x+t.width/2,e.midPoint.y=t.y);const{sortedChildrenIndices:a,childAt:n}=this.sortChildren(e),r=a.every(k=>o[k].children.length===0),l=1,c=t.width-s.left-s.right,p=t.height-s.top-s.bottom;if(c<=0||p<=0)return;const d=a.length;let u=0,g=0,y=1/0,m=a.reduce((k,A)=>k+si(o[A]),0);const f=new no(t.x+s.left,t.y+s.top,c,p),S=f.clone();let D=0;for(;D<d;){const k=si(n(D)),A=si(n(g)),M=S.width<S.height;u+=k;const b=M?S.height:S.width,L=M?S.width:S.height,I=L*A/u;let N=b*u/m;const R=Math.max(I,N)/Math.min(I,N),P=Math.abs(l-R);if(P<y){y=P,D++;continue}u-=k,N=b*u/m;let _=M?S.x:S.y;for(let T=g;T<D;T++){const O=n(T),E=si(O),C=M?_:S.x,w=M?S.y:_,F=L*E/u,B=M?F:N,V=M?N:F,G=new no(C,w,B,V);this.applyGap(f,G,r),this.squarify(O,G),m-=E,_+=F}M?(S.y+=N,S.height-=N):(S.x+=N,S.width-=N),g=D,u=0,y=1/0}const v=S.width<S.height;let x=v?S.x:S.y;for(let k=g;k<d;k++){const A=n(k),M=v?x:S.x,b=v?S.y:x,L=si(A)/m,I=S.width*(v?L:1),N=S.height*(v?1:L),R=new no(M,b,I,N);this.applyGap(f,R,r),this.squarify(A,R),x+=v?I:N}}applyGap(e,t,i){const o=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,s=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=s(e),n=s(t);["top","right","bottom","left"].forEach(l=>{iN(a[l],n[l])||t.shrink(o,l)})}createNodeData(){}getItemStyle(e,t,i){const{id:o,properties:s,colorScale:a,ctx:n}=this,{itemStyler:r}=s,l=e.datumIndex?.[0]??0,c=t?s.fills:s.undocumentedGroupFills,p=t?s.strokes:s.undocumentedGroupStrokes,d=t?l:e.depth??-1,u=i?s.highlightStyle.getStyle(t):void 0,g=iu(u,s.getStyle(t,c,p,d));!i&&t&&e.colorValue!=null&&(g.fill=a.convert(e.colorValue));let y=g;if(r!=null&&e!=null){const m=this.cachedDatumCallback(cN(this.getDatumId(e),i?"highlight":"node"),()=>{const f=n.highlightManager?.getActiveHighlight(),S=this.getHighlightStateString(f,i,e.datumIndex);return this.callWithContext(r,{seriesId:o,datum:e.datum,depth:e.depth??-1,highlighted:i,highlightState:S,...y})});m&&(y=iu(m,y))}return y}updateSelections(){let e=this.ctx.highlightManager?.getActiveHighlight();if(e!=null&&!this.properties.group.interactive&&e.children.length!==0&&(e=void 0),this.highlightSelection.update(e!=null?[e]:[],void 0,s=>this.getDatumId(s)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=this.chart??{};if(!t)return;const i=Array.from(this.rootNode),o=s=>{s.append([new kr({tag:0}),new kr({tag:1})])};this.datumSelection.update(i,void 0,s=>this.getDatumId(s)),this.labelSelection.update(i,o,s=>this.getDatumId(s))}updateNodes(){const{rootNode:e,data:t}=this,{childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,highlightStyle:c,tile:p,group:d}=this.properties,{seriesRect:u}=this.chart??{};if(!u||!t)return;this.rootNode?.walk(v=>{const{datum:x,depth:k,children:A}=v,M=A.length===0,b=M?p.label:d.label;let L;if(b.enabled&&x!=null&&k!=null&&a!=null){const N=x[a];L=this.getLabelText(N,x,a,"label",[],b,{depth:k,datum:x,childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:N})}L===""&&(L=void 0);let I;if(p.secondaryLabel.enabled&&M&&x!=null&&k!=null&&n!=null){const N=x[n];I=this.getLabelText(N,x,n,"secondaryLabel",[],p.secondaryLabel,{depth:k,datum:x,childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:N})}I===""&&(I=void 0),v.labelValue=L,v.secondaryLabelValue=I});const{width:g,height:y}=u;this.squarify(e,new no(0,0,g,y)),this.rootNode?.walk(v=>{const{bbox:x,children:k,labelValue:A,secondaryLabelValue:M}=v;if(v.label=void 0,v.secondaryLabel=void 0,x!=null)if(k.length===0){const b={width:x.width,height:x.height,meta:null},L=Ua(A,this.properties.tile.label,M,this.properties.tile.secondaryLabel,{padding:p.padding},()=>b);if(L==null)return;const{height:I,label:N,secondaryLabel:R}=L,{textAlign:P,verticalAlign:_,padding:T}=p,O=su[P]??.5,E=x.x+T+(x.width-2*T)*O,C=gN[_]??.5,w=x.y+T+I*.5+(x.height-2*T-I)*C;if(N!=null){const{fontStyle:F="normal",fontFamily:B,fontWeight:V="normal",color:G="black"}=this.properties.tile.label;v.label={text:N.text,fontSize:N.fontSize,lineHeight:N.lineHeight,fontStyle:F,fontFamily:B,fontWeight:V,color:G,textAlign:P,verticalAlign:"middle",x:E,y:w-(I-N.height)*.5}}if(R!=null){const{fontStyle:F="normal",fontFamily:B,fontWeight:V="normal",color:G="black"}=this.properties.tile.secondaryLabel;v.secondaryLabel={text:R.text,fontSize:R.fontSize,lineHeight:R.fontSize,fontStyle:F,fontFamily:B,fontWeight:V,color:G,textAlign:P,verticalAlign:"middle",x:E,y:w+(I-R.height)*.5}}}else{if(A==null)return;{const{padding:b,textAlign:L}=d,I=this.groupTitleHeight(v,x);if(I==null)return;const N=x.width-2*b,R=oN(A,{maxWidth:x.width-2*b,font:d.label,textWrap:"never"}),P=su[L]??.5,{fontStyle:_="normal",fontFamily:T,fontWeight:O="normal",color:E="black"}=this.properties.group.label;v.label={text:R,fontSize:d.label.fontSize,lineHeight:tN(d.label.fontSize),fontStyle:_,fontFamily:T,fontWeight:O,color:E,textAlign:L,verticalAlign:"middle",x:x.x+b+N*P,y:x.y+b+I*.5}}}});const m={series:new no(0,0,g,y),axis:new no(0,0,g,y)},f=(v,x,k)=>{const{bbox:A}=v;if(A==null){x.visible=!1;return}const{depth:M=-1}=v,b=v.children.length===0,L=this.getItemStyle(v,b,k);x.crisp=!0,pN(x,L,m),x.cornerRadius=b?p.cornerRadius:d.cornerRadius,x.zIndex=[0,M,k?1:0];const I=v.parent?.children.every(P=>P.children.length===0),N=v.parent!=null?v.parent.bbox:void 0,R=v.parent!=null?v.parent.padding:void 0;I===!0&&N!=null&&R!=null?(x.clipBBox=A,x.x=N.x+R.left,x.y=N.y+R.top,x.width=N.width-(R.left+R.right),x.height=N.height-(R.top+R.bottom)):(x.clipBBox=void 0,x.x=A.x,x.y=A.y,x.width=A.width,x.height=A.height),x.visible=!0};this.datumSelection.each((v,x)=>f(x,v,!1)),this.highlightSelection.each((v,x)=>{f(x,v,!0)});const S=(v,x,k,A)=>{const M=v.children.length===0,b=k===0?v.label:v.secondaryLabel;if(b==null){x.visible=!1;return}const L=k===0?p.label:p.secondaryLabel;let I;if(A){const{tile:_,group:T}=c;I=_.secondaryLabel.color,M?k===0&&(I=_.label.color):I=T.label.color}const N={childrenKey:this.properties.childrenKey,colorKey:this.properties.colorKey,colorName:this.properties.colorName??this.properties.colorKey,depth:v.depth??NaN,labelKey:this.properties.labelKey,secondaryLabelKey:this.properties.secondaryLabelKey,sizeKey:this.properties.sizeKey,sizeName:this.properties.sizeName??this.properties.sizeKey},R=this.ctx.highlightManager?.getActiveHighlight(),P=dN(this,v,N,L,A,R);x.text=b.text,x.fontSize=b.fontSize,x.lineHeight=b.lineHeight,x.fontStyle=b.fontStyle,x.fontFamily=b.fontFamily,x.fontWeight=b.fontWeight,x.fill=I??b.color,x.fillOpacity=this.getHighlightStyle(A,v.datumIndex)?.opacity??1,x.textAlign=b.textAlign,x.textBaseline=b.verticalAlign,x.x=b.x,x.y=b.y,x.setBoxing(P),x.visible=!0,x.zIndex=1},D=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(kr).forEach(v=>{const x=v.closestDatum();S(x,v,v.tag,x===D)})}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((i,o)=>o.datumIndex.length-i.datumIndex.length),t}pickNodeClosestDatum(e){const t=this.pickNodesExactShape(e);return t.length!==0?{datum:t[0],distance:0}:this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}getTooltipContent(e){const{id:t,properties:i,ctx:o}=this,{formatManager:s}=o,{labelKey:a,secondaryLabelKey:n,childrenKey:r,sizeKey:l,sizeName:c,colorKey:p,colorName:d,tooltip:u}=i,g=e.reduce((L,I)=>L?.children[I],this.rootNode);if(g==null)return;const{datum:y,depth:m,children:f}=g;if(y==null||m==null)return;const S=f.length===0,D=[],v=l!=null?y[l]:void 0;if(v!=null){const L=[0,this.rootNode?.sumSize??0],I=s.format(this.callWithContext.bind(this),{type:"number",value:v,datum:y,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:L,fractionDigits:void 0});D.push({label:c,fallbackLabel:l,value:I??ou(v)})}const x=p!=null?y[p]:void 0;if(x!=null){const{colorDomain:L}=this,I=s.format(this.callWithContext.bind(this),{type:"number",value:x,datum:y,seriesId:t,legendItemName:void 0,key:p,source:"tooltip",property:"color",boundSeries:this.getFormatterContext("color"),domain:L,fractionDigits:void 0});D.push({label:d,fallbackLabel:p,value:I??ou(x)})}const k=this.getItemStyle({...g,colorValue:x??g.colorValue},S,!1),M={shape:"square",fill:k.fill,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0};Vo.isGradientFill(M.fill)&&(M.fill={...M.fill,gradient:"linear",rotation:0,reverse:!1});const b=S?{marker:M}:void 0;return this.formatTooltipWithContext(u,{title:a!=null?y[a]:void 0,symbol:b,data:D},{seriesId:t,datum:y,title:void 0,depth:m,labelKey:a,secondaryLabelKey:n,childrenKey:r,sizeKey:l,sizeName:c,colorKey:p,colorName:d,...k})}computeFocusBounds(e){return hN.toCanvas(this.contentGroup,e.getBBox())}hasItemStylers(){return this.properties.itemStyler!=null}};ba.className="TreemapSeries",ba.type="treemap";import{_ModuleSupport as yN}from"ag-charts-community";import{arrayOf as au,color as nu,constant as mN,required as fN,string as Ci,undocumented as ru}from"ag-charts-core";var{commonSeriesOptionsDefs:SN,treemapSeriesThemeableOptionsDef:xN,without:bN}=yN,Ar={...xN,...bN(SN,["highlightStyle","highlight","showInLegend"]),type:fN(mN("treemap")),labelKey:Ci,secondaryLabelKey:Ci,childrenKey:Ci,sizeKey:Ci,colorKey:Ci,sizeName:Ci,colorName:Ci};Ar.undocumentedGroupFills=ru(au(nu)),Ar.undocumentedGroupStrokes=ru(au(nu));var{FONT_SIZE_RATIO:lu}=ii,e_={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"treemap",moduleFactory:e=>new ba(e),solo:!0,themeTemplate:{series:{fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",ii.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",ii.FILL_PATTERN_DEFAULTS],["image",ii.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},colorRange:{$palette:"divergingColors"},undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{...ii.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{...ii.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:1.5},minimumFontSize:{$rem:lu.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{...ii.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:lu.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:{$isUserOption:["../strokes/0",2,{$isUserOption:["./stroke",2,0]}]},padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0,...ii.LEGEND_CONTAINER_THEME}}},cu={type:"series",name:"treemap",chartType:"standalone",enterprise:!0,options:Ar,create:e=>new ba(e)},vN=mu.ModuleRegistry,hu=[Jr,Ga,Ya,ph,Sh,Ja,Qa,an,ln,dn],pu=[Zr,Qr,el,tl,_p,ed,id,pd,fd],du=[il,Wp,Fh,Td,Zd,cu,Jc,$d],uu=[al,qh,Jh,rp,mp,Sp],DN=[...hu,...pu,...du,...uu,wb,Ob,Fb];export{hu as AllCartesianEnterpriseModules,DN as AllEnterpriseModules,pu as AllPolarEnterpriseModules,du as AllStandaloneEnterpriseModules,uu as AllTopologyEnterpriseModules,Qr as AngleCategoryAxisModule,Zr as AngleNumberAxisModule,Ga as BoxPlotSeriesModule,Ya as CandlestickSeriesModule,Jc as ChordSeriesModule,ph as ConeFunnelSeriesModule,Sh as FunnelSeriesModule,Ja as HeatmapSeriesModule,Fh as LinearGaugeSeriesModule,Jh as MapLineBackgroundSeriesModule,qh as MapLineSeriesModule,rp as MapMarkerSeriesModule,Sp as MapShapeBackgroundSeriesModule,mp as MapShapeSeriesModule,vN as ModuleRegistry,_p as NightingaleSeriesModule,Qa as OhlcSeriesModule,Jr as OrdinalTimeAxisModule,Wp as PyramidSeriesModule,ed as RadarAreaSeriesModule,id as RadarLineSeriesModule,pd as RadialBarSeriesModule,fd as RadialColumnSeriesModule,Td as RadialGaugeSeriesModule,tl as RadiusCategoryAxisModule,el as RadiusNumberAxisModule,an as RangeAreaSeriesModule,ln as RangeBarSeriesModule,$d as SankeySeriesModule,il as StandaloneChartModule,Zd as SunburstSeriesModule,al as TopologyChartModule,cu as TreemapSeriesModule,dn as WaterfallSeriesModule};
